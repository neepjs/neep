/*!
 * NeepRendererHtml v0.1.0-alpha.16
 * (c) 2019-2021 Fierflame
 * @license MIT
 */
const e={svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML"},t=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]),n=new Set(["maction","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msubsup","msup","mtable","mtd","mtext","mtr","munder","munderover","semantics"]);function o(o,r){const i=/^([a-z][a-z0-9-]*):([a-z0-9-]+)$/i.exec(o),a=i?i[2]:o,c=(r||(null==i?void 0:i[1])||t.has(a.toLowerCase())&&"svg"||n.has(a.toLowerCase())&&"mathml"||"").toLowerCase();return c?document.createElementNS(c in e&&e[c]||c,a):document.createElement(a)}let r,i,a;const c=new WeakMap;function s(e,t){const n=c.get(t),o="string"==typeof(i=r(e.id)?e.id():e.id)?i:"number"==typeof i?String(i):void 0;var i;c.set(t,o),o!==n&&("string"==typeof o?t.id=o:t.removeAttribute("id"))}function l(e){const t=new Set;for(const n of function*e(t){if(r(t))yield*e(t());else if(Array.isArray(t))for(const n of t)yield*e(n);else yield t}(e))if(n)if("string"==typeof n)for(let e of n.split(" ").filter(Boolean))t.add(e);else if("object"==typeof n)for(const e in n){const o=n[e];for(let n of e.split(" ").filter(Boolean))t[o?"add":"delete"](n)}if(t.size)return t}const u=new WeakMap;function f(e,t){const n=u.get(t),o=l(r(e.class)?e.class():e.class);!function(e,t,n){if(t&&n){const o=e.getAttribute("class")||"",r=new Set(o.split(" ").filter(Boolean));n.forEach(e=>r.delete(e)),t.forEach(e=>r.add(e)),e.setAttribute("class",[...r].join(" "))}else t?e.setAttribute("class",[...t].join(" ")):n&&e.removeAttribute("class")}(t,o,n),u.set(t,o)}const p={width:"px",height:"px",top:"px",right:"px",bottom:"px",left:"px",border:"px","border-top":"px","border-right":"px","border-left":"px","border-bottom":"px","border-width":"px","border-top-width":"px","border-right-width":"px","border-left-width":"px","border-bottom-width":"px","border-radius":"px","border-top-left-radius":"px","border-top-right-radius":"px","border-bottom-left-radius":"px","border-bottom-right-radius":"px",padding:"px","padding-top":"px","padding-right":"px","padding-left":"px","padding-bottom":"px",margin:"px","margin-top":"px","margin-right":"px","margin-left":"px","margin-bottom":"px"};const d=new WeakMap;function m(e,t,n,o){if(!o)return;const i=d.get(t),a=function(e){if(r(e)&&(e=e()),"string"==typeof e)return e;if(!e)return;if("object"!=typeof e)return;const t=Object.create(null);for(let n in e){let o=e[n];r(o)&&(o=o());const i="--"===n.substr(0,2)?n:n.replace(/[A-Z]/g,"-$1").replace(/-+/g,"-").toLowerCase();if("number"==typeof o){const e=o&&n in p?`${o}${p[n]}`:""+o;t[i]=[e,void 0]}else if(o&&"string"==typeof o){const e=o.replace(/!important\s*$/,"");t[i]=[e,e===o?void 0:"important"]}}return t}(r(e.style)?e.style():e.style);return function(e,t,n){if(t)if("string"!=typeof t)if(n&&"string"!=typeof n){for(const o of Object.keys(t)){const r=t[o];n[o]&&n[o][0]===r[0]&&n[o][1]===r[1]||e.setProperty(o,...r)}for(const o of Object.keys(n))t[o]||e.removeProperty(o)}else{"string"==typeof n&&(e.cssText="");for(const n of Object.keys(t))e.setProperty(n,...t[n])}else t!==typeof n&&(e.cssText=t);else{if(!n)return;if("string"==typeof n)return void(e.cssText="");for(const t of Object.keys(n))e.removeProperty(t)}}(n,a,i),d.set(t,a),a}function g(e,t=!1){return null==e?e:t&&"function"==typeof e?void 0:"boolean"==typeof e?e?"":null:"object"!=typeof e?String(e):e instanceof Date?e.toISOString():e instanceof RegExp?e.toString():JSON.stringify(e)}const y=new WeakMap;function h(e,t,n){const o=y.get(t)||{},i=function(e,t){const n=Object.create(null);for(const o in e){if(/^(n|on|bind|slot)[:-]/.test(o))continue;if(!/^[a-zA-Z:_][a-zA-Z0-9:_-]*$/.test(o))continue;const i=o.toLowerCase();switch(i){case"style":if(!t)break;case"ref":case"is":case"id":case"class":continue}let a=e[o];r(a)&&(a=a());const c=g(a,"on"===i.substr(0,2));void 0!==c&&(n[i]=c)}return n}(e,n);!function(e,t,n){for(const o of Object.keys(t)){const r=t[o];o in n&&n[o]===r||(null===r?e.removeAttribute(o):e.setAttribute(o,r))}for(const o of Object.keys(n))o in t||e.removeAttribute(o)}(t,i,o),function(e,t){if(e instanceof HTMLInputElement&&"checked"in t)switch(e.type.toLowerCase()){case"checkbox":case"radio":null!==t.checked!==e.checked&&(e.checked=null!==t.checked)}if((e instanceof HTMLSelectElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&"value"in t){const n=t.value||"";e.value!==n&&(e.value=n)}if(e instanceof HTMLDetailsElement&&"open"in t){const n=null!==t.open;e.open!==n&&(e.open=n)}if(e instanceof HTMLMediaElement){if("muted"in t){const n=null!==t.muted;e.muted!==n&&(e.muted=n)}if("paused"in t){const n=null!==t.paused;e.paused!==n&&(n?e.pause():e.play())}if("currentTime"in t){const n=t.currentTime;if(n&&/^\d+(\.\d+)?$/.test(n)){const t=Number(n);e.currentTime!==t&&(e.currentTime=t)}}if("playbackRate"in t){const n=t.playbackRate;if(n&&/^\d+(\.\d+)?$/.test(n)){const t=Number(n);e.playbackRate!==t&&(e.playbackRate=t)}}if("volume"in t){const n=t.volume;if(n&&/^\d+(\.\d+)?$/.test(n)){const t=Number(n);e.volume!==t&&(e.volume=t)}}}}(t,i),y.set(t,i)}const b=new WeakMap;const v=new WeakMap;function x(e,t,n){const o=function(e){let t=b.get(e);return t||(t=Object.create(null),b.set(e,t),t)}(t);for(const[n,i,a]of function*(e){if(e instanceof HTMLInputElement){switch(e.type.toLowerCase()){case"checkbox":return yield["indeterminate","change",e=>e.currentTarget.indeterminate],yield["checked","change",e=>e.currentTarget.checked];case"radio":return yield["checked","change",e=>e.currentTarget.checked]}return yield["value","input",e=>e.currentTarget.value]}return e instanceof HTMLTextAreaElement?yield["value","input",e=>e.currentTarget.value]:e instanceof HTMLSelectElement?yield["value","change",e=>e.currentTarget.value]:e instanceof HTMLDetailsElement?yield["open","toggle",e=>e.currentTarget.open]:e instanceof HTMLMediaElement?(yield["currentTime","timeupdate",e=>e.currentTarget.currentTime],yield["playbackRate","ratechange",e=>e.currentTarget.playbackRate],yield["volume","volumechange",e=>e.currentTarget.volume],yield["muted","volumechange",e=>e.currentTarget.muted],yield["paused","playing",e=>e.currentTarget.paused],yield["paused","pause",e=>e.currentTarget.paused]):void 0}(t)){const c=e[n],s=o[n];if(s&&s[0]===c)continue;if(s&&s[1](),!r(c))continue;const l=e=>{c(a(e))};t.addEventListener(i,l),o[i]=[c,()=>t.removeEventListener(i,l)]}const i=new Set(n.names.map(String)),a=function(e){let t=v.get(e);return t||(t=Object.create(null),v.set(e,t),t)}(t);for(const e of Object.keys(a))i.has(e)||(a[e](),delete a[e]);for(const e of i){if(e in a)continue;const o=t=>n(e,t);t.addEventListener(e,o),a[e]=()=>{t.removeEventListener(e,o)}}}function w(e,t,n,o){const r=t.style,i=r instanceof CSSStyleDeclaration;return s(n,t),f(n,t),h(n,t,i),m(n,t,r,i),x(n,t,o),t}function T(e,t,n,o){return r(n)&&(n=n.value),null===n?{target:t,insert:null,next:null}:("string"==typeof n&&(n=document.querySelector(n)),n instanceof Element?{target:n,insert:null,next:null}:{target:null,insert:null,next:null})}const k={type:"html",nextFrame:function(e){window.requestAnimationFrame(e)},isNode:e=>e instanceof Node,getContainer:(e,t,n)=>function(e,t,n,o){return"string"==typeof n&&(n=document.querySelector(n)),null===n?[null,null]:(n instanceof Element||(n=document.body),"string"==typeof o&&(o=document.querySelector(o)),o instanceof Element&&o.parentElement===n||(o=null),[n,o])}(0,0,t,n),mountContainer:(e,t,n,r)=>function(e,t,{target:n,...r},i,a){const c=o("div");return w(0,c,(null==t?void 0:t.props)||r,i),{...T(0,c,n),container:c,exposed:null}}(0,e,t,n),updateContainer:(e,t,n,o,r,i,a,c)=>function(e,t,n,{target:o,...r},i,a){return w(0,t,(null==n?void 0:n.props)||r,i),T(0,t,o)}(0,e,r,i,a),recoveryContainer(){},unmountContainer:(e,t,n,o)=>function(e,t,n){null===n&&t.remove()}(0,e,t),getMountOptions(){},createElement:e=>e&&"string"==typeof e?o(e):null,createText:e=>function(e){return document.createTextNode(e)}(e),createPlaceholder:()=>document.createComment(""),createComponent:()=>function(e){const t=o("neep-component");return[t,t.attachShadow({mode:"open"})]}(),getParent:e=>function(e){return e.parentNode}(e),nextNode:e=>e.nextSibling,updateProps(e,t,n,o){w(0,e,n,o)},insertNode:(e,t,n=null)=>function(e,t,n=null){e.insertBefore(t,n)}(e,t,n),removeNode(e){return function(e,t){const n=e.getParent(t);n&&n.removeChild(t)}(this,e)}};let M;function L(){M=i(a(""),{renderer:k,name:"[HTML]"})}function E(e){!function(e,t){({isValue:r,createContainerComponent:i,createElement:a}=t),t.install({renderer:e})}(k,e),L()}var S=Object.freeze({__proto__:null,renderer:k,install:E,get Container(){return M}});export default S;export{M as Container,E as install,k as renderer};
