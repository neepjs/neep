{"version":3,"file":"index.js","sources":["../../packages/core/src/install/devtools.ts","../../packages/core/src/Error.ts","../../packages/core/src/install/render.ts","../../node_modules/monitorable/dist/monitorable.esm.js","../../packages/core/src/install/monitorable.ts","../../packages/core/src/install/index.ts","../../packages/core/src/EventEmitter.ts","../../packages/core/src/auxiliary/tags.ts","../../packages/core/src/extends/current.ts","../../packages/core/src/extends/context.ts","../../packages/core/src/extends/entity.ts","../../packages/core/src/extends/refresh.ts","../../packages/core/src/hook.ts","../../packages/core/src/auxiliary/life.ts","../../packages/core/src/symbols.ts","../../packages/core/src/auxiliary/element.ts","../../packages/core/src/extends/label.ts","../../packages/core/src/auxiliary/dev.ts","../../packages/core/src/entity/id.ts","../../packages/core/src/entity/recursive.ts","../../packages/core/src/entity/draw/utils.ts","../../packages/core/src/entity/draw/create.ts","../../packages/core/src/entity/draw/update.ts","../../packages/core/src/entity/draw/index.ts","../../packages/core/src/entity/slot.ts","../../packages/core/src/entity/props.ts","../../packages/core/src/register.ts","../../packages/core/src/entity/normalize/replaceNode.ts","../../packages/core/src/entity/normalize/index.ts","../../packages/core/src/entity/EntityObject.ts","../../packages/core/src/entity/ComponentEntity.ts","../../packages/core/src/entity/convert/utils.ts","../../packages/core/src/entity/convert/create.ts","../../packages/core/src/entity/convert/update.ts","../../packages/core/src/entity/convert/index.ts","../../packages/core/src/entity/ContainerEntity.ts","../../packages/core/src/render.ts","../../packages/core/src/create.ts","../../packages/web-render/src/install/neep.ts","../../packages/web-render/src/update/id.ts","../../packages/web-render/src/update/class.ts","../../packages/web-render/src/update/style.ts","../../packages/web-render/src/update/attr.ts","../../packages/web-render/src/update/event.ts","../../packages/web-render/src/update/index.ts","../../packages/web-render/src/nextFrame.ts","../../packages/web-render/src/createElement.ts","../../packages/web-render/src/utils.ts","../../packages/web-render/src/render.ts","../../packages/web-render/src/install/install.ts","../components/Compute.tsx","../components/Compute2.tsx","../components/Sync.tsx","../components/Sync2.tsx","../components/B.tsx","../register.ts","../components/E.tsx","../components/D.tsx","../components/C.tsx","../components/A.tsx","../App.tsx","../index.tsx"],"sourcesContent":["import { Devtools } from '../type';\n\nexport const devtools: Devtools = {\n\trenderHook(){},\n};\n\nexport default function installDevtools(\n\ttools?: Partial<Devtools>,\n): void {\n\tif (!tools) { return; }\n\tif (typeof tools !== 'object') { return; }\n\tconst { renderHook } = tools;\n\tif (typeof renderHook === 'function') {\n\t\tdevtools.renderHook = renderHook;\n\t}\n}\n","export default class NeepError extends Error {\n\treadonly tag: string;\n\tconstructor(message: string, tag: string = '') {\n\t\tsuper(tag ? `[${ tag }] ${ message }` : message);\n\t\tthis.tag = tag;\n\t}\n}\nexport function assert(v: any, message: string, tag?: string): void {\n\tif (v) { return; }\n\tthrow new NeepError(message, tag);\n}\n","import { IRender } from '../type';\nimport { assert } from '../Error';\n\nlet nextFrameApi: undefined | ((fn: () => void) => void);\nexport function nextFrame(fn: () => void): void {\n\tassert(nextFrameApi, 'The basic renderer is not installed', 'install');\n\tif (nextFrameApi) {\n\t\tnextFrameApi(fn);\n\t}\n}\n\nexport const renders: Record<string, IRender>\n\t= Object.create(null);\n\nexport function getRender(\n\ttype: string | number | IRender = '',\n): IRender {\n\tif (typeof type === 'object') { return type; }\n\treturn renders[type] || renders.default;\n}\n\nexport default function installRender(render?: IRender): void {\n\tif (!render) { return; }\n\trenders[render.type] = render;\n\tif (nextFrameApi) { return; }\n\tif (!renders.default) {\n\t\trenders.default = render;\n\t}\n\tif (!nextFrameApi && render.nextFrame) {\n\t\trenders.default = render;\n\t\tnextFrameApi = render.nextFrame;\n\t}\n\n}\n","\n/*!\n * monitorable v0.1.0-beta.0\n * (c) 2020 Fierflame\n * @license MIT\n */\n\nlet printErrorLog;\n/** 打印错误 */\n\nfunction printError(info) {\n  if (typeof printErrorLog === 'function') {\n    printErrorLog(info);\n    return;\n  }\n\n  console.error(info);\n}\nfunction setPrintError(p) {\n  printErrorLog = typeof p === 'function' ? p : undefined;\n}\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n/** 回调函数安全化处理 */\n\nfunction safeify(fn) {\n  return (...p) => {\n    try {\n      fn(...p);\n    } catch (e) {\n      printError(e);\n    }\n  };\n}\nfunction getIndexes(target, prop) {\n  if (!target) {\n    return undefined;\n  }\n\n  if (typeof target !== 'function' && typeof target !== 'object') {\n    return undefined;\n  }\n\n  if (typeof prop === 'number') {\n    return [target, String(prop)];\n  }\n\n  if (typeof prop === 'symbol') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'string') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'boolean') {\n    return [target, prop];\n  }\n\n  return undefined;\n}\nfunction getMapValue(map, key, def) {\n  if (map.has(key)) {\n    return map.get(key);\n  }\n\n  const value = def();\n  map.set(key, value);\n  return value;\n}\n\n/** 已被读取的 */\nlet read;\n/**\n * 标记已读状态\n * @param obj  要标记的对象\n * @param prop 要标记的属性\n */\n\nfunction markRead(target, prop) {\n  if (!read) {\n    return;\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n  const propMap = getMapValue(read, target, () => new Map());\n\n  if (propMap.has(prop)) {\n    return;\n  }\n\n  propMap.set(prop, false);\n}\n\n/**\n * 监听函数的执行，并将执行过程中读取的对象值设置到 map 中\n * @param fn 要执行的含糊\n * @param map 用于存储被读取对象的 map\n */\nfunction observeRun(map, fn, options) {\n  const oldRead = read;\n  read = map;\n\n  try {\n    if (!(options === null || options === void 0 ? void 0 : options.postpone)) {\n      return fn();\n    }\n\n    return postpone(fn, options.postpone === 'priority');\n  } finally {\n    read = oldRead;\n  }\n}\nfunction observe(map, fn, options) {\n  if (typeof fn === 'function') {\n    return observeRun(map, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return observeRun(map, options, fn);\n}\nconst watchList = new WeakMap();\n\nfunction execWatch(target, prop) {\n  var _watchList$get;\n\n  const watch = (_watchList$get = watchList.get(target)) === null || _watchList$get === void 0 ? void 0 : _watchList$get.get(prop);\n\n  if (!watch) {\n    return;\n  }\n\n  [...watch].forEach(w => w());\n}\n\nlet waitList;\n\nfunction run(list) {\n  for (const [target, set] of list.entries()) {\n    var _read;\n\n    const propMap = (_read = read) === null || _read === void 0 ? void 0 : _read.get(target);\n\n    for (const prop of set) {\n      execWatch(target, prop);\n\n      if (propMap === null || propMap === void 0 ? void 0 : propMap.has(prop)) {\n        propMap.set(prop, true);\n      }\n    }\n  }\n}\n\nfunction postponeRun(f, priority) {\n  const list = !priority && waitList || new Map();\n  const old = waitList;\n  waitList = list;\n\n  try {\n    return f();\n  } finally {\n    waitList = old;\n\n    if (list !== waitList) {\n      run(list);\n    }\n  }\n}\n\nfunction postpone(fn, priority) {\n  if (typeof fn === 'function') {\n    return postponeRun(fn, priority);\n  }\n\n  if (typeof priority !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return postponeRun(priority, fn);\n}\n\nfunction wait(target, prop) {\n  if (!waitList) {\n    return false;\n  }\n\n  getMapValue(waitList, target, () => new Set()).add(prop);\n  return true;\n}\n/**\n * 标记属性的修改，同时触发监听函数\n * @param target 要标记的对象\n * @param prop   要标记的属性 特别的，false 表示原型，true 表示成员\n */\n\n\nfunction markChange(target, prop) {\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n\n  if (wait(target, prop)) {\n    return;\n  }\n\n  execWatch(target, prop);\n}\n/**\n * 观察对象属性的变化\n * @param target 要观察的对象\n * @param prop   要观察的属性名 特别的，false 表示原型，true 表示成员\n * @param fn     属性改变后触发的函数\n */\n\nfunction watchProp(target, prop, cb) {\n  if (typeof cb !== 'function') {\n    return () => {};\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return () => {};\n  }\n\n  [target, prop] = indexes;\n  const key = prop;\n  let map = watchList.get(target);\n\n  if (!map) {\n    map = new Map();\n    watchList.set(target, map);\n  }\n\n  const list = getMapValue(map, key, () => new Set());\n  cb = safeify(cb);\n  list.add(cb);\n  let removed = false;\n  return () => {\n    if (removed) {\n      return;\n    }\n\n    removed = true; // 从当前列表中移除\n\n    list.delete(cb); // 从属性关联中删除\n\n    if (list.size) {\n      return;\n    }\n\n    if (!map) {\n      return;\n    }\n\n    map.delete(key); // 映射列表中删除\n\n    if (map.size) {\n      return;\n    }\n\n    watchList.delete(target);\n  };\n}\n\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable$1(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n\nlet getValue;\n/**\n * 获取被代理对象\n * @param obj  要被代理的对象\n * @param nest 递归代理的层数\n */\n\nfunction encase(value, nest = 0) {\n  if (!encashable$1(value)) {\n    return value;\n  }\n\n  const original = recover(value);\n  const nestLayer = nest === true ? Infinity : nest || 0;\n  const proxy = new Proxy(original, {\n    set(target, prop, value, receiver) {\n      if (nest === false) {\n        return Reflect.set(target, prop, value, receiver);\n      }\n\n      const has = Reflect.has(target, prop);\n      const modified = Reflect.set(target, prop, value, encase(receiver));\n\n      if (!modified) {\n        return modified;\n      }\n\n      if (has !== Reflect.has(target, prop)) {\n        markChange(target, true);\n      }\n\n      return modified;\n    },\n\n    get(target, prop, receiver) {\n      if (getValue === proxy) {\n        if (prop === '__monitorable__recover__') {\n          getValue = original;\n          return;\n        }\n      }\n\n      if (nest === false) {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      markRead(target, prop);\n      const value = Reflect.get(target, prop, encase(receiver));\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    setPrototypeOf(target, proto) {\n      if (nest === false) {\n        return Reflect.setPrototypeOf(target, proto);\n      }\n\n      const oldProto = Reflect.getPrototypeOf(target);\n      const modified = Reflect.setPrototypeOf(target, proto);\n\n      if (modified && oldProto !== proto) {\n        markChange(target, false);\n      }\n\n      return modified;\n    },\n\n    getPrototypeOf(target) {\n      if (nest === false) {\n        return Reflect.getPrototypeOf(target);\n      }\n\n      markRead(target, false);\n      const value = Reflect.getPrototypeOf(target);\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    defineProperty(target, prop, attr) {\n      if (nest === false) {\n        return Reflect.defineProperty(target, prop, attr);\n      }\n\n      let changed = true;\n\n      if ('value' in attr) {\n        const desc = Reflect.getOwnPropertyDescriptor(target, prop);\n\n        if (desc && 'value' in desc && recover(attr.value) === recover(desc.value)) {\n          changed = false;\n        }\n      }\n\n      const modified = Reflect.defineProperty(target, prop, attr);\n\n      if (changed && modified) {\n        markChange(target, prop);\n      }\n\n      return modified;\n    },\n\n    getOwnPropertyDescriptor(target, prop) {\n      if (nest === false) {\n        return Reflect.getOwnPropertyDescriptor(target, prop);\n      }\n\n      markRead(target, prop);\n      return Reflect.getOwnPropertyDescriptor(target, prop);\n    },\n\n    deleteProperty(target, prop) {\n      if (nest === false) {\n        return Reflect.deleteProperty(target, prop);\n      }\n\n      const has = Reflect.has(target, prop);\n      const deleted = Reflect.deleteProperty(target, prop);\n\n      if (has && !Reflect.has(target, prop)) {\n        markChange(target, prop);\n        markChange(target, true);\n      }\n\n      return deleted;\n    },\n\n    ownKeys(target) {\n      if (nest === false) {\n        return Reflect.ownKeys(target);\n      }\n\n      markRead(target, true);\n      return Reflect.ownKeys(target);\n    },\n\n    has(target, prop) {\n      if (nest === false) {\n        return Reflect.has(target, prop);\n      }\n\n      markRead(target, true);\n      return Reflect.has(target, prop);\n    }\n\n  });\n  return proxy;\n}\n/** 获取被代理的原始值 */\n\nfunction recover(v) {\n  if (!v) {\n    return v;\n  }\n\n  if (!encashable$1(v)) {\n    return v;\n  }\n\n  let value = v;\n\n  try {\n    getValue = v;\n    value = v.__monitorable__recover__;\n  } catch (_unused) {}\n\n  value = getValue;\n  getValue = false;\n\n  if (!value) {\n    return v;\n  }\n\n  if (typeof value === 'object') {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    return value;\n  }\n\n  return v;\n}\nfunction equal(a, b) {\n  return recover(a) === recover(b);\n}\n\nfunction run$1(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  const postpone = options === null || options === void 0 ? void 0 : options.postpone;\n  let end = false;\n  /** 取消监听 */\n\n  function cancel() {\n    if (end) {\n      return false;\n    }\n\n    end = true;\n\n    if (!cancelList) {\n      return true;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (end) {\n      return false;\n    }\n\n    if (!thisRead.size) {\n      end = true;\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(recover(obj), p, trigger));\n  }\n\n  function stop() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  }\n  const thisRead = new Map();\n  const result = observe(thisRead, () => fn(stop), {\n    postpone\n  });\n  run(thisRead);\n\n  if (options === null || options === void 0 ? void 0 : options.resultOnly) {\n    return result;\n  }\n\n  return {\n    result,\n    stop\n  };\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction exec(cb, fn, options) {\n  if (typeof cb !== 'function') {\n    throw new Error('cb needs to be a function');\n  }\n\n  if (typeof fn === 'function') {\n    return run$1(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return run$1(cb, options, fn);\n}\n\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\nfunction create(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  /** 取消监听 */\n\n  function cancel() {\n    if (!cancelList) {\n      return false;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (!thisRead.size) {\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(recover(obj), p, trigger));\n  }\n\n  function exec(...p) {\n    cancel();\n    const thisRead = new Map();\n    const result = observe(thisRead, () => fn(...p), options);\n    run(thisRead);\n    return result;\n  }\n\n  exec.stop = () => {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  };\n\n  return exec;\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction monitor(cb, fn, options) {\n  if (typeof fn === 'function') {\n    return create(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return create(cb, options, fn);\n}\n\n/** 取消监听的方法 */\n\nconst values = new WeakSet();\nfunction isValue(x) {\n  return values.has(x);\n}\n/** 触发监听 */\n\nfunction valueOf() {\n  const value = this();\n\n  if (value === undefined) {\n    return value;\n  }\n\n  if (value === null) {\n    return value;\n  }\n\n  return value.valueOf();\n}\n\nfunction toString(...p) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value.toString === 'function') {\n    return value.toString(...p);\n  }\n\n  return String(value);\n}\n\nfunction toPrimitive(hint) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value[Symbol.toPrimitive] === 'function') {\n    return value[Symbol.toPrimitive](hint);\n  }\n\n  if (hint === 'string') {\n    return String(value);\n  }\n\n  if (hint === 'number') {\n    return Number(value);\n  }\n\n  return value;\n}\n\nfunction createValue(recover, setValue, stop = () => {}, change = () => {}) {\n  function set(v, marked = false) {\n    if (!setValue) {\n      return;\n    }\n\n    try {\n      setValue(v, () => {\n        marked = true;\n      });\n    } finally {\n      if (marked) {\n        trigger();\n      }\n    }\n  }\n\n  function get() {\n    markRead(value, 'value');\n    return recover();\n  }\n\n  const value = (...v) => {\n    if (v.length) {\n      set(v[0], v[1]);\n      return v[0];\n    }\n\n    return get();\n  };\n\n  Reflect.defineProperty(value, 'value', {\n    get,\n    set,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'valueOf', {\n    value: valueOf,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'toString', {\n    value: toString,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, Symbol.toPrimitive, {\n    value: toPrimitive,\n    enumerable: true,\n    configurable: true\n  });\n\n  function watch(cb) {\n    if (!callbacks) {\n      return () => {};\n    }\n\n    cb = safeify(cb);\n    callbacks.push(cb);\n    change();\n    let cancelled = false;\n    return () => {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (!callbacks) {\n        return;\n      }\n\n      const index = callbacks.findIndex(a => a === cb);\n\n      if (index < 0) {\n        return;\n      }\n\n      callbacks.splice(index, 1);\n      change();\n    };\n  }\n\n  let callbacks = [];\n  Reflect.defineProperty(value, 'watch', {\n    get() {\n      return watch;\n    },\n\n    set() {},\n\n    configurable: true\n  });\n\n  const trigger = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    markChange(value, 'value');\n\n    for (const cb of [...callbacks]) {\n      cb(value, false);\n    }\n  };\n\n  trigger.has = () => {\n    var _callbacks;\n\n    return Boolean((_callbacks = callbacks) === null || _callbacks === void 0 ? void 0 : _callbacks.length);\n  };\n\n  trigger.stop = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    const list = callbacks;\n    callbacks = undefined;\n\n    for (const cb of [...list]) {\n      cb(value, true);\n    }\n  };\n\n  values.add(value);\n  let stopped = false;\n\n  value.stop = () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n    stop();\n    trigger.stop();\n  };\n\n  return {\n    value,\n    trigger\n  };\n}\n/**\n * 创建引用值\n * @param value 初始值\n * @param options 选项\n */\n\n\nfunction value(def, options) {\n  const proxy = options === true || options && options.proxy;\n  let source;\n  let proxyValue;\n  const {\n    value\n  } = createValue(() => proxyValue, (v, mark) => {\n    if (proxy) {\n      v = recover(v);\n    }\n\n    if (v === source) {\n      return;\n    }\n\n    source = v;\n    proxyValue = proxy ? encase(source) : source;\n    mark();\n  });\n  value(def);\n  return value;\n}\nfunction computed(getter, setter, options) {\n  var _options;\n\n  if (typeof setter !== 'function') {\n    options = setter;\n    setter = undefined;\n  }\n\n  const setValue = setter;\n  const proxy = options === true || options && options.proxy;\n  const postpone = typeof options === 'object' && ((_options = options) === null || _options === void 0 ? void 0 : _options.postpone);\n  let source;\n  let proxyValue;\n  let stopped = false;\n  let computed = false;\n  let trigger;\n  const executable = monitor(changed => {\n    computed = !changed;\n\n    if (changed && trigger) {\n      trigger();\n    }\n  }, getter, {\n    postpone\n  });\n\n  function run() {\n    computed = true;\n\n    try {\n      source = executable();\n\n      if (proxy) {\n        source = recover(source);\n      }\n\n      proxyValue = proxy ? encase(source) : source;\n      return proxyValue;\n    } catch (e) {\n      if (!stopped) {\n        computed = false;\n      }\n\n      throw e;\n    }\n  }\n\n  let value;\n  ({\n    value,\n    trigger\n  } = createValue(() => computed || stopped ? proxyValue : run(), setValue && (v => setValue(proxy ? recover(v) : v)), () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n\n    if (computed) {\n      return;\n    }\n\n    run();\n  }));\n  return value;\n}\nfunction merge(cb) {\n  let oldValue;\n  let ran = false;\n  return (v, stopped) => {\n    if (stopped) {\n      return cb(v, stopped);\n    }\n\n    const newValue = recover(v());\n\n    if (newValue === oldValue && ran) {\n      return;\n    }\n\n    ran = true;\n    oldValue = newValue;\n    cb(v, stopped);\n  };\n}\nfunction mix(source) {\n  for (const k of Reflect.ownKeys(source)) {\n    const descriptor = Reflect.getOwnPropertyDescriptor(source, k);\n\n    if (!descriptor) {\n      continue;\n    }\n\n    if (!('value' in descriptor) || 'get' in descriptor || 'set' in descriptor) {\n      continue;\n    }\n\n    const value = descriptor.value;\n\n    if (!isValue(value)) {\n      continue;\n    }\n\n    descriptor.get = () => value.value;\n\n    if (descriptor.writable) {\n      descriptor.set = v => value.value = v;\n    }\n\n    delete descriptor.value;\n    delete descriptor.writable;\n    Reflect.defineProperty(source, k, descriptor);\n  }\n\n  return source;\n}\n\nfunction createValue$1(props, key, def = value(undefined), set) {\n  function setValue(value, setted) {\n    if (!set) {\n      return;\n    }\n\n    set(value, setted);\n  }\n\n  return computed(() => {\n    if (!(key in props)) {\n      return def();\n    }\n\n    const p = props[key];\n    return isValue(p) ? p() : p;\n  }, v => {\n    if (!(key in props)) {\n      def(v);\n      setValue(v, false);\n      return;\n    }\n\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n      setValue(v, true);\n      return;\n    }\n\n    setValue(v, false);\n  });\n}\n\nfunction valueify(props, key, def, set) {\n  if (arguments.length >= 2) {\n    return createValue$1(props, key, def, set);\n  }\n\n  return (k, d, s) => createValue$1(props, k, d, s);\n}\n\nfunction createValue$2(props, key) {\n  return computed(() => {\n    const p = props[key];\n    return isValue(p) ? p() : p;\n  }, v => {\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n    } else {\n      props[key] = v;\n    }\n  });\n}\n\nfunction asValue(props, key) {\n  if (arguments.length >= 2) {\n    return createValue$2(props, key);\n  }\n\n  return k => createValue$2(props, k);\n}\n\nexport { asValue, computed, encase, encashable, equal, exec, getIndexes, getMapValue, isValue, markChange, markRead, merge, mix, monitor, observe, observeRun, postpone, printError, recover, safeify, setPrintError, value, valueify, watchProp };\n//# sourceMappingURL=monitorable.esm.js.map\n","export {\n\tvalue, computed, isValue, encase, recover, valueify, asValue,\n\tmarkRead, markChange, safeify, exec, monitor,\n} from 'monitorable';\n\n\nexport default function installMonitorable(\n\tapi?: typeof import('monitorable'),\n): void {\n}\n","import * as monitorableApi from 'monitorable';\nimport { IRender, Devtools } from '../type';\nimport { isProduction } from '../constant';\nimport installDevtools from './devtools';\nimport installRender from './render';\nimport installMonitorable from './monitorable';\n\n\nexport * from './devtools';\nexport * from './render';\nexport * from './monitorable';\n\n\nexport interface InstallOptions {\n\tmonitorable?: typeof monitorableApi;\n\trender?: IRender;\n\tdevtools?: Devtools;\n}\n\n\nexport default function install(apis: InstallOptions): void {\n\tinstallMonitorable(apis.monitorable);\n\tinstallRender(apis.render);\n\tif (!isProduction) {\n\t\tinstallDevtools(apis.devtools);\n\t}\n}\n","import { markRead, markChange } from './install';\nimport { Emit, On } from './type';\n\nfunction getEventName(k: string): string {\n\tif (k[0] === '@') { return k.substr(1); }\n\tif (/^on[:-]/.test(k)) { return k.substr(3); }\n\tif (/^n([:-])on(\\1|:)/.test(k)) { return k.substr(5); }\n\treturn '';\n}\ninterface AddEvent<T extends Record<string, any[]>> {\n\t<N extends keyof T>(\n\t\tentName: N,\n\t\tlistener: (...p: T[N]) => void,\n\t): void\n}\n\nfunction addEventFromCollection(\n\taddEvent: (entName: string, listener: (...p: any) => void) => void,\n\tevents: any,\n): void {\n\tif (!events) { return; }\n\tif (typeof events === 'function') {\n\t\tconst { names } = events as Emit;\n\t\tif (!Array.isArray(names)) { return; }\n\t\tfor (const n of names) {\n\t\t\tif (!n) { continue; }\n\t\t\taddEvent(n, (...p) => events(n, ...p));\n\t\t}\n\t\treturn;\n\t}\n\tif (typeof events !== 'object') { return; }\n\tfor (const k of Object.keys(events)) {\n\t\tconst f = events[k];\n\t\tif (typeof f !== 'function') { continue; }\n\t\taddEvent(k, f);\n\t}\n\n}\n\nexport default class EventEmitter<\n\tT extends Record<string, any[]> = Record<string, any[]>\n> {\n\tstatic update<T extends Record<string, any[]>>(\n\t\temitter: EventEmitter<T>,\n\t\tevents: any,\n\t): (() => void)[] {\n\t\tif (!events) { return []; }\n\t\tconst newHandles: (() => void)[] = [];\n\t\tif (events && typeof events === 'object') {\n\t\t\tfor (const n of Object.keys(events)) {\n\t\t\t\tif (!n) { continue; }\n\t\t\t\tconst fn = events[n];\n\t\t\t\tif (typeof fn !== 'function') { continue; }\n\t\t\t\tnewHandles.push(emitter.on(n, fn));\n\t\t\t}\n\t\t}\n\t\treturn newHandles;\n\t}\n\tstatic updateInProps<T extends Record<string, any[]>>(\n\t\temitter: EventEmitter<T>,\n\t\tprops: any,\n\t\tcustom?: (addEvent: AddEvent<T>) => void,\n\t): (() => void)[] {\n\t\tif (!props) { return []; }\n\n\t\tconst newHandles: (() => void)[] = [];\n\n\t\tfunction addEvent<N extends keyof T>(\n\t\t\tentName: N,\n\t\t\tlistener: (...p: T[N]) => void,\n\t\t): void {\n\t\t\tnewHandles.push(emitter.on(entName, listener));\n\t\t}\n\t\tfor (const k of Object.keys(props)) {\n\t\t\tconst fn = props[k];\n\t\t\tif (typeof fn !== 'function') { continue; }\n\t\t\tconst entName = getEventName(k);\n\t\t\tif (!entName) { continue; }\n\t\t\taddEvent(entName, fn);\n\t\t}\n\t\taddEventFromCollection(addEvent, props['@']);\n\t\taddEventFromCollection(addEvent, props['n:on']);\n\t\taddEventFromCollection(addEvent, props['n-on']);\n\t\tif (typeof custom === 'function') {\n\t\t\tcustom(addEvent);\n\t\t}\n\t\tnewHandles.push(...EventEmitter.update(emitter, props['@']));\n\t\treturn newHandles;\n\t}\n\n\tprivate readonly _names = new Set<keyof T>();\n\tprivate readonly _cancelHandles = new Set<() => void>();\n\tget names(): (keyof T)[] {\n\t\treturn [...this._names];\n\t}\n\treadonly emit: Emit<T>;\n\treadonly on: On<T>;\n\tconstructor() {\n\t\tconst events: Record<keyof T, Set<Function>> = Object.create(null);\n\t\tconst names = this._names;\n\n\t\tfunction createEmit(\n\t\t\t...omitNames: (string | number | symbol)[]\n\t\t): Emit<T> {\n\t\t\tfunction emit<N extends keyof T>(name: N, ...p: T[N]): boolean {\n\t\t\t\tconst event = events[name];\n\t\t\t\tif (!event) { return true; }\n\t\t\t\tlet res = true;\n\t\t\t\tfor (const fn of [...event]) {\n\t\t\t\t\tres = fn(...p) && res;\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t}\n\t\t\temit.omit = (...names: string[]) =>\n\t\t\t\tcreateEmit(...omitNames, ...names);\n\t\t\tReflect.defineProperty(emit, 'names', {\n\t\t\t\tget:() => {\n\t\t\t\t\tmarkRead(createEmit, 'names');\n\t\t\t\t\treturn [...names]\n\t\t\t\t\t\t.filter(t => !omitNames.includes(t));\n\t\t\t\t},\n\t\t\t\tconfigurable: true,\n\t\t\t});\n\t\t\treturn emit as any as Emit<T>;\n\t\t}\n\t\tconst on: On<T> = (name, listener): () => void => {\n\t\t\tfunction fn(...p: Parameters<typeof listener>): boolean {\n\t\t\t\ttry {\n\t\t\t\t\treturn listener(...p) !== false;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet event = events[name];\n\t\t\tif (!event?.size) {\n\t\t\t\tevent = new Set();\n\t\t\t\tevents[name] = event;\n\t\t\t\tmarkChange(createEmit, 'names');\n\t\t\t\tnames.add(name);\n\t\t\t}\n\t\t\tevent.add(fn);\n\t\t\tlet removed = false;\n\t\t\treturn () => {\n\t\t\t\tif (removed) { return; }\n\t\t\t\tremoved = true;\n\t\t\t\tevent.delete(fn);\n\t\t\t\tif (event.size) { return; }\n\t\t\t\tmarkChange(createEmit, 'names');\n\t\t\t\tnames.delete(name);\n\t\t\t};\n\t\t};\n\t\tthis.emit = createEmit();\n\t\tthis.on = on;\n\t}\n\tupdateHandles(newHandles: (() => void)[]): (() => void)[] {\n\t\tconst eventCancelHandles = this._cancelHandles;\n\t\tconst oldHandles = [...eventCancelHandles];\n\t\teventCancelHandles.clear();\n\t\tfor (const fn of oldHandles) { fn(); }\n\t\tnewHandles.forEach(f => eventCancelHandles.add(f));\n\t\treturn newHandles;\n\t}\n\tupdate(list: any): (() => void)[] {\n\t\tconst handles = EventEmitter.update(this, list);\n\t\treturn this.updateHandles(handles);\n\t}\n\tupdateInProps(\n\t\tlist: any,\n\t\tcustom?: (addEvent: AddEvent<T>) => void,\n\t): (() => void)[] {\n\t\tconst handles = EventEmitter.updateInProps(this, list, custom);\n\t\treturn this.updateHandles(handles);\n\t}\n}\n","export const ScopeSlot = 'Neep:ScopeSlot';\nexport const SlotRender = 'Neep:SlotRender';\nexport const Slot = 'Neep:Slot';\nexport const Value = 'Neep:Value';\nexport const Container = 'Neep:Container';\nexport const Deliver = 'Neep:Deliver';\nexport const Template = 'template';\nexport const Fragment = Template;\n","import NeepError from '../Error';\nimport { Entity } from '../type';\n\n/** 当前正在执行的对象 */\nexport let current: Entity | undefined;\nexport function setCurrent<T>(\n\tfn: () => T,\n\tentity: Entity,\n): T {\n\tconst oldEntity = current;\n\tcurrent = entity;\n\ttry {\n\t\tcurrent.$_valueIndex = 0;\n\t\tcurrent.$_serviceIndex = 0;\n\t\tconst ret = fn();\n\t\tif (current.$_valueIndex !== current.$_values.length) {\n\t\t\tthrow new NeepError(\n\t\t\t\t'Inconsistent number of useValue executions',\n\t\t\t\t'life',\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tcurrent.$_serviceIndex &&\n\t\t\tcurrent.$_serviceIndex !== current.$_services.length) {\n\t\t\tthrow new NeepError(\n\t\t\t\t'Inconsistent number of useService executions',\n\t\t\t\t'life',\n\t\t\t);\n\t\t}\n\t\treturn ret;\n\t} finally {\n\t\tcurrent = oldEntity;\n\t}\n}\n\nexport function checkCurrent(\n\tname: string,\n\tinitOnly = false,\n): Entity {\n\tif (!current) {\n\t\tthrow new NeepError(\n\t\t\t`Function \\`${ name }\\` can only be called within a cycle.`,\n\t\t\t'life',\n\t\t);\n\t}\n\tif (!initOnly) {\n\t\treturn current;\n\t}\n\tif (!current.created) {\n\t\treturn current;\n\t}\n\tthrow new NeepError(\n\t\t`Function \\`${ name }\\` can only be called at initialization time.`,\n\t\t'life',\n\t);\n}\n","import { Context, ContextConstructor, Entity } from '../type';\nimport { safeify } from '../install';\n\nconst constructors: ContextConstructor[] = [];\nexport function initContext(\n\tcontext: Context,\n\tentity?: Entity,\n): Context {\n\tfor (const constructor of constructors) {\n\t\tconstructor(context, entity);\n\t}\n\treturn context;\n}\nexport function addContextConstructor(\n\tconstructor: ContextConstructor,\n): void {\n\tconstructors.push(safeify(constructor));\n}\n","import { Entity, EntityConstructor } from '../type';\nimport { safeify } from '../install';\n\nconst constructors: EntityConstructor[] = [];\nexport function initEntity(\n\tentity: Entity,\n): Entity {\n\tfor (const constructor of constructors) {\n\t\tconstructor(entity);\n\t}\n\treturn entity;\n}\nexport function addEntityConstructor(\n\tconstructor: EntityConstructor,\n): void {\n\tconstructors.push(safeify(constructor));\n}\n","import EntityObject from '../entity/EntityObject';\n\nlet delayedRefresh = 0;\nconst objectSet = new Set<EntityObject>();\nexport function wait(obj: EntityObject): boolean {\n\tif (delayedRefresh <= 0) { return false; }\n\tobjectSet.add(obj);\n\treturn true;\n}\nfunction run(): void {\n\tif (delayedRefresh > 0) { return; }\n\tconst list = [...objectSet];\n\tobjectSet.clear();\n\tlist.forEach(o => o.refresh());\n}\nasync function asyncRefresh<T>(f: () => PromiseLike<T> | T): Promise<T> {\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn await f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\nexport default function refresh<T>(f: () => T, async?: false): T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync: true,\n): Promise<T>;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T {\n\tif (async) { return asyncRefresh(f); }\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\n","import { safeify } from './install';\nimport { Hook, Hooks, Entity } from './type';\nconst hooks: Record<string, Set<Hook>> = Object.create(null);\n\nexport function setHook<H extends Hooks>(\n\tid: H,\n\thook: Hook,\n\tentity?: Entity,\n): () => void;\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n): () => void;\n\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n): () => void {\n\tlet list = entity?.$_hooks || hooks;\n\tif (!list) { return () => {}; }\n\thook = safeify(hook);\n\tlet set = list[id];\n\tif (!set) {\n\t\tset = new Set();\n\t\tlist[id] = set;\n\t}\n\tset.add(hook);\n\treturn () => set.delete(hook);\n}\n\nexport function callHook<H extends Hooks>(\n\tid: H,\n\texposed: Entity,\n): void;\nexport function callHook(id: string, exposed: Entity): void;\nexport function callHook(id: string, exposed: Entity): void {\n\tif (!exposed) { return; }\n\tfor (const hook of exposed.$_hooks[id] || []) {\n\t\thook(exposed);\n\t}\n\tfor (const hook of hooks[id] || []) {\n\t\thook(exposed);\n\t}\n}\n","/**********************************\n * 组件上下文环境专用 API\n * @description 简单组件不支持\n **********************************/\nimport { Value, WatchCallback } from 'monitorable';\nimport { Hooks, Service } from '../type';\nimport { checkCurrent } from '../extends';\nimport NeepError from '../Error';\nimport { setHook } from '../hook';\nimport { isValue, value, computed } from './state';\n\n\n/**********************************\n * 状态管理类 API\n **********************************/\n/**\n * 监听指定值的变化\n * @description 本质是调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 被监听的值\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: Value<T>,\n\tcb: WatchCallback<T>,\n): () => void;\n/**\n * 监听指定值的变化\n * @description 本质是创建调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 用于计算观测值的函数\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: () => T,\n\tcb: (v: T, stopped: boolean) => void,\n): () => void;\n\nexport function watch<T>(\n\tvalue: Value<T> | (() => T),\n\tcb: (v: Value<T> | T, stopped: boolean) => void,\n): () => void {\n\tconst entity = checkCurrent('watch');\n\tif (typeof value !== 'function') { return () => {}; }\n\tconst stop = isValue(value)\n\t\t? value.watch(cb)\n\t\t: computed(value).watch((v, s) => cb(v(), s));\n\tsetHook('beforeDestroy', () => stop(), entity);\n\treturn stop;\n}\n\nexport function useValue(): Value<any>;\nexport function useValue<T>(fn: () => T): T;\nexport function useValue<T>(fn?: () => T): T | Value<any>;\nexport function useValue<T>(fn?: () => T): T | Value<any> {\n\tconst entity = checkCurrent('useValue');\n\tconst index = entity.$_valueIndex++;\n\tconst values = entity.$_values;\n\tif (!entity.created) {\n\t\tvalues[index] = undefined;\n\t\tconst v = typeof fn === 'function' ? fn() : value(undefined);\n\t\treturn values[index] = v;\n\t}\n\tif (index >= values.length) {\n\t\tthrow new NeepError(\n\t\t\t'Inconsistent number of useValue executions',\n\t\t\t'life',\n\t\t);\n\t}\n\treturn values[index];\n\n}\n\n/**********************************\n * 服务 API\n **********************************/\nexport function useService<T, P extends any[]>(\n\tfn: Service<T, P>,\n\t...p: P\n): T {\n\tconst entity = checkCurrent('useService');\n\tconst index = entity.$_serviceIndex++;\n\tconst services = entity.$_services;\n\tif (!entity.created) {\n\t\tservices[index] = undefined;\n\t\tconst v = fn(entity, ...p);\n\t\tservices[index] = v;\n\t\treturn v;\n\t}\n\tif (index >= services.length) {\n\t\tthrow new NeepError(\n\t\t\t'Inconsistent number of useService executions',\n\t\t\t'life',\n\t\t);\n\t}\n\treturn services[index];\n}\n\nexport function byService<T, P extends any[]>(\n\tfn: Service<T, P>,\n\t...p: P\n): T {\n\tconst entity = checkCurrent('byService');\n\treturn fn(entity, ...p);\n}\n\n\n/**********************************\n * 钩子类 API\n **********************************/\n/**\n * 为当前组件注册钩子\n * @param name 钩子名称\n * @param hook 钩子\n * @param initOnly 是否仅在初始化时有效\n */\nexport function hook<H extends Hooks>(\n\tname: H,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void) {\n\tconst entity = checkCurrent('setHook');\n\tif (initOnly && entity.created) { return undefined; }\n\treturn setHook(name, () => hook(), entity);\n}\n\n/**********************************\n * 配置 API\n **********************************/\n\nfunction setValue<T>(\n\tobj: any,\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tif (\n\t\ttypeof name === 'string'\n\t\t&& ['$', '_'].includes(name[0])\n\t) {\n\t\treturn;\n\t}\n\tif (isValue(value) && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget() { return value(); },\n\t\t\tset(v) { value(v); },\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tif (typeof value === 'function' && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget: value as () => T,\n\t\t\tset: typeof opt === 'function' ? opt : undefined,\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tReflect.defineProperty(obj, name, {\n\t\tget() { return value; },\n\t\tconfigurable: true,\n\t\tenumerable: true,\n\t});\n}\n\n\n/**\n * 将 Value 导出\n * @param name 导出用的名称\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: Value<T>,\n\tmix?: boolean,\n): void;\n/**\n * 将普通值导出\n * @param name\n * @param value\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T,\n): void;\n/**\n * 设置基于 getter 的导出\n * @param name\n * @param getter\n * @param nonModifiable\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tnonModifiable: true,\n): void;\n/**\n * 设置基于 getter/setter 的导出\n * @param name\n * @param getter\n * @param setter\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n): void;\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tsetValue(checkCurrent('expose', true).exposed, name, value, opt);\n}\n\n\n/**\n * 将 Value 传递给子组件\n * @param name 导出用的名称\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: Value<T>,\n\tmix?: boolean,\n): void;\n/**\n * 将普通值导出\n * @param name\n * @param value\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: T,\n): void;\n/**\n * 设置基于 getter 的传递\n * @param name\n * @param getter\n * @param nonModifiable\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tnonModifiable: true,\n): void;\n/**\n * 设置基于 getter/setter 的传递\n * @param name\n * @param getter\n * @param setter\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n): void;\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tsetValue(checkCurrent('deliver', true).delivered, name, value, opt);\n}\n","export const isElementSymbol = Symbol.for('------isNeepElement------');\nexport const typeSymbol = Symbol.for('type');\nexport const nameSymbol = Symbol.for('name');\nexport const renderSymbol = Symbol.for('render');\nexport const componentsSymbol = Symbol.for('components');\nexport const configSymbol = Symbol.for('config');\n","import { Tag, NeepElement, ElementIteratorOptions } from '../type';\nimport { isElementSymbol, typeSymbol } from '../symbols';\nimport { Value, Template, ScopeSlot } from './tags';\n\n/**\n * 判读是否为元素\n */\nexport function isElement(v: any): v is NeepElement {\n\tif (!v) { return false; }\n\tif (typeof v !== 'object') { return false; }\n\treturn v[isElementSymbol] === true;\n}\n\nexport function createElement(\n\ttag: Tag,\n\tattrs?: {[key: string]: any},\n\t...children: any[]\n): NeepElement {\n\tattrs = attrs ? {...attrs} : {};\n\tconst node: NeepElement = {\n\t\t[isElementSymbol]: true,\n\t\ttag,\n\t\tkey: undefined,\n\t\tprops: attrs,\n\t\tchildren,\n\t};\n\tif ('n:key' in attrs) { node.key = attrs.key; }\n\telse if ('n-key' in attrs) { node.key = attrs.key; }\n\tif ('slot' in attrs) { node.slot = attrs.slot; }\n\tif (typeof attrs['n:ref'] === 'function') {\n\t\tnode.ref = attrs['n:ref'];\n\t} else if (typeof attrs['n-ref'] === 'function') {\n\t\tnode.ref = attrs['n-ref'];\n\t} else if (typeof attrs.ref === 'function') {\n\t\tnode.ref = attrs.ref;\n\t}\n\tif (tag === Value) {\n\t\tnode.value = attrs.value;\n\t}\n\treturn node;\n}\n\n\nexport function elements(\n\tnode: any,\n\topt: ElementIteratorOptions = {},\n): any[] {\n\tif (Array.isArray(node)) {\n\t\tconst list: any[][] = [];\n\t\tfor (let n of node) {\n\t\t\tlist.push(elements(n, opt));\n\t\t}\n\t\treturn ([] as any[]).concat(...list);\n\t}\n\tif (!isElement(node)) { return [node]; }\n\tlet { tag } = node;\n\tif (!tag) { return [node]; }\n\n\tif (([Template, ScopeSlot] as Tag[]).includes(tag)) {\n\t\treturn elements(node.children, opt);\n\t}\n\tif (typeof tag !== 'function') { return [node]; }\n\tif (tag[typeSymbol] !== 'simple') { return [node]; }\n\tconst { simple = true } = opt;\n\tif (!simple) { return [node]; }\n\tif (Array.isArray(simple)) {\n\t\tif (simple.includes(tag)) { return [node]; }\n\t} else if (typeof simple === 'function') {\n\t\tif (!simple(tag)) { return [node]; }\n\t}\n\treturn elements(node.children, opt);\n}\n\nexport function equalProps(a?: any, b?: any): boolean {\n\tif (a === b) { return true; }\n\tif (!a) { return false; }\n\tif (!b) { return false; }\n\tif (typeof a !== 'object') { return false; }\n\tif (typeof b !== 'object') { return false; }\n\tconst aKeys = new Set(Reflect.ownKeys(a));\n\tconst bKeys = Reflect.ownKeys(b);\n\tif (aKeys.size !== bKeys.length) { return false; }\n\tfor (const k of bKeys) {\n\t\tif (!aKeys.has(k)) { return false; }\n\t\tif (a[k] !== b[k]) { return false; }\n\t}\n\treturn true;\n}\nexport function equal(a: any, b: any): boolean {\n\tif (typeof a !== typeof b) { return false; }\n\tif (a === b) { return true; }\n\tif (typeof a === 'function') { return false; }\n\tif (!a) { return false; }\n\tif (!b) { return false; }\n\tif (Array.isArray(a)) {\n\t\tif (!Array.isArray(b)) { return false; }\n\t\tif (a.length !== b.length) { return false; }\n\t\tfor (let i = a.length - 1; i >= 0; i--) {\n\t\t\tif (!equal(a[i], b[i])) { return false; }\n\t\t}\n\t\treturn true;\n\t}\n\tif (Array.isArray(b)) {\n\t\treturn false;\n\t}\n\tif (!isElement(a)) { return false; }\n\tif (!isElement(b)) { return false; }\n\tif (a.tag !== b.tag) { return false; }\n\tif (a.execed !== b.execed) { return false; }\n\tif (a.inserted !== b.inserted) { return false; }\n\tif (a.ref !== b.ref) { return false; }\n\tif (a.value !== b.value) { return false; }\n\tif (a.key !== b.key) { return false; }\n\tif (a.slot !== b.slot) { return false; }\n\treturn equalProps(a.props, b.props)\n\t\t&& equal(a.children, b.children);\n}\n","let label: [string, string] | undefined;\nexport function setLabel(l: [string, string]): void {\n\tlabel = l;\n}\n\nexport function getLabel(): typeof label {\n\tconst l = label;\n\tlabel = undefined;\n\treturn l;\n}\n","import { isProduction } from '../constant';\nimport { current } from '../extends';\nimport { setLabel } from '../extends/label';\n\nexport function label(text: string, color = ''): void {\n\tif (!isProduction) {\n\t\tif (!current) {\n\t\t\tsetLabel([text, color]);\n\t\t\treturn;\n\t\t}\n\t\tReflect.defineProperty(current.exposed, '$label', {\n\t\t\tvalue: [text, color],\n\t\t\tconfigurable: true,\n\t\t});\n\t}\n}\n","import { NativeNode, MountedNode } from '../type';\nimport { isProduction } from '../constant';\n\nlet ids = 0;\nconst Nodes: {[key: number]: MountedNode} = {};\nlet IdMap: undefined | Map<NativeNode, number>;\nif (!isProduction) {\n\tIdMap = new Map();\n}\nexport function createMountedNode(\n\tn: Omit<MountedNode, 'id'>,\n\tid?: number,\n): MountedNode {\n\tif (!isProduction) {\n\t\tid = id || ++ids;\n\t\tconst { node } = n;\n\t\tif (node && IdMap) { IdMap.set(node, id); }\n\t\treturn Nodes[id] = {...n, id};\n\t}\n\treturn {...n, id: 0};\n}\n\nexport function recoveryMountedNode(node: MountedNode): void {\n\tif (!isProduction) {\n\t\tdelete Nodes[node.id];\n\t}\n}\n\nexport function getNode(\n\tid: number | NativeNode,\n): MountedNode | undefined {\n\tif (!isProduction) {\n\t\tif (typeof id !== 'number') {\n\t\t\tid = IdMap?.get(id) || -1;\n\t\t}\n\t\treturn Nodes[id];\n\t}\n\treturn undefined;\n}\n","export interface RecursiveArray<T> extends Array<RecursiveItem<T>>{}\nexport type RecursiveItem<T> = T | RecursiveArray<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield *recursive2iterable(it);\n\t}\n}\n","import { IRender, NativeNode, Exposed, Ref, MountedNode } from '../../type';\nimport { recoveryMountedNode } from '../id';\n\nlet refList: (() => void)[] | undefined;\nexport function setRefList(list?: (() => void)[]): void {\n\trefList = list;\n}\nexport function setRef(\n\tref?: Ref,\n\tnode?: Exposed | NativeNode,\n\tisRemove?: boolean,\n): void {\n\tif (typeof ref !== 'function') { return; }\n\tif (!node) { return; }\n\tif (!refList) {\n\t\tref(node, isRemove);\n\t} else {\n\t\trefList.push(() => ref(node, isRemove));\n\t}\n}\n\ntype MountedNodes = MountedNode | MountedNode[]\n| (MountedNode | MountedNode[])[];\n\n\nexport function *getNodes(tree: MountedNodes): Iterable<NativeNode> {\n\tif (Array.isArray(tree)) {\n\t\tfor (const it of tree) {\n\t\t\tyield *getNodes(it);\n\t\t}\n\t\treturn;\n\t}\n\tconst { children, node, component } = tree;\n\tif (node) {\n\t\tyield node;\n\t\treturn;\n\t}\n\tif (component) {\n\t\tyield *getNodes(component.tree);\n\t\treturn;\n\t}\n\tyield *getNodes(children);\n}\n\nexport function unmount(iRender: IRender, tree: MountedNodes): void {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(e => unmount(iRender, e));\n\t\treturn;\n\t}\n\tconst { component, children, node, ref } = tree;\n\trecoveryMountedNode(tree);\n\tif (component) {\n\t\tsetRef(ref, component.exposed, true);\n\t\tcomponent.unmount();\n\t\treturn;\n\t}\n\tif (node) {\n\t\tsetRef(ref, node, true);\n\t\tiRender.removeNode(node);\n\t}\n\tunmount(iRender, children);\n}\n","import { isValue } from '../../auxiliary';\nimport { IRender, NativeNode, MountedNode, TreeNode } from '../../type';\nimport { createMountedNode } from '../id';\nimport { setRef, getNodes } from './utils';\n\nexport function createValue(\n\tiRender: IRender,\n\tsource: TreeNode,\n\tvalue: any,\n): MountedNode {\n\tlet { ref } = source;\n\tif (iRender.isNode(value)) {\n\t\tsetRef(ref, value);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tvalue,\n\t\t\tnode: value,\n\t\t\tchildren: [],\n\t\t\tcomponent: undefined,\n\t\t});\n\t}\n\tconst type = typeof value;\n\tlet node: NativeNode | undefined;\n\tif (\n\t\ttype === 'bigint'\n\t\t|| type === 'boolean'\n\t\t|| type === 'number'\n\t\t|| type === 'string'\n\t\t|| type === 'symbol'\n\t\t|| value instanceof RegExp\n\t) {\n\t\tnode = iRender.createText(String(value));\n\t} else if (value instanceof Date) {\n\t\tnode = iRender.createText(value.toISOString());\n\t} else if (type === 'object' && value) {\n\t\tnode = iRender.createText(String(value));\n\t\t// TODO: 对象处理\n\t}\n\tif (!node) { node = iRender.createPlaceholder(); }\n\tsetRef(ref, node);\n\treturn createMountedNode({\n\t\t...source,\n\t\tvalue,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t});\n}\n\nexport function createAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (!source.length) {\n\t\treturn [createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode: iRender.createPlaceholder(),\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t})];\n\t}\n\n\treturn source.map(item =>\n\t\tArray.isArray(item)\n\t\t\t? createList(iRender, item)\n\t\t\t: createItem(iRender, item));\n}\n\nexport function createList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n): MountedNode[] {\n\tif (source.length) {\n\t\treturn source.map(it => createItem(iRender, it));\n\t}\n\treturn [createMountedNode({\n\t\ttag: null,\n\t\tnode: iRender.createPlaceholder(),\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t})];\n}\n\nexport function createItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n): MountedNode {\n\tconst { tag, ref, component } = source;\n\tif (!tag) {\n\t\tconst node = iRender.createPlaceholder();\n\t\tsetRef(ref, node);\n\t\treturn createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t});\n\t}\n\n\tconst ltag = typeof tag !== 'string' ? '' : tag.toLowerCase();\n\tif (typeof tag !== 'string' || ltag === 'neep:container') {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: createAll(iRender, source.children),\n\t\t\t});\n\t\t}\n\t\tcomponent.mount();\n\t\tsetRef(ref, component.exposed);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent, children: [],\n\t\t});\n\t}\n\tif (ltag === 'neep:value') {\n\t\tlet {value} = source;\n\t\tif (isValue(value)) { value = value(); }\n\t\treturn createValue(iRender, source, value);\n\t}\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: createAll(iRender, source.children),\n\t\t});\n\t}\n\tconst node = iRender.createElement(tag, source.props || {});\n\tsetRef(ref, node);\n\tlet children: (MountedNode | MountedNode[])[] = [];\n\tif (source.children?.length) {\n\t\tchildren = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insertNode(node, it);\n\t\t}\n\t}\n\treturn createMountedNode({\n\t\t...source,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren,\n\t});\n}\n","import { isValue } from '../../auxiliary';\nimport { IRender, NativeNode, NativeElement, MountedNode, TreeNode } from '../../type';\nimport { createMountedNode } from '../id';\nimport { createItem, createAll, createValue, createList } from './create';\nimport { getNodes, unmount, setRef } from './utils';\n\n\ntype MountedNodes = MountedNode | MountedNode[]\n| (MountedNode | MountedNode[])[];\n\nfunction getLastNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) {\n\t\treturn getLastNode(tree[tree.length - 1]);\n\t}\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getLastNode(component.tree); }\n\treturn getLastNode(children);\n}\n\nfunction getFirstNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) { return getFirstNode(tree[0]); }\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getFirstNode(component.tree); }\n\treturn getFirstNode(children[0]);\n}\n\nfunction replace<T extends MountedNode | MountedNode[]>(\n\tiRender: IRender,\n\tnewTree: T,\n\toldTree: MountedNode | MountedNode[],\n): T {\n\tconst next = getFirstNode(oldTree);\n\tif (!next) { return newTree; }\n\tconst parent = iRender.getParent(next);\n\tif (!parent) { return newTree; }\n\tfor (const it of getNodes(newTree)) {\n\t\tiRender.insertNode(parent, it, next);\n\t}\n\tunmount(iRender, oldTree);\n\treturn newTree;\n}\n\nfunction updateList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n\ttree: MountedNode | MountedNode[],\n): MountedNode[] {\n\tif (!source.length) {\n\t\tconst node = createItem(iRender, {tag: null, children: []});\n\t\treturn [replace(iRender, node, tree)];\n\t}\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: MountedNode[] = [];\n\tconst list = [...tree];\n\tconst mountedMap = new Map<MountedNode, MountedNode>();\n\tfor (const src of source) {\n\t\tconst index = list.findIndex(it =>\n\t\t\tit.tag === src.tag && it.key === src.key);\n\t\tif (index >= 0) {\n\t\t\tconst old = list[index];\n\t\t\tconst item = updateItem(iRender, src, old);\n\t\t\tmountedMap.set(old, item);\n\t\t\tnewList.push(item);\n\t\t\tlist.splice(index, 1);\n\t\t} else {\n\t\t\tconst item = createItem(iRender, src);\n\t\t\tnewList.push(item);\n\t\t}\n\t}\n\tif (!mountedMap.size) {\n\t\treturn replace(iRender, newList, list);\n\t}\n\tunmount(iRender, list);\n\ttree = tree.filter(t => mountedMap.has(t));\n\tconst last = getLastNode(tree[tree.length - 1]);\n\tconst parent = iRender.getParent(last);\n\tif (!parent) { return newList; }\n\tlet next = iRender.nextNode(last);\n\t// 调整次序\n\tfor (let i = newList.length - 1; i >= 0; i--) {\n\t\tconst item = newList[i];\n\t\tconst index = tree.findIndex(o => mountedMap.get(o) === item);\n\t\tif (index >= 0) {\n\t\t\tfor (const it of tree.splice(index)) {\n\t\t\t\tmountedMap.delete(it);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insertNode(parent, it, next);\n\t\t\t}\n\t\t}\n\t\tnext = getFirstNode(item) || next;\n\t}\n\treturn newList;\n}\n/**\n * 更新树\n * @param tree 已有树\n * @param source 用于替换的源\n * @param iRender Neep 对象\n */\nexport function updateAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tlet index = 0;\n\tlet length = Math.min(source.length, source.length || 1);\n\tconst list: (MountedNode | MountedNode[])[] = [];\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tlist.push(updateList(iRender, src, tree[index]));\n\t\t} else {\n\t\t\tlist.push(updateItem(iRender, src, tree[index]));\n\t\t}\n\t}\n\tlength = Math.max(source.length, tree.length);\n\tif (tree.length > length) {\n\t\t// 销毁多余项\n\t\tfor (; index < length; index++) {\n\t\t\tunmount(iRender, tree[index]);\n\t\t}\n\t}\n\tif (source.length > length) {\n\t\t// 创建多余项\n\t\tconst last = getLastNode(list[list.length - 1]);\n\t\tconst parent = iRender.getParent(last);\n\t\tconst next = iRender.nextNode(last);\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = source[index];\n\t\t\tconst item = Array.isArray(src)\n\t\t\t\t? createList(iRender, src)\n\t\t\t\t: createItem(iRender, src);\n\t\t\tlist.push(item);\n\t\t\tif (!parent) { continue; }\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insertNode(parent, it, next);\n\t\t\t}\n\t\t}\n\t}\n\treturn list;\n}\n\n/**\n * 更新树节点\n * @param iRender Neep 对象\n * @param tree 已有树\n * @param source 用于替换的源\n */\nfunction updateItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n\ttree: MountedNode | MountedNode[],\n): MountedNode {\n\tif (Array.isArray(tree)) {\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === source.tag && it.component === source.component);\n\t\tif (index < 0) {\n\t\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tunmount(iRender, all);\n\t}\n\tconst { tag, component } = source;\n\tconst ref = source.ref !== tree.ref && source.ref || undefined;\n\tif (tag !== tree.tag || component !== tree.component) {\n\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t}\n\tif (!tag) { return tree; }\n\tconst ltag = typeof tag !== 'string' ? '' : tag.toLowerCase();\n\tif (typeof tag !== 'string' || ltag === 'neep:container') {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: updateAll(\n\t\t\t\t\tiRender,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t),\n\t\t\t}, tree.id);\n\t\t}\n\t\tsetRef(ref, component.exposed);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent,\n\t\t\tchildren: [],\n\t\t}, tree.id);\n\t}\n\tif (ltag === 'neep:value') {\n\t\tlet {value} = source;\n\t\tif (isValue(value)) { value = value(); }\n\t\tif (tree.value === value) {\n\t\t\tsetRef(ref, tree.node);\n\t\t\treturn createMountedNode({\n\t\t\t\t...tree,\n\t\t\t\t...source,\n\t\t\t\tvalue,\n\t\t\t\tchildren: [],\n\t\t\t}, tree.id);\n\t\t}\n\t\treturn replace(iRender, createValue(iRender, source, value), tree);\n\t}\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: updateAll(\n\t\t\t\tiRender,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t),\n\t\t}, tree.id);\n\t}\n\tconst { node } = tree;\n\tiRender.updateProps(\n\t\tnode as NativeElement,\n\t\tsource.props || {},\n\t);\n\tsetRef(ref, node);\n\tif (!source.children.length && !tree.children.length) {\n\t\treturn createMountedNode(\n\t\t\t{\n\t\t\t\t...tree,\n\t\t\t\t...source,\n\t\t\t\tchildren: [],\n\t\t\t},\n\t\t\ttree.id,\n\t\t);\n\t}\n\tif (!source.children.length && tree.children.length) {\n\t\tunmount(iRender, tree.children);\n\t}\n\tif (source.children.length && !tree.children.length) {\n\t\tconst children = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insertNode(node as NativeElement, it);\n\t\t}\n\t\treturn createMountedNode({\n\t\t\t...tree,\n\t\t\t...source,\n\t\t\tchildren,\n\t\t}, tree.id);\n\t}\n\treturn createMountedNode({\n\t\t...tree, ...source,\n\t\tchildren: updateAll(\n\t\t\tiRender,\n\t\t\tsource.children,\n\t\t\ttree.children,\n\t\t),\n\t}, tree.id);\n}\n","import { IRender, MountedNode, TreeNode } from '../../type';\nimport { updateAll } from './update';\nimport { createAll } from './create';\nexport { unmount, getNodes, setRefList } from './utils';\n\nexport default function draw(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree?: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (tree) {\n\t\treturn updateAll(iRender, source, tree);\n\t}\n\treturn createAll(iRender, source);\n}\n","import { NeepElement, SlotFn, Slots, IRender } from '../type';\nimport { isElement, SlotRender, ScopeSlot, equal, Template } from '../auxiliary';\nimport { isElementSymbol, typeSymbol } from '../symbols';\nimport { isProduction } from '../constant';\nimport { isValue } from '../install';\n\n/**\n * 获取槽元素\n * @param iRender 渲染函数\n * @param children 子代\n * @param slots 槽列表\n * @param native 是否为原生组件\n * @returns 原生节点\n */\nexport function getSlots(\n\tiRender: IRender,\n\tchildren: any[],\n\tslots: Record<string | symbol, any[]>,\n\tnative = false,\n): any[] {\n\t/** 原始对象 */\n\tconst nativeList: any[] = [];\n\tfor (const it of children) {\n\t\tif (Array.isArray(it)) {\n\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\tnativeList.push(getSlots(iRender, it, list, native));\n\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\tif (k in slots) {\n\t\t\t\t\tslots[k].push(list[k]);\n\t\t\t\t} else {\n\t\t\t\t\tslots[k] = [list[k]];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (isElement(it) && it.slot === undefined) {\n\t\t\tif (\n\t\t\t\ttypeof it.tag === 'function'\n\t\t\t\t&& it.tag[typeSymbol] === 'simple'\n\t\t\t\t&& it.execed\n\t\t\t\t|| it.tag === Template\n\t\t\t) {\n\t\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\t\tnativeList.push(getSlots(iRender, it.children, list, native));\n\t\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\t\tconst node = { ...it, children: list[k] };\n\t\t\t\t\tif (k in slots) {\n\t\t\t\t\t\tslots[k].push(node);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tslots[k] = [node];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif (native) {\n\t\t\tif (iRender.isNode(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!isElement(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (it.tag !== SlotRender && it.tag !== Template) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tconst slot = isElement(it) && it.slot || 'default';\n\t\tconst el = isElement(it) ? {\n\t\t\t...it, slot: undefined,\n\t\t\tprops: {...it.props, slot: undefined },\n\t\t} : it;\n\t\tif (slot in slots) {\n\t\t\tslots[slot].push(el);\n\t\t} else {\n\t\t\tslots[slot] = [el];\n\t\t}\n\t}\n\treturn nativeList;\n}\nfunction renderSlots(\n\tlist: any[],\n\t...props: any\n): any[] {\n\treturn list.map(it => {\n\t\tif (Array.isArray(it)) {\n\t\t\treturn renderSlots(it, ...props);\n\t\t}\n\t\tif (!isElement(it)) { return it; }\n\t\tif (it.tag !== SlotRender) {\n\t\t\treturn {\n\t\t\t\t...it,\n\t\t\t\tslot: undefined,\n\t\t\t} as NeepElement;\n\t\t}\n\t\tconst { children } = it;\n\t\tif (children?.length !== 1) { return children; }\n\t\tconst [ render ] = children;\n\t\tif (isValue(render) || typeof render !== 'function') { return children; }\n\t\treturn render(...props);\n\t});\n}\nfunction createSlots(\n\tname: string,\n\tlist: any[],\n): SlotFn {\n\tconst slot = (...props: any): NeepElement => ({\n\t\t[isElementSymbol]: true,\n\t\ttag: ScopeSlot,\n\t\tchildren: renderSlots(list, ...props),\n\t\tinserted: true,\n\t\tlabel: isProduction ? undefined : [`[${ name }]`, '#00F'],\n\t} as NeepElement);\n\tslot.children = list;\n\treturn slot;\n}\n/**\n * 将槽子代设置到槽列表上\n * @param children 槽子代\n * @param slots 槽对象\n */\nexport function setSlots(\n\tchildren: {[key: string]: any[]},\n\tslots: Slots = Object.create(null),\n\toldChildren?: {[key: string]: any[]},\n): Slots {\n\tfor (const k of Reflect.ownKeys(slots)) {\n\t\tif (k in children) { continue; }\n\t\tdelete slots[k as keyof Slots];\n\t}\n\tif (!oldChildren) {\n\t\tfor (const k of Reflect.ownKeys(children) as string[]) {\n\t\t\tslots[k] = createSlots(k, children[k]);\n\t\t}\n\t\treturn slots;\n\t}\n\tfor (const k of Reflect.ownKeys(children) as string[]) {\n\t\tconst list = children[k];\n\t\tif (equal(list, oldChildren[k])) { continue; }\n\t\tslots[k] = createSlots(k, list);\n\t}\n\treturn slots;\n}\n","import { isValue } from '../auxiliary';\nconst disabledKey = new Set([\n\t':', '@', '#', '*',\n\t'!', '%', '^', '~',\n\t'&', '=', '+', '.',\n\t'(', ')', '[', ']', '{', '}', '<', '>',\n]);\nfunction filter(k: string | number | symbol): boolean {\n\tif (typeof k !== 'string') { return true; }\n\tif (disabledKey.has(k[0])) { return false; }\n\tif (/^n[:-]/.test(k)) { return false; }\n\tif (/^on[:-]/.test(k)) { return false; }\n\treturn true;\n}\nexport function updateProps(\n\tobj: any,\n\tprops: any,\n\toldProps: any = {},\n\tdefine = false,\n\tisProps = false,\n): any {\n\tconst keys = Reflect.ownKeys(props);\n\tconst newKeys = new Set(isProps ? keys.filter(filter) : keys);\n\tfor (const k of Reflect.ownKeys(obj)) {\n\t\tif (!newKeys.has(k)) {\n\t\t\tdelete obj[k];\n\t\t}\n\t}\n\tif (!define) {\n\t\tfor (const k of newKeys) {\n\t\t\tobj[k] = props[k];\n\t\t}\n\t\treturn obj;\n\t}\n\tfor (const k of newKeys) {\n\t\tconst value = props[k];\n\t\tif (k in oldProps && oldProps[k] === value) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (isValue(value)) {\n\t\t\tReflect.defineProperty(obj, k, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget() { return value(); },\n\t\t\t\tset(v) { value(v); },\n\t\t\t});\n\t\t\tcontinue;\n\t\t}\n\t\tReflect.defineProperty(obj, k, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue,\n\t\t});\n\t}\n\treturn obj;\n}\n","import { Component } from './type';\n\nexport const components: Record<string, Component> = Object.create(null);\n\nexport function register(name: string, component: Component): void {\n\tcomponents[name] = component;\n}\n","import { NeepElement, Slots, Component } from '../../type';\nimport { isProduction } from '../../constant';\nimport { isElement, ScopeSlot, Slot, SlotRender } from '../../auxiliary';\nimport { components as globalComponents } from '../../register';\n\n\nfunction findComponent(\n\ttag: any,\n\tcomponents: Record<string, Component>[],\n): Component | string | null {\n\tif (!tag) { return null; }\n\tif (typeof tag !== 'string') { return tag; }\n\tif (tag === 'template') { return tag; }\n\tif (/^neep:.+/i.test(tag)) { return tag; }\n\tfor (const list of components) {\n\t\tconst component = list[tag];\n\t\tif (component) { return component; }\n\t}\n\treturn globalComponents[tag] || tag;\n}\n\nfunction getChildren(children: any[], args: any[]): any {\n\tif (children.length !== 1) { return children; }\n\tconst [fn] = children;\n\tif (typeof fn !== 'function') { return children; }\n\treturn fn(...args);\n}\n\nexport default function replaceNode(\n\tnode: any,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n\tisRoot: boolean,\n): any {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(n =>\n\t\t\treplaceNode( n, slots, components, native, isRoot));\n\t}\n\tif (!isElement(node)) { return node; }\n\tlet { children, props } = node;\n\tlet tag = findComponent(node.tag, components);\n\tif (tag === SlotRender && isRoot) {\n\t\treturn null;\n\t}\n\n\tif (tag === Slot) {\n\t\ttag = native ? 'slot' : ScopeSlot;\n\t}\n\tif (tag !== ScopeSlot ) {\n\t\treturn {\n\t\t\t...node,\n\t\t\ttag,\n\t\t\tchildren: replaceNode(\n\t\t\t\tchildren,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t\tisRoot,\n\t\t\t),\n\t\t} as NeepElement;\n\t}\n\tif (node.tag === ScopeSlot && node.inserted) {\n\t\treturn node;\n\t}\n\tconst args = props?.argv && [props.argv]\n\t\t|| Array.isArray(props?.args) && props?.args.length && props.args\n\t\t|| [{}];\n\tconst slotName = node.props?.name || 'default';\n\tconst slot = slots[slotName];\n\tif (typeof slot === 'function') {\n\t\treturn {\n\t\t\t...node,\n\t\t\t...slot(...args),\n\t\t} as NeepElement;\n\t}\n\n\tconst label: [string, string] | undefined = isProduction\n\t\t? undefined\n\t\t: [`[${ slotName }]`, '#00F'];\n\n\treturn {\n\t\t...node,\n\t\ttag: ScopeSlot,\n\t\tlabel,\n\t\tchildren: replaceNode(\n\t\t\tgetChildren(children, args),\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t\tfalse,\n\t\t),\n\t} as NeepElement;\n}\n","import {\n\tNeepElement, Exposed, Delivered,\n\tRender, NeepNode, Slots, Context, IRender, Component,\n} from '../../type';\nimport { typeSymbol, componentsSymbol } from '../../symbols';\nimport { isProduction } from '../../constant';\nimport { isElement, Deliver, Value, SlotRender } from '../../auxiliary';\nimport { renderSymbol, isElementSymbol } from '../../symbols';\nimport { getLabel } from '../../extends/label';\nimport ComponentEntity from '../ComponentEntity';\nimport EntityObject from '../EntityObject';\nimport { getSlots, setSlots } from '../slot';\nimport { initContext } from '../../extends/context';\nimport { updateProps } from '../props';\nimport EventEmitter from '../../EventEmitter';\nimport replaceNode from './replaceNode';\nimport { isValue } from '../../install';\n\n\nfunction getComponents(\n\t...components: (Record<string, Component> | undefined)[]\n): Record<string, Component>[] {\n\treturn components.filter(Boolean) as Record<string, Component>[];\n}\n\nfunction execSimple(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: NeepElement,\n\ttag: Component,\n\tcomponents: Record<string, Component>[],\n\tchildren: any[],\n): NeepElement {\n\tif (node.execed) { return node; }\n\tconst { iRender } = nObject;\n\tconst slotMap = Object.create(null);\n\tgetSlots(iRender, children, slotMap);\n\tconst slots = setSlots(slotMap);\n\tconst event = new EventEmitter();\n\tevent.updateInProps(node.props);\n\tconst props = {...node.props};\n\tconst context: Context = initContext({\n\t\tslots,\n\t\tcreated: false,\n\t\tparent: nObject.exposed,\n\t\tdelivered,\n\t\tchildren: new Set<Exposed>(),\n\t\tchildNodes: children,\n\t\trefresh(f) { nObject.refresh(f); },\n\t\temit: event.emit,\n\t});\n\tif (!isProduction) { getLabel(); }\n\tconst result = tag(props, context);\n\tlet label: [string, string] | undefined;\n\tif (!isProduction) { label = getLabel(); }\n\tconst nodes = init(\n\t\tnObject,\n\t\tdelivered,\n\t\trenderNode(\n\t\t\tnObject.iRender,\n\t\t\tresult,\n\t\t\tcontext,\n\t\t\ttag[renderSymbol],\n\t\t),\n\t\tslots,\n\t\tgetComponents(...components, tag[componentsSymbol]),\n\t\tfalse,\n\t) as NeepNode[];\n\n\n\treturn {\n\t\t...node,\n\t\ttag,\n\t\texeced: true,\n\t\tchildren: Array.isArray(nodes) ? nodes : [nodes],\n\t\tlabel,\n\t};\n}\n\n\nfunction getSlotRenderFn(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tchildren: any[],\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): null | Function {\n\tif (children.length !== 1) {\n\t\treturn null;\n\t}\n\tconst [renderFn] = children;\n\tif (isValue(renderFn) || typeof renderFn !== 'function') {\n\t\treturn null;\n\t}\n\tconst { slotRenderFnList } = nObject;\n\tconst fn = slotRenderFnList.get(renderFn);\n\tif (fn) { return fn; }\n\tconst newFn = function(this: any, ...p: any[]): any {\n\t\treturn init(\n\t\t\tnObject,\n\t\t\tdelivered,\n\t\t\trenderFn.call(this, ...p),\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t);\n\t};\n\tslotRenderFnList.set(renderFn, newFn);\n\treturn newFn;\n}\n\n\nfunction exec(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: any,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): any {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(n =>\n\t\t\texec(nObject, delivered, n, slots, components, native));\n\t}\n\tif (!isElement(node)) { return node; }\n\tlet { tag, children } = node;\n\tif (tag === Deliver) {\n\t\tconst props = { ...node.props };\n\t\tdelete props.ref;\n\t\tdelete props.slot;\n\t\tdelete props.key;\n\t\treturn {\n\t\t\t...node,\n\t\t\ttag,\n\t\t\tchildren: children.map(n => exec(\n\t\t\t\tnObject,\n\t\t\t\tupdateProps(\n\t\t\t\t\tObject.create(delivered),\n\t\t\t\t\tprops || {},\n\t\t\t\t\t{},\n\t\t\t\t\ttrue,\n\t\t\t\t),\n\t\t\t\tn,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t)),\n\t\t};\n\t}\n\tif (tag === SlotRender) {\n\t\tconst slotRenderFn = getSlotRenderFn(\n\t\t\tnObject,\n\t\t\tdelivered,\n\t\t\tchildren,\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t);\n\t\tif (slotRenderFn) {\n\t\t\treturn {\n\t\t\t\t...node,\n\t\t\t\tchildren: [slotRenderFn],\n\t\t\t} as NeepElement;\n\t\t}\n\t}\n\n\tif (typeof tag !== 'function' || tag[typeSymbol] !== 'simple') {\n\t\treturn { ...node, tag, children: children\n\t\t\t.map(n => exec(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tn,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t)) };\n\t}\n\n\treturn execSimple(\n\t\tnObject,\n\t\tdelivered,\n\t\tnode,\n\t\ttag,\n\t\tcomponents,\n\t\tchildren,\n\t);\n}\n\n\nfunction renderNode<R extends object = object>(\n\tiRender: IRender,\n\tnode: R | NeepNode | NeepNode[] | undefined | null,\n\tcontext: Context,\n\trender?: Render,\n): NeepNode[] {\n\tif (Array.isArray(node)) { return node; }\n\tif (isElement(node)) { return [node]; }\n\tif (node === undefined || node === null) {\n\t\treturn [{\n\t\t\t[isElementSymbol]: true,\n\t\t\ttag: null,\n\t\t\tkey: undefined,\n\t\t\tchildren: [],\n\t\t}];\n\t}\n\tif (!iRender.isNode(node)\n\t\t&& node && typeof node === 'object' && render\n\t) {\n\t\tnode = render(node, context);\n\t}\n\tif (isElement(node)) { return [node]; }\n\tif (node === undefined || node === null) {\n\t\treturn [{\n\t\t\t[isElementSymbol]: true,\n\t\t\ttag: null,\n\t\t\tkey: undefined,\n\t\t\tchildren: [],\n\t\t}];\n\t}\n\treturn [{\n\t\t[isElementSymbol]: true,\n\t\tkey: undefined,\n\t\ttag: Value,\n\t\tvalue: node,\n\t\tchildren: [],\n\t}];\n}\nexport function init(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: any,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): any {\n\treturn exec(\n\t\tnObject,\n\t\tdelivered,\n\t\treplaceNode(\n\t\t\tnode,\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t\ttrue,\n\t\t),\n\t\tslots,\n\t\tcomponents,\n\t\tnative,\n\t);\n}\n\n\nexport default function normalize(\n\tnObject: ComponentEntity,\n\tresult: any,\n): any {\n\tconst { component } = nObject;\n\treturn init(\n\t\tnObject,\n\t\tnObject.delivered,\n\t\trenderNode(\n\t\t\tnObject.iRender,\n\t\t\tresult,\n\t\t\tnObject.context,\n\t\t\tcomponent[renderSymbol],\n\t\t),\n\t\tnObject.slots,\n\t\tgetComponents(component[componentsSymbol]),\n\t\tBoolean(nObject.native),\n\t);\n}\n","import {\n\tExposed, Delivered,\n\tEntity,\n\tNativeComponent,\n\tHook, Hooks, NeepNode, IRender, Component, MountedNode, TreeNode,\n} from '../type';\nimport { callHook, setHook } from '../hook';\nimport ContainerEntity from './ContainerEntity';\nimport convert from './convert';\nimport { wait } from '../extends/refresh';\nimport { exec } from '../install';\nimport EventEmitter from '../EventEmitter';\nimport { initEntity } from '../extends/entity';\n\nfunction createExposed(obj: EntityObject): Exposed {\n\tconst cfg: { [K in Exclude<keyof Exposed, '$label'>]-?:\n\t\t{ configurable: true, value: Exposed[K] }\n\t\t| { configurable: true, get(): Exposed[K] }\n\t} = {\n\t\t$parent: { configurable: true, get: () => obj.parent?.exposed },\n\t\t$component: { configurable: true, value: null },\n\t\t$isContainer: { configurable: true, value: false },\n\t\t$created: { configurable: true, get: () => obj.created },\n\t\t$destroyed: { configurable: true, get: () => obj.destroyed },\n\t\t$mounted: { configurable: true, get: () => obj.mounted },\n\t\t$unmounted: { configurable: true, get: () => obj.unmounted },\n\t};\n\tconst exposed: Exposed = Object.create(null, cfg);\n\treturn exposed;\n}\n\nlet completeList: (() => void)[] | undefined;\nexport function setCompleteList(list?: (() => void)[]): void {\n\tcompleteList = list;\n}\nexport function complete(it: () => void): void {\n\tif (!completeList) {\n\t\tit();\n\t} else {\n\t\tcompleteList.push(it);\n\t}\n}\n\nfunction createEntity(obj: EntityObject): Entity {\n\tconst cfg: { [K in keyof Entity]-?:\n\t\t{ configurable: true, value: Entity[K], writable?: boolean }\n\t\t| { configurable: true, get(): Entity[K] }\n\t} = {\n\t\texposed: { configurable: true, get: () => obj.exposed },\n\t\tdelivered: { configurable: true, get: () => obj.delivered },\n\t\tparent: { configurable: true, get: () => obj.parent?.entity },\n\t\tcomponent: { configurable: true, value: null },\n\t\tisContainer: { configurable: true, value: false },\n\t\tcreated: { configurable: true, get: () => obj.created },\n\t\tdestroyed: { configurable: true, get: () => obj.destroyed },\n\t\tmounted: { configurable: true, get: () => obj.mounted },\n\t\tunmounted: { configurable: true, get: () => obj.unmounted },\n\t\t$_hooks: { configurable: true, value: Object.create(null) },\n\t\t$_valueIndex: { configurable: true, value: 0, writable: true },\n\t\t$_values: { configurable: true, value: [] },\n\t\t$_serviceIndex: { configurable: true, value: 0, writable: true },\n\t\t$_services: { configurable: true, value: [] },\n\t\tcallHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(h: string) { callHook(h, entity); },\n\t\t},\n\t\tsetHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(id: string, hook: Hook) {\n\t\t\t\treturn setHook(id, hook, entity);\n\t\t\t},\n\t\t},\n\t\trefresh: { configurable: true, value: obj.refresh.bind(obj) },\n\t\ton: { configurable: true, value: obj.on },\n\t\temit: { configurable: true, value: obj.emit },\n\t\tconfig: { configurable: true, value: obj.config },\n\t};\n\tconst entity: Entity = Object.create(null, cfg);\n\treturn initEntity(entity);\n}\n\nexport default class EntityObject {\n\treadonly slotRenderFnList = new WeakMap<Function, Function>();\n\treadonly events = new EventEmitter();\n\treadonly emit = this.events.emit;\n\treadonly on = this.events.on;\n\treadonly eventCancelHandles = new Set<() => void>();\n\treadonly iRender: IRender;\n\treadonly components: Record<string, Component> = Object.create(null);\n\treadonly config: Record<string, any> = Object.create(null);\n\t/** 接受到的呈递值 */\n\treadonly parentDelivered: Delivered;\n\t/** 向后代呈递的值 */\n\treadonly delivered: Delivered;\n\t/** 组件暴露值 */\n\treadonly exposed: Exposed = createExposed(this);\n\t/** 组件实体 */\n\treadonly entity: Entity = createEntity(this);\n\t/** 父组件 */\n\tparent?: EntityObject;\n\t/** 原生组件 */\n\tnative: NativeComponent | undefined;\n\t/** 状态 */\n\tcreated: boolean = false;\n\tdestroyed: boolean = false;\n\tmounted: boolean = false;\n\tunmounted: boolean = false;\n\t/**  子组件的暴露值 */\n\treadonly children: Set<Exposed> = new Set();\n\t/** The subtree mounted on the parent node */\n\ttree: (MountedNode | MountedNode[])[] = [];\n\treadonly container: ContainerEntity;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tparent?: EntityObject,\n\t\tdelivered: Delivered = parent?.delivered || Object.create(null),\n\t\tcontainer?: ContainerEntity,\n\t) {\n\t\tthis.iRender = iRender;\n\t\tthis.parentDelivered = delivered;\n\t\tthis.delivered = Object.create(delivered);\n\t\tif (parent) {\n\t\t\tthis.parent = parent;\n\t\t}\n\t\tthis.container = container || this as any as ContainerEntity;\n\t}\n\t/** 结果渲染函数 */\n\tprotected _render: () => NeepNode[] = () => [];\n\n\tget canRefresh(): boolean {\n\t\tif (wait(this)) { return false; }\n\t\treturn !this._delayedRefresh;\n\t}\n\tprotected get needRefresh(): boolean {\n\t\tif (wait(this)) { return false; }\n\t\tif (this._delayedRefresh) { return false; }\n\t\tconst needRefresh = this._needRefresh;\n\t\tthis._needRefresh = false;\n\t\treturn needRefresh;\n\t}\n\t/** 是否需要继续刷新 */\n\tprotected _needRefresh = false;\n\tprivate _delayedRefresh = 0;\n\t/** 是否为刷新中 */\n\tprivate _refreshing = false;\n\t/** 渲染结果 */\n\tprotected _nodes: (TreeNode | TreeNode[])[] = [];\n\tprotected requestDraw(): void { }\n\tasync asyncRefresh<T>(f: () => PromiseLike<T> | T): Promise<T> {\n\t\ttry {\n\t\t\tthis._delayedRefresh++;\n\t\t\treturn await f();\n\t\t} finally {\n\t\t\tthis._delayedRefresh--;\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\trefresh(): void;\n\trefresh<T>(f: () => T, async?: false): T;\n\trefresh<T>(f: () => PromiseLike<T> | T, async: true): Promise<T>;\n\trefresh<T>(\n\t\tf: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T;\n\trefresh<T>(\n\t\tf?: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T | undefined;\n\trefresh<T>(\n\t\tf?: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T | undefined {\n\t\tif (typeof f === 'function') {\n\t\t\tif (async) { return this.asyncRefresh(f); }\n\t\t\ttry {\n\t\t\t\tthis._delayedRefresh++;\n\t\t\t\treturn f();\n\t\t\t} finally {\n\t\t\t\tthis._delayedRefresh--;\n\t\t\t\tif (this._delayedRefresh <= 0) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.destroyed) { return; }\n\t\tthis._needRefresh = true;\n\t\tif (!this.created) { return; }\n\n\t\tif (this._refreshing) { return; }\n\t\tthis._refreshing = true;\n\n\t\tlet nodes: NeepNode[] | undefined;\n\t\twhile (this.needRefresh) {\n\t\t\tnodes = this._render();\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis._refreshing = false;\n\t\tif (!this.canRefresh) { return; }\n\t\tif (!nodes) { return; }\n\n\t\tthis._nodes = convert(this, nodes, this._nodes);\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis.requestDraw();\n\t}\n\tcallHook<H extends Hooks>(id: H): void;\n\tcallHook(id: string): void;\n\tcallHook(id: string): void {\n\t\tcallHook(id, this.entity);\n\t}\n\n\tchildNodes: any[] = [];\n\t/** 更新属性及子代 */\n\tprotected _update(props: object, children: any[]): void {\n\t\tthis.childNodes = children;\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: object, children: any[]): void {\n\t\tthis._update(props, children);\n\t}\n\n\n\tprivate __executed_destroy = false;\n\tprivate __executed_mount = false;\n\tprivate __executed_mounted = false;\n\tprotected _destroy(): void { }\n\tdestroy(): void {\n\t\tif (this.__executed_destroy) { return; }\n\t\tthis.__executed_destroy = true;\n\t\tthis.callHook('beforeDestroy');\n\t\tthis._destroy();\n\t\tthis.callHook('destroyed');\n\t\tthis.destroyed = true;\n\t}\n\tprotected _mount(): void { }\n\tmount(): void {\n\t\tif (this.__executed_destroy) { return; }\n\t\tif (this.__executed_mount) { return; }\n\t\tthis.__executed_mount = true;\n\t\tthis.callHook('beforeMount');\n\t\tconst result = exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => {\n\t\t\t\tthis._mount();\n\t\t\t\tthis.mounted = true;\n\t\t\t},\n\t\t);\n\t\tthis._cancelDrawMonitor = result.stop;\n\t\tcomplete(() => this.callHook('mounted'));\n\t}\n\tprotected _unmount(): void { }\n\tunmount(): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.__executed_mounted) { return; }\n\t\tthis.__executed_mounted = true;\n\t\tthis.callHook('beforeUnmount');\n\t\tthis._unmount();\n\t\tthis.callHook('unmounted');\n\t\tthis.unmounted = true;\n\t}\n\t_draw(): void {}\n\t_cancelDrawMonitor?: () => void;\n\tdraw(): void {\n\t\tif (this.__executed_destroy) { return; }\n\t\tif (this._cancelDrawMonitor) {\n\t\t\tthis._cancelDrawMonitor();\n\t\t}\n\t\tthis.callHook('beforeDraw');\n\t\tconst result = exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => this._draw(),\n\t\t);\n\t\tthis._cancelDrawMonitor = result.stop;\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n}\n","import {\n\tComponent,\n\tNeepNode,\n\tSlots,\n\tContext,\n\tDelivered,\n\tNativeShadow,\n\tTreeNode,\n\tMountedNode,\n} from '../type';\nimport {\n\ttypeSymbol,\n\tconfigSymbol,\n\tcomponentsSymbol,\n} from '../symbols';\nimport { exec, monitor, encase } from '../install';\nimport { setCurrent } from '../extends/current';\nimport convert, { destroy } from './convert';\nimport draw, { unmount, getNodes } from './draw';\nimport normalize from './normalize';\nimport { getSlots, setSlots } from './slot';\nimport EntityObject from './EntityObject';\nimport { initContext } from '../extends/context';\nimport { updateProps } from './props';\nimport { refresh } from '../extends';\n\nfunction update(\n\tnObject: ComponentEntity<any, any>,\n\tprops: any,\n\tchildren: any[],\n): void {\n\tupdateProps(nObject.props, props, {}, false, true);\n\tnObject.events.updateInProps(props);\n\tconst slots = Object.create(null);\n\tconst { native } = nObject;\n\tconst childNodes = getSlots(\n\t\tnObject.iRender,\n\t\tchildren,\n\t\tslots,\n\t\tBoolean(native),\n\t);\n\tsetSlots(slots, nObject.slots, nObject.lastSlots);\n\tnObject.lastSlots = slots;\n\tif (!native) { return; }\n\tnObject.nativeNodes\n\t\t= convert(nObject, childNodes, nObject.nativeNodes);\n\tif (!nObject.mounted) { return; }\n\tnObject.requestDraw();\n}\n\nfunction createContext<\n\tP extends object = object,\n\tR extends object = object\n>(nObject: ComponentEntity<P, R>): Context {\n\treturn initContext({\n\t\tslots: nObject.slots,\n\t\tget created() { return nObject.created; },\n\t\tget parent() { return nObject.parent.exposed; },\n\t\tget delivered() { return nObject.parentDelivered; },\n\t\tget children() { return nObject.children; },\n\t\tget childNodes() { return nObject.childNodes; },\n\t\tget emit() { return nObject.emit; },\n\t\trefresh(f) { nObject.refresh(f); },\n\t}, nObject.entity);\n}\n\n/** 初始化渲染 */\nfunction initRender<R extends object = object>(\n\tnObject: ComponentEntity<any, R>,\n): { render(): any, nodes: any, stopRender(): void } {\n\tconst {\n\t\tcomponent,\n\t\tprops,\n\t\tcontext,\n\t\tentity,\n\t} = nObject;\n\tfunction refresh(changed: boolean): void {\n\t\tif (!changed) { return; }\n\t\tnObject.refresh();\n\t}\n\t// 初始化执行\n\tconst result = exec(\n\t\trefresh,\n\t\t() => setCurrent(\n\t\t\t() => component(props, context),\n\t\t\tentity,\n\t\t),\n\t\t{ resultOnly: true },\n\t);\n\tif (typeof result === 'function') {\n\t\t// 响应式\n\t\tconst render = monitor(\n\t\t\trefresh,\n\t\t\t() => normalize(nObject, (result as () => NeepNode)()),\n\t\t);\n\t\treturn {\n\t\t\tnodes: render(),\n\t\t\trender,\n\t\t\tstopRender: () => render.stop(),\n\t\t};\n\t}\n\n\tconst render = monitor(\n\t\trefresh,\n\t\t() => normalize(nObject, setCurrent(\n\t\t\t() => component(props, context),\n\t\t\tentity,\n\t\t)),\n\t);\n\treturn {\n\t\tnodes: exec(\n\t\t\trefresh,\n\t\t\t() => normalize(nObject, result),\n\t\t\t{ resultOnly: true },\n\t\t),\n\t\trender,\n\t\tstopRender: () => render.stop(),\n\t};\n}\n\n\nexport default class ComponentEntity<\n\tP extends object = object,\n\tR extends object = object\n> extends EntityObject {\n\t/** 组件函数 */\n\treadonly component: Component<P, R>;\n\t/** 组件属性 */\n\treadonly props: P = encase(Object.create(null));\n\t/** 组件槽 */\n\treadonly slots: Slots = encase(Object.create(null));\n\tlastSlots: Record<string | symbol, any[]> | undefined;\n\t/** 结果渲染函数 */\n\tprivate readonly _stopRender: () => void;\n\t/** 原生子代 */\n\tnativeNodes: (TreeNode | TreeNode[])[] | undefined;\n\tshadowTree: (MountedNode | MountedNode[])[] = [];\n\tnativeTree: (MountedNode | MountedNode[])[] = [];\n\tprivate readonly _shadow: NativeShadow | undefined;\n\t/** 组件上下文 */\n\treadonly context: Context;\n\treadonly parent: EntityObject;\n\t/** 结果渲染函数 */\n\tconstructor(\n\t\tcomponent: Component<P, R>,\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: EntityObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(parent.iRender, parent, delivered, parent.container);\n\t\tthis.component = component;\n\t\tObject.assign(this.config, component[configSymbol]);\n\t\tObject.assign(this.components, component[componentsSymbol]);\n\t\tReflect.defineProperty(\n\t\t\tthis.exposed,\n\t\t\t'$component',\n\t\t\t{\n\t\t\t\tvalue: component,\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t},\n\t\t);\n\t\t// 原生组件\n\t\t[this.native, this._shadow] =\n\t\t\tcomponent[typeSymbol] === 'native' &&\n\t\t\tthis.iRender.createComponent?.() || [];\n\t\t// 父子关系\n\t\tthis.parent = parent;\n\t\tparent.children.add(this.exposed);\n\t\t// 上下文属性\n\t\tconst context = createContext(this);\n\t\tthis.context = context;\n\t\t// 初始化钩子\n\t\tthis.callHook('beforeCreate');\n\t\t// 更新属性\n\t\tthis.childNodes = children;\n\t\trefresh(() => update(this, props, children));\n\t\t// 获取渲染函数及初始渲染\n\t\tconst { render, nodes, stopRender } = initRender(this);\n\t\tthis._render = render;\n\t\tthis._stopRender = stopRender;\n\t\tthis._nodes = convert(this, nodes);\n\t\t// 初始化钩子\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t\tif (this._needRefresh) { this.refresh(); }\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\trefresh(() => update(this, props, children));\n\t}\n\t_destroy(): void {\n\t\tif (this._stopRender) {\n\t\t\tthis._stopRender();\n\t\t}\n\t\tthis.parent.children.delete(this.exposed);\n\t\tdestroy(this._nodes);\n\t}\n\n\t/** 刷新 */\n\trequestDraw(): void {\n\t\tthis.container.markDraw(this);\n\t}\n\t_draw(): void {\n\t\tconst {nativeNodes, iRender, _shadow, native} = this;\n\t\tif (!native || !nativeNodes || !_shadow) {\n\t\t\tthis.tree = draw(\n\t\t\t\tiRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.tree,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tthis.shadowTree = draw(\n\t\t\tiRender,\n\t\t\tthis._nodes,\n\t\t\tthis.shadowTree,\n\t\t);\n\t\tthis.nativeTree = draw(\n\t\t\tiRender,\n\t\t\tnativeNodes,\n\t\t\tthis.nativeTree,\n\t\t);\n\t}\n\t_mount(): void {\n\t\tconst {\n\t\t\tnativeNodes,\n\t\t\tiRender,\n\t\t\t_shadow,\n\t\t\tnative,\n\t\t\t_nodes,\n\t\t} = this;\n\t\tif (!native || !nativeNodes || !_shadow) {\n\t\t\tthis.tree = draw(iRender, _nodes);\n\t\t\treturn;\n\t\t}\n\t\tthis.tree = draw(iRender, convert(this, native));\n\t\tthis.shadowTree = draw(iRender, _nodes);\n\t\tfor (const it of getNodes(this.shadowTree)) {\n\t\t\tiRender.insertNode(_shadow, it);\n\t\t}\n\t\tthis.nativeTree = draw(iRender, nativeNodes);\n\t\tfor (const it of getNodes(this.nativeTree)) {\n\t\t\tiRender.insertNode(native, it);\n\t\t}\n\t}\n\t_unmount(): void {\n\t\tconst {iRender, nativeTree} = this;\n\t\tunmount(iRender, this.tree);\n\t\tif (!nativeTree) { return; }\n\t\tunmount(iRender, nativeTree);\n\t}\n}\n","import { NeepElement, TreeNode } from '../../type';\nimport { isElement } from '../../auxiliary';\nimport { isElementSymbol } from '../../symbols';\n\n/** 强制转换为 NeepElement */\nexport function toElement(t: any): null | NeepElement {\n\tif (t === false || t === null || t === undefined) {\n\t\treturn null;\n\t}\n\tif (isElement(t)) {\n\t\treturn t;\n\t}\n\treturn {\n\t\t[isElementSymbol]: true,\n\t\ttag: 'Neep:Value',\n\t\tkey: t,\n\t\tvalue: t,\n\t\tchildren: [],\n\t};\n}\n\nexport function destroy(\n\ttree: TreeNode | TreeNode[] | (TreeNode | TreeNode[])[],\n): void {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(t => destroy(t));\n\t\treturn;\n\t}\n\tconst { component } = tree;\n\tif (component) { component.destroy(); }\n}\n","import { NeepNode, TreeNode, Delivered } from '../../type';\nimport { getRender } from '../../install';\nimport { typeSymbol } from '../../symbols';\nimport { recursive2iterable } from '../recursive';\nimport EntityObject from '../EntityObject';\nimport ComponentEntity from '../ComponentEntity';\nimport ContainerEntity from '../ContainerEntity';\nimport { updateProps } from '../props';\nimport { toElement } from './utils';\n\nexport function createItem(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: NeepNode,\n): TreeNode {\n\tif (!source) { return {\n\t\ttag: null,\n\t\tkey: undefined,\n\t\tchildren: [],\n\t}; }\n\tconst { tag } = source;\n\tif (!tag) { return {\n\t\ttag: null,\n\t\tkey: undefined,\n\t\tchildren: [],\n\t}; }\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: createAll(\n\t\t\t\t\tnObject,\n\t\t\t\t\tdelivered,\n\t\t\t\t\tsource.children,\n\t\t\t\t),\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new ComponentEntity(\n\t\t\t\ttag,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t),\n\t\t};\n\t}\n\tconst ltag = tag.toLowerCase();\n\tif (ltag === 'neep:container') {\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new ContainerEntity(\n\t\t\t\tiRender,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t),\n\t\t};\n\t}\n\tif (ltag === 'neep:value') {\n\t\treturn { ...source, children: [] };\n\t}\n\tif (ltag === 'neep:deliver') {\n\t\tconst props = { ...source.props };\n\t\tdelete props.ref;\n\t\tdelete props.slot;\n\t\tdelete props.key;\n\t\tconst newDelivered = updateProps(\n\t\t\tObject.create(delivered),\n\t\t\tprops,\n\t\t\t{},\n\t\t\ttrue,\n\t\t);\n\t\treturn {\n\t\t\t...source,\n\t\t\tdelivered: newDelivered,\n\t\t\tchildren: createAll(\n\t\t\t\tnObject,\n\t\t\t\tnewDelivered,\n\t\t\t\tsource.children,\n\t\t\t),\n\t\t};\n\t}\n\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\treturn {\n\t\t\t...source,\n\t\t\tchildren: createAll(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tsource.children,\n\t\t\t),\n\t\t};\n\t}\n\treturn {\n\t\t...source,\n\t\tchildren: createAll(nObject, delivered, source.children),\n\t};\n}\n\nexport function createAll(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: any,\n): (TreeNode | TreeNode[])[] {\n\tif (!Array.isArray(source)) { source = [source]; }\n\tif (!source.length) { return []; }\n\treturn (source as any[]).map(item => {\n\t\tif (!Array.isArray(item)) {\n\t\t\treturn createItem(nObject, delivered, toElement(item));\n\t\t}\n\t\treturn [...recursive2iterable(item)]\n\t\t\t.map(it => createItem(nObject, delivered, toElement(it)));\n\t});\n}\n","import { NeepNode, TreeNode, Delivered } from '../../type';\nimport { getRender } from '../../install';\nimport { typeSymbol } from '../../symbols';\nimport { recursive2iterable } from '../recursive';\nimport EntityObject from '../EntityObject';\nimport { updateProps } from '../props';\nimport { toElement, destroy } from './utils';\nimport { createItem } from './create';\n\n/**\n * 更新树节点\n * @param nObject Neep 对象\n * @param source 用于替换的源\n * @param tree 已有树\n */\nfunction updateList(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: any[],\n\ttree: TreeNode | TreeNode[],\n): TreeNode[] {\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: TreeNode[] = [];\n\tfor (const src of recursive2iterable(source)) {\n\t\tconst node = toElement(src);\n\t\tif (!node) { continue; }\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === node.tag && it.key === node.key);\n\t\tif (index >= 0) {\n\t\t\tnewList.push(updateItem(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tnode,\n\t\t\t\ttree[index],\n\t\t\t));\n\t\t\ttree.splice(index, 1);\n\t\t} else {\n\t\t\tnewList.push(createItem(nObject, delivered, node));\n\t\t}\n\t}\n\tdestroy(tree);\n\treturn newList;\n}\n\n/**\n * 更新树节点\n * @param tree 已有树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n */\nfunction updateItem(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: NeepNode,\n\ttree?: TreeNode | TreeNode[],\n): TreeNode {\n\tif (!tree) {\n\t\treturn createItem(nObject, delivered, source);\n\t}\n\tif (!source) {\n\t\tdestroy(tree);\n\t\treturn { tag: null, key: undefined, children: [] };\n\t}\n\tif (Array.isArray(tree)) {\n\t\tif (!tree.length) {\n\t\t\treturn createItem(nObject, delivered, source);\n\t\t}\n\t\tconst index = tree.findIndex(it => it.tag === source.tag);\n\t\tif (index < 0) {\n\t\t\tdestroy(tree);\n\t\t\treturn createItem(nObject, delivered, source);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tdestroy(all);\n\t}\n\tconst { tag } = source;\n\tif (tag !== tree.tag) {\n\t\tdestroy(tree);\n\t\treturn createItem(nObject, delivered, source);\n\t}\n\tif (!tag) { return { tag: null, key: undefined, children: [] }; }\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: [...updateAll(\n\t\t\t\t\tnObject,\n\t\t\t\t\tdelivered,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t)],\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, delivered, source); }\n\t\tcomponent.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tconst ltag = tag.toLowerCase();\n\tif (ltag === 'neep:container') {\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, delivered, source); }\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\tif (iRender !== component.iRender) {\n\t\t\treturn createItem(nObject, delivered, source);\n\t\t}\n\t\tcomponent.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tif (ltag === 'neep:value') {\n\t\treturn { ...source, children: [] };\n\t}\n\tif (ltag === 'neep:deliver') {\n\t\tconst props = { ...source.props };\n\t\tdelete props.ref;\n\t\tdelete props.slot;\n\t\tdelete props.key;\n\t\tconst newDelivered = updateProps(\n\t\t\ttree.delivered || Object.create(delivered),\n\t\t\tprops,\n\t\t\ttree.props,\n\t\t\ttrue,\n\t\t);\n\t\treturn {\n\t\t\t...source,\n\t\t\tdelivered: newDelivered,\n\t\t\tchildren: [...updateAll(\n\t\t\t\tnObject,\n\t\t\t\tnewDelivered,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t)],\n\t\t};\n\t}\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\treturn {\n\t\t\t...source,\n\t\t\tchildren: [...updateAll(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t)],\n\t\t};\n\t}\n\treturn {\n\t\t...source,\n\t\tchildren: [...updateAll(nObject,\n\t\t\tdelivered,\n\t\t\tsource.children,\n\t\t\ttree.children)],\n\t};\n}\n\n\nexport function *updateAll(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: any,\n\ttree: (TreeNode | TreeNode[])[],\n): Iterable<TreeNode | TreeNode[]> {\n\tif (!Array.isArray(source)) { source = [source]; }\n\n\tlet index = 0;\n\tlet length = Math.min(source.length, source.length);\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tyield updateList(nObject, delivered, src, tree[index]);\n\t\t} else {\n\t\t\tyield updateItem(nObject, delivered, toElement(src), tree[index]);\n\t\t}\n\t}\n\tlength = Math.max(source.length, source.length);\n\tif (tree.length > length) {\n\t\t// 销毁多余项\n\t\tfor (; index < length; index++) {\n\t\t\tdestroy(tree[index]);\n\t\t}\n\t}\n\tif (source.length > length) {\n\t\t// 创建多余项\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = toElement(source[index]);\n\t\t\tif (Array.isArray(src)) {\n\t\t\t\tyield [...recursive2iterable(src)]\n\t\t\t\t\t.map(it => createItem(nObject, delivered, it));\n\t\t\t} else {\n\t\t\t\tyield createItem(nObject, delivered, src);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { TreeNode } from '../../type';\nimport EntityObject from '../EntityObject';\nimport { createAll } from './create';\nimport { updateAll } from './update';\n\nexport { destroy } from './utils';\n\n/**\n * 更新树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n * @param tree 已有树\n */\nfunction convert(\n\tnObject: EntityObject,\n\tsource: any,\n\ttree?: (TreeNode | TreeNode[])[],\n): (TreeNode | TreeNode[])[] {\n\tif (!tree) {\n\t\treturn createAll(nObject, nObject.delivered, source);\n\t}\n\treturn [...updateAll(nObject, nObject.delivered, source, tree)];\n}\n\n\nexport default convert;\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport {\n\tIRender,\n\tMountProps,\n\tNativeNode,\n\tNativeContainer,\n\tDelivered,\n\tMountedNode,\n} from '../type';\nimport { Value } from '../auxiliary';\nimport { createMountedNode } from './id';\nimport convert, { destroy } from './convert';\nimport draw, { unmount, getNodes, setRefList } from './draw';\nimport EntityObject, {\n\tsetCompleteList, complete,\n} from './EntityObject';\nimport { nextFrame, exec, monitor } from '../install';\nimport { init } from './normalize';\n\n\nlet awaitDraw = new Set<ContainerEntity>();\nlet requested = false;\nfunction markDraw(c: ContainerEntity): void {\n\tawaitDraw.add(c);\n\tif (requested) { return; }\n\trequested = true;\n\tnextFrame(() => {\n\t\trequested = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tlist.map(c => c.drawAll());\n\t});\n}\n\nexport default class ContainerEntity extends EntityObject {\n\tprops: MountProps;\n\t/** 组件树结构 */\n\tcontent: (MountedNode | MountedNode[])[] = [];\n\t_node: NativeNode | null = null;\n\t_container: NativeContainer | null = null;\n\treadonly rootContainer: ContainerEntity = this;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tprops: MountProps,\n\t\tchildren: any[],\n\t\tparent?: EntityObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(iRender, parent, delivered);\n\t\tthis.props = props;\n\t\tthis.parent = parent;\n\t\tif (parent) {\n\t\t\tthis.rootContainer = parent.container.rootContainer;\n\t\t}\n\t\tthis.callHook('beforeCreate');\n\t\tthis.childNodes = children;\n\n\t\tconst refresh = (changed: boolean): void => {\n\t\t\tif (!changed) { return; }\n\t\t\tthis._drawChildren = true;\n\t\t\tthis.refresh();\n\t\t};\n\t\tconst slots = Object.create(null);\n\n\t\tthis._render = monitor(\n\t\t\trefresh,\n\t\t\t() => init(\n\t\t\t\tthis,\n\t\t\t\tthis.delivered,\n\t\t\t\tthis.childNodes,\n\t\t\t\tslots,\n\t\t\t\t[],\n\t\t\t\tfalse,\n\t\t\t),\n\t\t);\n\t\tthis._nodes = convert(this, this._render());\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t}\n\t_drawChildren = false;\n\t_drawContainer = false;\n\tsetChildren(children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\tthis._drawChildren = true;\n\t\tthis.refresh();\n\t}\n\tsetProps(props: MountProps): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.props = props;\n\t\tthis._drawContainer = true;\n\t\tthis.refresh();\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: MountProps, children: any[]): void {\n\t\tthis.refresh(() => {\n\t\t\tthis.setProps(props);\n\t\t\tthis.setChildren(children);\n\t\t});\n\t}\n\trequestDraw(): void {\n\t\tthis.markDraw(this);\n\t}\n\t_mount(): void {\n\t\tconst { props, parent, iRender } = this;\n\t\tconst content = draw(this.container.iRender, this._nodes);\n\t\tthis.content = content;\n\t\tconst [container, node]\n\t\t\t= iRender.mount(props, parent?.iRender);\n\t\tfor (const it of getNodes(content)) {\n\t\t\tiRender.insertNode(container, it);\n\t\t}\n\t\tthis.tree = [createMountedNode({\n\t\t\ttag: Value,\n\t\t\tkey: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tnode,\n\t\t\tvalue: node,\n\t\t\tchildren: [],\n\t\t})];\n\t\tthis._node = node;\n\t\tthis._container = container;\n\t}\n\t_destroy(): void {\n\t\tdestroy(this.content);\n\t}\n\t_unmount(): void {\n\t\tconst { parent, iRender } = this;\n\t\tif (parent) {\n\t\t\tunmount(parent.iRender, this.tree);\n\t\t}\n\t\tiRender.unmount(\n\t\t\tthis._container!,\n\t\t\tthis._node!,\n\t\t\tBoolean(parent),\n\t\t);\n\t\tunmount(this.iRender, this.content);\n\t}\n\t_draw(): void {\n\t\tconst {\n\t\t\t_drawChildren: drawChildren,\n\t\t\t_drawContainer: drawContainer,\n\t\t} = this;\n\t\tthis._drawContainer = false;\n\t\tif (drawContainer) {\n\t\t\tthis.iRender.drawContainer(\n\t\t\t\tthis._container!,\n\t\t\t\tthis._node!,\n\t\t\t\tthis.props,\n\t\t\t\tthis.parent?.iRender,\n\t\t\t);\n\t\t}\n\t\tif (this.parent && this.parent.iRender !== this.iRender) {\n\t\t\treturn;\n\t\t}\n\t\tthis._drawChildren = false;\n\t\tif (drawChildren) {\n\t\t\tthis.content = draw(\n\t\t\t\tthis.iRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.content,\n\t\t\t);\n\t\t}\n\t}\n\t_drawSelf(): void {\n\t\tconst {\n\t\t\t_drawChildren: drawChildren,\n\t\t\t_drawContainer: drawContainer,\n\t\t} = this;\n\t\tthis._needDraw = false;\n\t\tthis._drawChildren = false;\n\t\tthis._drawContainer = false;\n\t\tif (drawContainer) {\n\t\t\tthis.iRender.drawContainer(\n\t\t\t\tthis._container!,\n\t\t\t\tthis._node!,\n\t\t\t\tthis.props,\n\t\t\t\tthis.parent?.iRender,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\t\tif (drawChildren) {\n\t\t\tthis.content = draw(\n\t\t\t\tthis.iRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.content,\n\t\t\t);\n\t\t}\n\t}\n\tdrawSelf(): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tthis.callHook('beforeDraw');\n\t\texec(\n\t\t\tc => c && this.markDraw(this),\n\t\t\t() => this._drawSelf(),\n\t\t);\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n\t/** 等待重画的项目 */\n\tprivate _awaitDraw = new Set<EntityObject>();\n\t/** 自身是否需要重绘 */\n\tprivate _needDraw = false;\n\t/** 标记需要绘制的元素 */\n\tmarkDraw(\n\t\tnObject: EntityObject,\n\t\tremove = false,\n\t): void {\n\t\tif (this.parent?.iRender === this.iRender) {\n\t\t\tthis.parent.container.markDraw(nObject, remove);\n\t\t\treturn;\n\t\t}\n\t\tif (nObject === this && this.parent) {\n\t\t\tthis.parent.container.markDraw(this, remove);\n\t\t\tthis._needDraw = !remove;\n\t\t} else if (remove) {\n\t\t\tthis._awaitDraw.delete(nObject);\n\t\t} else {\n\t\t\tthis._awaitDraw.add(nObject);\n\t\t}\n\t\tthis.rootContainer.markDrawContainer(\n\t\t\tthis,\n\t\t\t!this._needDraw && !this._awaitDraw.size\n\t\t\t|| this.destroyed,\n\t\t);\n\t}\n\tdrawContainer(): void {\n\t\tconst {\n\t\t\t_node: node,\n\t\t\t_container: container,\n\t\t\t_awaitDraw: awaitDraw,\n\t\t} = this;\n\t\tif (!node || !container) { return; }\n\t\tthis.callHook('beforeDraw');\n\t\tconst needDraw = this._needDraw;\n\t\tthis._needDraw = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tif (needDraw) { this.drawSelf(); }\n\t\tlist.map(c => c.draw());\n\t\tthis.iRender.drawNode(container, node);\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n\tprivate _containers = new Set<ContainerEntity>();\n\tmarkDrawContainer(\n\t\tcontainer: ContainerEntity,\n\t\tremove = false,\n\t): void {\n\t\tif (remove) {\n\t\t\tthis._containers.delete(container);\n\t\t} else {\n\t\t\tthis._containers.add(container);\n\t\t}\n\t\tmarkDraw(this);\n\t}\n\tdrawAll(): void {\n\t\tconst containers = this._containers;\n\t\tif (!containers.size) { return; }\n\t\tthis.callHook('beforeDrawAll');\n\t\tconst refs: (() => void)[] = [];\n\t\tconst completeList: (() => void)[] = [];\n\t\tsetCompleteList(completeList);\n\t\tsetRefList(refs);\n\t\tconst list = [...containers];\n\t\tcontainers.clear();\n\t\tlist.forEach(c => c.drawContainer());\n\t\tsetRefList();\n\t\trefs.forEach(r => r());\n\t\tcompleteList.forEach(r => r());\n\t\tthis.callHook('drawnAll');\n\t}\n}\n","import {\n\tMountProps,\n\tNeepElement,\n\tComponent,\n\tRootExposed,\n} from './type';\nimport { isElement, createElement } from './auxiliary';\nimport { isProduction } from './constant';\nimport { devtools, getRender } from './install';\nimport ContainerEntity from './entity/ContainerEntity';\n\n\nexport default function render(\n\te?: NeepElement | Component,\n\tp: MountProps = {},\n): RootExposed {\n\tlet params = {...p};\n\tconst container =  new ContainerEntity(\n\t\tgetRender(p.type),\n\t\tparams,\n\t\te === undefined ? [] : isElement(e) ? [e] : [createElement(e)],\n\t);\n\tif (!isProduction) {\n\t\tdevtools.renderHook(container);\n\t}\n\tconst { exposed } = container;\n\tReflect.defineProperty(exposed, '$update', {\n\t\tvalue(c?: NeepElement | Component) {\n\t\t\tcontainer.setChildren(c === undefined ? []\n\t\t\t\t: isElement(c) ? [c] : [createElement(c)]);\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$mount', {\n\t\tvalue(target?: any) {\n\t\t\tif (exposed.$mounted) { return exposed; }\n\t\t\tif (target) {\n\t\t\t\tparams.target = target;\n\t\t\t\tcontainer.setProps(params);\n\t\t\t}\n\t\t\tcontainer.mount();\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$unmount', {\n\t\tvalue() {\n\t\t\tif (!exposed.$mounted) { return; }\n\t\t\tif (exposed.$unmounted) { return; }\n\t\t\tif (exposed.$destroyed) { return container.destroy(); }\n\t\t\tcontainer.unmount();\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tif (params.target) {\n\t\tcontainer.mount();\n\t}\n\treturn exposed as any as RootExposed;\n}\n","import { Component, Render, Marks } from './type';\nimport { nameSymbol, typeSymbol, renderSymbol, componentsSymbol, configSymbol } from './symbols';\n\n/** 组件标记函数 */\nexport interface Mark {\n\t<N extends Component<any, any>>(component: N): N;\n}\n\n/** 创建组件标记函数 */\nfunction Mark<S extends keyof Marks>(\n\tsymbol: S,\n\tvalue: Component[S],\n): Mark {\n\treturn component => {\n\t\tcomponent[symbol] = value as any;\n\t\treturn component;\n\t};\n}\n/** 创建组件标记函数 */\nfunction MarkValue<S extends typeof componentsSymbol | typeof configSymbol>(\n\tsymbol: S,\n\tkey: keyof (NonNullable<Marks[typeof configSymbol]>),\n\tvalue: NonNullable<Marks[typeof componentsSymbol]>[typeof key],\n): Mark {\n\treturn component => {\n\t\tlet obj = component[symbol] as any;\n\t\tif (!obj) {\n\t\t\tobj = Object.create(null);\n\t\t\tcomponent[symbol] = obj;\n\t\t}\n\t\tobj[key] = value;\n\t\treturn component;\n\t};\n}\n\n\n/** 标记组件名称 */\nexport function mName(name: string): Mark;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent: N,\n): N;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(nameSymbol, name); }\n\tcomponent[nameSymbol] = name;\n\treturn component;\n}\n\n/** 标记组件类型 */\nexport function mType(type?: 'native' | 'simple' | 'standard'): Mark;\nexport function mType<N extends Component<any, any>>(\n\ttype: 'native' | 'simple' | 'standard',\n\tcomponent: N,\n): N;\nexport function mType<N extends Component<any, any>>(\n\ttype?: 'native' | 'simple' | 'standard',\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, type); }\n\tcomponent[typeSymbol] = type;\n\treturn component;\n}\n/** 标记为简单组件 */\nexport function mSimple(): Mark;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'simple'); }\n\tcomponent[typeSymbol] = 'simple';\n\treturn component;\n}\n/** 标记为原生组件 */\nexport function mNative(): Mark;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'native'); }\n\tcomponent[typeSymbol] = 'native';\n\treturn component;\n}\n\n/** 标记独立的渲染函数 */\nexport function mRender(fn?: Marks[typeof renderSymbol]): Mark;\nexport function mRender<N extends Component<any, any>>(\n\tfn: Marks[typeof renderSymbol] | undefined,\n\tcomponent: N,\n): N;\nexport function mRender<N extends Component<any, any>>(\n\tfn?: Marks[typeof renderSymbol] | undefined,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(renderSymbol, fn); }\n\tcomponent[renderSymbol] = fn;\n\treturn component;\n}\n\n/** 标记组件类型 */\nexport function mConfig(name: string, config: any): Mark;\nexport function mConfig<N extends Component<any, any>>(\n\tname: string, config: any,\n\tcomponent: N,\n): N;\nexport function mConfig<N extends Component<any, any>>(\n\tname: string, config: any,\n\tcomponent?: N,\n): Mark | N {\n\tconst mark = MarkValue(configSymbol, name, config);\n\tif (!component) { return mark; }\n\treturn mark(component);\n}\n/** 标记组件类型 */\nexport function mComponent(name: string, item: Component): Mark;\nexport function mComponent<N extends Component<any, any>>(\n\tname: string, item: Component,\n\tcomponent: N,\n): N;\nexport function mComponent<N extends Component<any, any>>(\n\tname: string, item: Component,\n\tcomponent?: N,\n): Mark | N {\n\tconst mark = MarkValue(componentsSymbol, name, item);\n\tif (!component) { return mark; }\n\treturn mark(component);\n}\n\nexport function create<P extends object>(\n\tc: Component<P, never>,\n): Component<P, never>;\nexport function create<\n\tP extends object = object,\n\tR extends object = object,\n>(c: Component<P, R>, r: Render<R>): Component<P, R>;\nexport function create<T extends Component<any, any>>(\n\tc: T,\n\tr?: Render,\n): T {\n\tif (typeof r === 'function') {\n\t\tc[renderSymbol] = r;\n\t}\n\treturn c;\n}\n\nexport function mark<N extends Component<any, any>>(\n\tcomponent: N,\n\t...marks: Mark[]\n): N {\n\tfor (const m of marks) { m(component); }\n\treturn component;\n}\n","import { install as NeepInstall } from '@neep/core';\n\nexport { isValue, EventEmitter, Error } from '@neep/core';\nexport default function installNeep(): typeof NeepInstall {\n\treturn NeepInstall;\n}\n","import { isValue } from '../install/neep';\n\nexport type Id = string;\n\nfunction getId(v: any): Id | undefined {\n\tif (typeof v === 'string') { return v; }\n\tif (typeof v === 'number') { return String(v); }\n\treturn undefined;\n}\nexport default function updateId(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Id,\n): string | undefined {\n\tconst id = getId(isValue(props.id) ? props.id() : props.id);\n\tif (id !== old) {\n\t\tif (typeof id === 'string') {\n\t\t\tel.id = props.id;\n\t\t} else {\n\t\t\tel.removeAttribute('id');\n\t\t}\n\t}\n\treturn id;\n}\n","import { isValue } from '../install/neep';\nimport { Value } from 'monitorable';\n\nexport type RecursiveItem<T> = T | RecursiveItem<T>[] | Value<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (isValue(list)) {\n\t\tyield *recursive2iterable(list());\n\t\treturn;\n\n\t}\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield *recursive2iterable(it);\n\t}\n}\n\nexport type Class = Set<string>;\nfunction getClass(\n\tlist: RecursiveItem<(string | {[k: string]: any})>,\n): Class | undefined {\n\tconst set = new Set<string>();\n\tfor (const v of recursive2iterable(list)) {\n\t\tif (!v) { continue; }\n\t\tif (typeof v === 'string') {\n\t\t\tfor (let k of v.split(' ').filter(Boolean)) {\n\t\t\t\tset.add(k);\n\t\t\t}\n\t\t} else if (typeof v === 'object') {\n\t\t\tfor (const k in v) {\n\t\t\t\tconst add = v[k];\n\t\t\t\tfor (let it of k.split(' ').filter(Boolean)) {\n\t\t\t\t\tset[add ? 'add' : 'delete'](it);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (!set.size) { return undefined; }\n\treturn set;\n}\nfunction update(\n\tel: Element,\n\tclasses?: Class,\n\toClasses?: Class,\n): void {\n\tif (classes && oClasses) {\n\t\tconst list = el.getAttribute('class') || '';\n\t\tconst classList = new Set(list.split(' ').filter(Boolean));\n\t\toClasses.forEach(c => classList.delete(c));\n\t\tclasses.forEach(c => classList.add(c));\n\t\tel.setAttribute('class', [...classList].join(' '));\n\t} else if (classes) {\n\t\tel.setAttribute('class', [...classes].join(' '));\n\t} else if (oClasses) {\n\t\tel.removeAttribute('class');\n\t}\n}\nexport default function updateClass(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Class,\n): Class | undefined {\n\tconst classes = getClass(isValue(props.class) ? props.class() : props.class);\n\tupdate(el, classes, old);\n\treturn classes;\n}\n","import { isValue } from '../install/neep';\n\nexport type Style = string | Record<string, [string, 'important' | null]>;\n\nfunction getStyle(\n\tstyle: any,\n): Style | undefined {\n\tif (typeof style === 'string') { return style; }\n\tif (!style) { return undefined; }\n\tif (typeof style !== 'object') { return undefined; }\n\tconst css: Record<string, [string, 'important' | null]> =\n\t\tObject.create(null);\n\tfor (let k in style) {\n\t\tlet value = style[k];\n\t\tconst key = k.substr(0, 2) === '--' ? k\n\t\t\t: k.replace(/[A-Z]/g, '-$1')\n\t\t\t\t.replace(/-+/g, '-')\n\t\t\t\t.toLowerCase();\n\t\tif (typeof value === 'number') {\n\t\t\tcss[key] = [value === 0 ? '0' : `${ value }px`, null];\n\t\t} else if (value && typeof value === 'string') {\n\t\t\tconst v = value.replace(/!important\\s*$/, '');\n\t\t\tcss[key] = [v, v === value ? null : 'important'];\n\t\t}\n\t}\n\treturn css;\n}\n\nfunction update(\n\tcss: CSSStyleDeclaration,\n\tstyle?: Style,\n\toStyle?: Style,\n): void {\n\tif (!style) {\n\t\tif (!oStyle) { return; }\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t\treturn;\n\t\t}\n\t\tfor (const k of Object.keys(oStyle)) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t\treturn;\n\t}\n\n\tif (typeof style === 'string') {\n\t\tif (style !== typeof oStyle) {\n\t\t\tcss.cssText = style;\n\t\t}\n\t\treturn;\n\t}\n\tif (!oStyle || typeof oStyle === 'string') {\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t}\n\t\tfor (const k of Object.keys(style)) {\n\t\t\tcss.setProperty(k, ...style[k]);\n\t\t}\n\t\treturn;\n\t}\n\n\tfor (const k of Object.keys(style)) {\n\t\tconst v = style[k];\n\t\tif (\n\t\t\t!oStyle[k]\n\t\t\t|| oStyle[k][0] !== v[0]\n\t\t\t|| oStyle[k][1] !== v[1]\n\t\t) {\n\t\t\tcss.setProperty(k, ...v);\n\t\t}\n\t}\n\tfor (const k of Object.keys(oStyle)) {\n\t\tif (!style[k]) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t}\n}\nexport default function updateStyle(\n\tprops: {[k: string]: any},\n\tcss: CSSStyleDeclaration,\n\told?: Style,\n\thasStyle?: boolean,\n): Style | undefined {\n\tif (!hasStyle) { return undefined; }\n\n\tconst style = getStyle(isValue(props.style) ? props.style() : props.style);\n\tupdate(css, style, old);\n\treturn style;\n}\n","/* eslint-disable no-fallthrough */\nimport { isValue } from '../install/neep';\n\nexport type Attrs = Record<string, string | null>;\n\nexport function setAttrs(\n\tel: Element,\n\tattrs: Record<string, string | null>,\n): void {\n\tif (el instanceof HTMLInputElement && 'checked' in attrs) {\n\n\t\tswitch (el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\t\tif ((attrs.checked !== null) !== el.checked) {\n\t\t\t\t\tel.checked = attrs.checked !== null;\n\t\t\t\t}\n\t\t}\n\t}\n\tif ((\n\t\tel instanceof HTMLSelectElement\n\t\t|| el instanceof HTMLInputElement\n\t) && 'value' in attrs) {\n\t\tconst value = attrs.value || '';\n\t\tif (el.value !== value) {\n\t\t\tel.value = value;\n\t\t}\n\t}\n}\n\nfunction stringify(\n\tdata: any,\n\tisOn = false,\n): string | null | undefined {\n\tif (data === undefined || data === null) { return data; }\n\tif (isOn && typeof data === 'function') { return undefined; }\n\tif (typeof data === 'boolean') { return data ? '' : null; }\n\tif (typeof data !== 'object') { return String(data); }\n\tif (data instanceof Date) {\n\t\treturn data.toISOString();\n\t}\n\tif (data instanceof RegExp) {\n\t\treturn data.toString();\n\t}\n\treturn JSON.stringify(data);\n}\nfunction getAttrs(\n\tprops: {[k: string]: any},\n\thasStyle: boolean,\n): Attrs {\n\tconst attrs: Attrs = Object.create(null);\n\tfor (const k in props) {\n\t\tif (/^(n|on|bind|slot)[:-]/.test(k)) { continue; }\n\t\tif (!/^[a-zA-Z:_][a-zA-Z0-9:_-]*$/.test(k)) { continue; }\n\t\tconst name = k\n\t\t\t.toLowerCase();\n\t\tswitch (name) {\n\t\t\tcase 'style':\n\t\t\t\tif (!hasStyle) { break; }\n\t\t\tcase 'ref':\n\t\t\tcase 'is':\n\t\t\tcase 'id':\n\t\t\tcase 'class':\n\t\t\t\tcontinue;\n\t\t}\n\t\tlet data = props[k];\n\t\tif (isValue(data)) { data = data(); }\n\t\tconst value = stringify(data, name.substr(0, 2) === 'on');\n\t\tif (value !== undefined) { attrs[name] = value; }\n\t}\n\treturn attrs;\n}\nfunction update(\n\tel: Element,\n\tattrs: Attrs,\n\told: Attrs,\n): void {\n\tfor (const k of Object.keys(attrs)) {\n\t\tconst v = attrs[k];\n\t\tif (!(k in old) || old[k] !== v) {\n\t\t\tif (v === null) {\n\t\t\t\tel.removeAttribute(k);\n\t\t\t} else {\n\t\t\t\tel.setAttribute(k, v);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const k of Object.keys(old)) {\n\t\tif (!(k in attrs)) {\n\t\t\tel.removeAttribute(k);\n\t\t}\n\t}\n}\n\nexport default function updateAttrs(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told: Attrs,\n\thasStyle: boolean,\n): Attrs {\n\tconst attrs = getAttrs(props, hasStyle);\n\tupdate(el, attrs, old);\n\tsetAttrs(el, attrs);\n\treturn attrs;\n}\n","import { isValue, EventEmitter } from '../install/neep';\n\nexport interface Events extends InstanceType<typeof EventEmitter> {\n\t__eventBind: Record<string, () => void>;\n}\n\nfunction createEventEmitter(): Events {\n\tconst events: Events = new EventEmitter() as Events;\n\tevents.__eventBind = Object.create(null);\n\treturn events;\n}\n\n\nfunction *getElementModel(el: Element): Iterable<[string, string, (e: any) => any]> {\n\tif (el instanceof HTMLInputElement) {\n\t\tswitch (el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\t\treturn yield [\n\t\t\t\t\t'checked', 'change',\n\t\t\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).checked,\n\t\t\t\t];\n\t\t}\n\t\treturn yield [\n\t\t\t'value', 'input',\n\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLSelectElement) {\n\t\treturn yield [\n\t\t\t'value', 'select',\n\t\t\t(e: any) => (e.currentTarget as HTMLSelectElement).value,\n\t\t];\n\t}\n}\n\nfunction getEventName(k: string): string {\n\tif (k.substr(0, 2) !== 'on') { return ''; }\n\tlet n = k.substr(2);\n\tif (n[0] === ':' || n[0] === '-') { return ''; }\n\treturn n;\n}\n\nexport default function updateEvent(\n\tprops: {[k: string]: any},\n\tel: Element,\n\tevent = createEventEmitter(),\n): Events {\n\tevent.updateInProps(props, addEvent => {\n\t\tfor (const k in props) {\n\t\t\tconst f = props[k];\n\t\t\tif (typeof f !== 'function') { continue; }\n\t\t\tconst name = getEventName(k);\n\t\t\tif (!name) { continue; }\n\t\t\taddEvent(name, f);\n\t\t}\n\t\tfor (const [prop, name, t] of getElementModel(el)) {\n\t\t\tconst value = props[prop];\n\t\t\tif (isValue(value)) {\n\t\t\t\taddEvent(name, e => value(t(e)));\n\t\t\t}\n\t\t}\n\t});\n\n\tconst names = new Set(event.names.map(String));\n\tconst eventBind = event.__eventBind;\n\tfor (const k of Object.keys(eventBind)) {\n\t\tif (names.has(k)) { continue; }\n\t\teventBind[k]();\n\t\tdelete eventBind[k];\n\t}\n\tconst {emit} = event;\n\tfor (const k of names) {\n\t\tif (k in eventBind) { continue; }\n\t\tconst f = (...p: any[]): boolean => emit(k, ...p);\n\t\tel.addEventListener(k, f);\n\t\teventBind[k] = () => {\n\t\t\tel.removeEventListener(k, f);\n\t\t};\n\t}\n\treturn event;\n}\n","import updateId, { Id } from './id';\nimport updateClass, { Class } from './class';\nimport updateStyle, { Style } from './style';\nimport updateAttrs, { Attrs } from './attr';\nimport updateEvent, { Events } from './event';\n\nconst PropsMap = new WeakMap<Element, {\n\tid?: Id;\n\tclasses?: Class;\n\tstyle?: Style;\n\tattrs: Attrs;\n\tevent?: Events;\n}>();\n\nexport default function update(\n\tel: Element,\n\tprops: {[k: string]: any},\n): Element {\n\tconst css = (el as any).style;\n\tconst hasStyle = css instanceof CSSStyleDeclaration;\n\tconst old = PropsMap.get(el) || { attrs: {} };\n\n\tconst id = updateId(props, el, old.id);\n\tconst classes = updateClass(props, el, old.classes);\n\tconst style = updateStyle(props, css, old.style, hasStyle);\n\tconst attrs = updateAttrs(props, el, old.attrs, hasStyle);\n\tconst event = updateEvent(props, el, old.event);\n\tPropsMap.set(el, { id, classes, style, attrs, event });\n\treturn el;\n}\n","let list: (() => void)[] | undefined;\nexport default function nextFrame(f: () => void): void {\n\tif (list) {\n\t\tlist.push(f);\n\t\treturn;\n\t}\n\tlist = [f];\n\twindow.requestAnimationFrame(() => {\n\t\tconst fs = list;\n\t\tlist = undefined;\n\t\tif (!fs) { return; }\n\t\tfs.forEach(f => f());\n\t});\n}\n","const xmlnsMap: Record<string, string> = {\n\tsvg: 'http://www.w3.org/2000/svg',\n\thtml: 'http://www.w3.org/1999/xhtml',\n\tmathml: 'http://www.w3.org/1998/Math/MathML',\n};\nconst SVGTags = new Set([\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'script',\n\t'set',\n\t'stop',\n\t'style',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'title',\n\t'tref',\n\t'tspan',\n\t'use',\n\t'view',\n\t'vkern',\n]);\nconst MathMLTags = new Set([\n\t'maction',\n\t'math',\n\t'menclose',\n\t'merror',\n\t'mfenced',\n\t'mfrac',\n\t'mglyph',\n\t'mi',\n\t'mlabeledtr',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics',\n]);\n\nexport default function createElement(\n\ttagname: string,\n\tnamespace?: string,\n): Element {\n\tconst res = /^([a-z][a-z0-9-]*):([a-z0-9-]+)$/i.exec(tagname);\n\tconst tag = res ? res[2] : tagname;\n\tconst ns = (namespace || res?.[1]\n\t\t|| SVGTags.has(tag.toLowerCase()) && 'svg'\n\t\t|| MathMLTags.has(tag.toLowerCase()) && 'mathml' || '').toLowerCase();\n\tif (!ns) {\n\t\treturn document.createElement(tag);\n\t}\n\treturn document.createElementNS(\n\t\tns in xmlnsMap && xmlnsMap[ns] || ns,\n\t\ttag,\n\t);\n}\n","const tagRegex =\n\t/^[a-z][a-z0-9]*(?:-[a-z0-9]+)?(?::[a-z0-9]+(?:-[a-z0-9]+)?)?$/i;\nexport function isTagName(tag: any): boolean {\n\tif (typeof tag !== 'string') { return false; }\n\treturn tagRegex.test(tag);\n}\n","import {\n\tIRender,\n\tNativeNode,\n\tNativeText,\n\tNativePlaceholder,\n\tNativeComponent,\n\tNativeShadow,\n\tNativeContainer,\n\tNativeElement,\n} from '@neep/core';\nimport update from './update';\nimport nextFrame from './nextFrame';\nimport createElement from './createElement';\nimport { isTagName } from './utils';\n\nconst render: IRender = {\n\ttype: 'web',\n\tnextFrame,\n\tisNode(v): v is NativeNode {\n\t\treturn v instanceof Node;\n\t},\n\tmount({target, class: className, style, tag}, parent) {\n\t\tif (!isTagName(tag)) { tag = 'div'; }\n\n\t\tconst container =\n\t\t\trender.createElement(tag, { class: className, style });\n\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (target instanceof Element) {\n\t\t\ttarget.appendChild(container as any);\n\t\t\tif (parent) {\n\t\t\t\treturn [container, parent.createPlaceholder()] as any;\n\t\t\t}\n\t\t\treturn [container, container];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\tdocument.body.appendChild(container as any);\n\t\t\treturn [container, container] as any;\n\t\t}\n\t\treturn [container, container] as any;\n\t},\n\tunmount(container, node, removed) {\n\t\tif (container === node && removed) { return; }\n\t\t(container as any as Element).remove();\n\t},\n\tdrawContainer(container, node, {target, class: className, style, tag}, parent) {\n\t\trender.updateProps(container as NativeElement, { class: className, style });\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (parent !== render && !(target instanceof Element)) {\n\t\t\ttarget = document.body;\n\t\t}\n\t\tconst oldTarget = parent === render && container === node\n\t\t\t? undefined : render.getParent(node);\n\t\tif (oldTarget === target) {\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\ttarget.appendChild(container);\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (!oldTarget) {\n\t\t\tconst newNode = parent.createPlaceholder();\n\t\t\tconst pNode = parent.getParent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insertNode(pNode, newNode as any, node);\n\t\t\t\trender.removeNode(node);\n\t\t\t}\n\t\t\treturn [container, newNode];\n\t\t}\n\t\tif (!target) {\n\t\t\tconst pNode = parent.getParent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insertNode(pNode, container, node);\n\t\t\t\trender.removeNode(node);\n\t\t\t}\n\t\t\treturn [container, container];\n\n\t\t}\n\t\ttarget.appendChild(node);\n\t\treturn [container, node];\n\t},\n\tdrawNode() {},\n\n\tcreateElement(tag, props) {\n\t\treturn update(createElement(tag), props) as any;\n\t},\n\tcreateText(text: string): NativeText {\n\t\treturn document.createTextNode(text) as any;\n\t},\n\tcreatePlaceholder(): NativePlaceholder {\n\t\treturn document.createComment('') as any;\n\t},\n\tcreateComponent(): [NativeComponent, NativeShadow] {\n\t\tconst node = createElement('neep-component');\n\t\treturn [node, node.attachShadow({ mode: 'open' })] as any;\n\t},\n\n\tgetParent(node: NativeNode): NativeContainer | null {\n\t\treturn (node as any).parentNode as NativeContainer | null;\n\t},\n\tnextNode(node: NativeNode): NativeNode | null {\n\t\treturn (node as any).nextSibling as NativeContainer | null;\n\t},\n\tupdateProps(node, props): void {\n\t\tupdate(node as any, props);\n\t},\n\tinsertNode(\n\t\tparent: NativeContainer,\n\t\tnode: NativeNode,\n\t\tnext: NativeNode | null = null,\n\t): void {\n\t\t(parent as any).insertBefore(node, next);\n\t},\n\tremoveNode(node: NativeNode): void {\n\t\tconst p = render.getParent(node);\n\t\tif (!p) { return; }\n\t\t(p as any).removeChild(node);\n\t},\n\tgetRect(node: NativeNode) {\n\t\tif (node instanceof Element) {\n\t\t\tconst {\n\t\t\t\ttop, right, bottom, left, width, height\n\t\t\t} = node.getBoundingClientRect();\n\t\t\treturn { top, right, bottom, left, width, height };\n\t\t}\n\t\tif (node instanceof ShadowRoot) {\n\t\t\tconst {\n\t\t\t\ttop, right, bottom, left, width, height\n\t\t\t} = node.host.getBoundingClientRect();\n\t\t\treturn { top, right, bottom, left, width, height };\n\t\t}\n\t\treturn null;\n\t}\n};\n\nexport default render;\n","import render from '../render';\nimport installNeep from './neep';\n\ninstallNeep()({ render });\n\nexport default function install(\n\tNeep: typeof import('@neep/core'),\n): void {\n}\n","import { create, mark, mName, Template, createElement, value, computed } from '@neep/core';\n\nconst Compute = create((\n\tprops: {  a?: any, onset?: () => void },\n) => {\n\tconst a = value(1);\n\tconst b = value(2);\n\t// eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n\tconst c1 = computed(() => a + b);\n\tconst c2 = computed(() => a.value + b.value);\n\tconst c3 = computed(() => Number(a) + Number(b));\n\tconst c4 = computed(() => Number(a.value) + Number(b.value));\n\treturn () => <Template>\n\t\t计算\n\t\t<div><input value={a} />+<input value={b} />={c1}</div>\n\t\t<div><input value={a} />+<input value={b} />={c2}</div>\n\t\t<div><input value={a} />+<input value={b} />={c3}</div>\n\t\t<div><input value={a} />+<input value={b} />={c4}</div>\n\t</Template>;\n});\nexport default mark(Compute, mName('Compute') );\n","/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport { create, mark, mName, Template, createElement, useValue, computed } from '@neep/core';\n\nconst Compute2 = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ slots, delivered, emit },\n) => {\n\tconst a = useValue();\n\tconst b = useValue();\n\tconst c1 = useValue(() => computed(() => a + b));\n\tconst c2 = useValue(() => computed(() => a.value + b.value));\n\tconst c3 = useValue(() => computed(() => Number(a) + Number(b)));\n\tconst c4 = useValue(() => computed(() => Number(a.value) + Number(b.value)));\n\treturn <Template>\n\t\t计算\n\t\t<div><input value={a} />+<input value={b} />={c1}</div>\n\t\t<div><input value={a} />+<input value={b} />={c2}</div>\n\t\t<div><input value={a} />+<input value={b} />={c3}</div>\n\t\t<div><input value={a} />+<input value={b} />={c4}</div>\n\t</Template>;\n});\nexport default mark(Compute2, mName('Compute2') );\n","import { create, mark, mName, Template, createElement, value } from '@neep/core';\n\nconst Sync = create((\n\tprops: {  a?: any, onset?: () => void },\n) => {\n\tconst inputValue = value('');\n\tconst checked = value(false);\n\tconst ref = (x: any): void => console.log('Ref', 'B', x);\n\treturn () => <Template>\n\t\t同步的输入框及显示\n\t\t<div><input ref={ref} type=\"checkbox\" checked={checked} /><input value={inputValue} style=\"width: 100%\" /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div ref={ref}>[{checked}]{inputValue}</div>\n\t</Template>;\n});\nexport default mark(Sync, mName('Sync') );\n","import { create, mark, mName, Template, createElement, useValue } from '@neep/core';\n\nconst Sync2 = create(() => {\n\tconst inputValue = useValue();\n\tconst checked = useValue();\n\n\treturn <Template>\n\t\t同步的输入框及显示\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style=\"width: 100%\" /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div>[{checked}]{inputValue}</div>\n\t</Template>;\n});\nexport default mark(Sync2, mName('Sync2') );\n","import { create, mark, mName, Template, Slot, createElement, hook } from '@neep/core';\nimport Compute from './Compute';\nimport Compute2 from './Compute2';\nimport Sync from './Sync';\nimport Sync2 from './Sync2';\n\nconst B = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ slots, delivered, emit },\n) => {\n\thook('beforeCreate', () => console.log('Hook', 'B', 'beforeCreate'), true);\n\thook('created', () => console.log('Hook', 'B', 'created'), true);\n\thook('beforeMount', () => console.log('Hook', 'B', 'beforeMount'), true);\n\thook('mounted', () => console.log('Hook', 'B', 'mounted'), true);\n\thook('beforeUpdate', () => console.log('Hook', 'B', 'beforeUpdate'), true);\n\thook('updated', () => console.log('Hook', 'B', 'updated'), true);\n\treturn <Template>\n\t\t<div>B: {delivered.a}</div>\n\t\t{slots.name?.()}\n\t\t<br />\n\t\t{slots.default?.()}\n\t\t<button onclick={props.onset}>[onclick]+1</button>\n\t\t<button on-click={props.onset}>[on-click]+1</button>\n\t\t<button {...{'@click': props.onset}}>[@click]+1</button>\n\t\t<button {...{'on:click': props.onset}}>[on:click]+1</button>\n\t\t<button {...{'@click': () => emit('set')}}>[@click=emit]+1</button>\n\t\t<br />\n\t\t<Slot />\n\t\t<Slot />\n\t\t<br />\n\t\t<Slot name=\"666\">666</Slot>\n\t\t<br />\n\t\t<Slot name=\"name\">name</Slot>\n\t\t<hr />\n\t\t<Sync />\n\t\t<hr />\n\t\t<Sync2 />\n\t\t<hr />\n\t\t<Compute />\n\t\t<hr />\n\t\t<Compute2 />\n\t\t<hr />\n\t</Template>;\n});\nexport default mark(B, mName('B'));\n","import * as Neep from '@neep/core';\nimport B from './components/B';\n\nNeep.register('tb', B);\n","import { create, mark, mName, mSimple, Deliver, createElement, label  } from '@neep/core';\n\nconst E = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes, delivered },\n) => {\n\tlabel('{E}', '#F00');\n\treturn <Deliver a={delivered.a as number + 1}>\n\t\t<div>E: {delivered.a}</div>\n\t\t<tb {...props} {...{'@set': props.onset}}>\n\t\t\t{ childNodes }\n\t\t</tb>\n\t</Deliver>;\n});\nexport default mark(E, mName('E'), mSimple);\n","import { create, mark, mName, mSimple, createElement, label } from '@neep/core';\n\nimport E from './E';\n\nconst D = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes },\n) => {\n\tlabel('{D}', '#F00');\n\treturn <E {...props}>\n\t\t{ childNodes }\n\t</E>;\n});\nexport default mark(D, mName('D'), mSimple);\n","import { create, mark, mName, mSimple, Deliver, createElement, label, mComponent } from '@neep/core';\n\nimport D from './D';\n\nconst C = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes, delivered },\n) => {\n\tlabel('{C}', '#F00');\n\treturn <Deliver a={delivered.a as number + 1}>\n\t\t<div>C: {delivered.a}</div>\n\t\t<td {...props}>\n\t\t\t{ childNodes }\n\t\t</td>\n\t</Deliver>;\n});\nexport default mark(C, mName('C'), mSimple, mComponent('td', D));\n","import { create, mark, mName, mComponent, value, createElement, label, deliver, hook } from '@neep/core';\n\nimport C from './C';\n\nconst A = create((\n\tprops: { name?: string },\n) => {\n\tlabel('{自定义标签文本}', '#F00');\n\thook('beforeCreate', () => console.log('Hook', 'A', 'beforeCreate'));\n\thook('created', () => console.log('Hook', 'A', 'created'));\n\thook('beforeMount', () => console.log('Hook', 'A', 'beforeMount'));\n\thook('mounted', () => console.log('Hook', 'A', 'mounted'));\n\thook('beforeUpdate', () => console.log('Hook', 'A', 'beforeUpdate'));\n\thook('updated', () => console.log('Hook', 'A', 'updated'));\n\tconst v = value(1);\n\tdeliver('a', v, true);\n\tconst ref = (x: any): void => console.log('Ref', 'B', x);\n\treturn () => <tc a=\"1\" onset={() => v.value++ } ref={ref}>\n\t\t<b ref={ref}>你好</b>\n\t\t<i ref={ref}>{v()}</i>\n\t\t<u ref={ref} slot=\"name\">{props.name}</u>\n\t</tc>;\n});\n\nexport default mark(A, mName('A'), mComponent('tc', C));\n","import { create, mName, mark, createElement } from '@neep/core';\nimport A from './components/A';\n\nconst App = create(() => <A name=\"啊\" />);\n\nexport default mark(App, mName('App'));\n","import '@neep/web-render';\nimport * as Neep from '@neep/core';\nimport './register';\nimport App from './App';\nNeep.render(App).$mount();\n"],"names":["devtools","renderHook","installDevtools","tools","NeepError","Error","constructor","message","tag","assert","v","nextFrameApi","nextFrame","fn","renders","Object","create","getRender","type","default","installRender","render","console","printError","String","map","value","def","installMonitorable","api","install","apis","monitorable","getEventName","k","substr","test","addEventFromCollection","addEvent","events","names","Array","isArray","n","p","keys","f","EventEmitter","update","emitter","newHandles","push","on","updateInProps","props","custom","entName","listener","_names","Set","createEmit","omitNames","emit","name","event","res","omit","Reflect","defineProperty","get","markRead","filter","t","includes","configurable","e","error","size","markChange","add","removed","delete","updateHandles","eventCancelHandles","_cancelHandles","oldHandles","clear","forEach","list","handles","ScopeSlot","SlotRender","Slot","Value","Deliver","Template","current","setCurrent","entity","oldEntity","$_valueIndex","$_serviceIndex","ret","$_values","length","$_services","checkCurrent","initOnly","created","constructors","initContext","context","initEntity","delayedRefresh","objectSet","wait","obj","run","o","refresh","asyncRefresh","async","hooks","setHook","id","hook","$_hooks","safeify","set","callHook","exposed","useValue","index","values","undefined","setValue","opt","isValue","enumerable","deliver","delivered","isElementSymbol","Symbol","for","typeSymbol","nameSymbol","renderSymbol","componentsSymbol","configSymbol","isElement","createElement","attrs","children","node","key","slot","ref","equalProps","a","b","aKeys","ownKeys","bKeys","has","equal","i","execed","inserted","label","setLabel","l","getLabel","text","color","ids","Nodes","IdMap","Map","createMountedNode","recoveryMountedNode","recursive2iterable","it","refList","setRefList","setRef","isRemove","getNodes","tree","component","unmount","iRender","removeNode","createValue","source","isNode","RegExp","createText","Date","toISOString","createPlaceholder","createAll","item","createList","createItem","ltag","toLowerCase","mount","insertNode","getLastNode","getFirstNode","replace","newTree","oldTree","next","parent","getParent","updateList","newList","mountedMap","src","findIndex","old","updateItem","splice","last","nextNode","updateAll","Math","min","max","all","updateProps","draw","getSlots","slots","native","nativeList","el","renderSlots","createSlots","isProduction","setSlots","oldChildren","disabledKey","oldProps","define","isProps","newKeys","components","register","findComponent","globalComponents","getChildren","args","replaceNode","isRoot","argv","slotName","getComponents","Boolean","execSimple","nObject","slotMap","childNodes","result","nodes","init","renderNode","getSlotRenderFn","renderFn","slotRenderFnList","newFn","call","exec","slotRenderFn","normalize","createExposed","cfg","$parent","$component","$isContainer","$created","$destroyed","destroyed","$mounted","mounted","$unmounted","unmounted","completeList","setCompleteList","complete","createEntity","isContainer","writable","h","bind","config","EntityObject","container","WeakMap","parentDelivered","canRefresh","_delayedRefresh","needRefresh","_needRefresh","requestDraw","_refreshing","_render","_nodes","convert","_update","_destroy","destroy","__executed_destroy","_mount","__executed_mount","c","_cancelDrawMonitor","stop","_unmount","__executed_mounted","_draw","lastSlots","nativeNodes","createContext","initRender","changed","resultOnly","monitor","stopRender","ComponentEntity","encase","assign","_shadow","createComponent","_stopRender","markDraw","shadowTree","nativeTree","toElement","ContainerEntity","newDelivered","awaitDraw","requested","drawAll","rootContainer","_drawChildren","setChildren","setProps","_drawContainer","content","_node","_container","drawChildren","drawContainer","_drawSelf","_needDraw","drawSelf","remove","_awaitDraw","markDrawContainer","needDraw","drawNode","_containers","containers","refs","r","params","target","Mark","symbol","MarkValue","mName","mSimple","mComponent","mark","marks","m","installNeep","NeepInstall","getId","updateId","removeAttribute","getClass","split","classes","oClasses","getAttribute","classList","setAttribute","join","updateClass","class","getStyle","style","css","oStyle","cssText","removeProperty","setProperty","updateStyle","hasStyle","setAttrs","HTMLInputElement","checked","HTMLSelectElement","stringify","data","isOn","toString","JSON","getAttrs","updateAttrs","createEventEmitter","__eventBind","getElementModel","currentTarget","updateEvent","prop","eventBind","addEventListener","removeEventListener","PropsMap","CSSStyleDeclaration","window","requestAnimationFrame","fs","xmlnsMap","svg","html","mathml","SVGTags","MathMLTags","tagname","namespace","ns","document","createElementNS","tagRegex","isTagName","Node","className","querySelector","Element","appendChild","body","oldTarget","newNode","pNode","createTextNode","createComment","attachShadow","mode","parentNode","nextSibling","insertBefore","removeChild","getRect","top","right","bottom","left","width","height","getBoundingClientRect","ShadowRoot","host","Compute","c1","computed","c2","c3","Number","c4","Compute2","Sync","inputValue","x","log","Sync2","B","onset","Neep","E","D","C","A","App","$mount"],"mappings":"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"}