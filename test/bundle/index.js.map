{"version":3,"file":"index.js","sources":["../../packages/renderer-html/src/renderer/createElement.ts","../../packages/renderer-html/src/renderer/createComponent.ts","../../packages/renderer-html/src/renderer/createPlaceholder.ts","../../packages/renderer-html/src/renderer/createText.ts","../../packages/renderer-html/src/renderer/getParent.ts","../../packages/renderer-html/src/renderer/insertNode.ts","../../packages/core/src/constant.ts","../../packages/core/src/install/devtools.ts","../../packages/core/src/Error.ts","../../packages/core/src/install/renderer.ts","../../node_modules/monitorable/dist/monitorable.esm.js","../../packages/core/src/install/monitorable.ts","../../packages/core/src/install/index.ts","../../packages/core/src/auxiliary/tags.ts","../../packages/core/src/auxiliary/ref.ts","../../packages/core/src/extends/current.ts","../../packages/core/src/hook.ts","../../packages/core/src/auxiliary/life.ts","../../packages/core/src/symbols.ts","../../packages/core/src/is.ts","../../packages/core/src/auxiliary/element.ts","../../packages/core/src/auxiliary/dev.ts","../../packages/core/src/entity/id.ts","../../packages/core/src/entity/proxy/BaseProxy.ts","../../packages/core/src/entity/proxy/NodeProxy.ts","../../packages/core/src/entity/draw/create.ts","../../packages/core/src/entity/draw/utils.ts","../../packages/core/src/entity/draw/update.ts","../../packages/core/src/entity/draw/index.ts","../../packages/core/src/entity/proxy/DeliverProxy.ts","../../packages/core/src/extends/refresh.ts","../../packages/core/src/EventEmitter.ts","../../packages/core/src/entity/slot.ts","../../packages/core/src/extends/context.ts","../../packages/core/src/entity/getDelivered.ts","../../packages/core/src/register.ts","../../packages/core/src/entity/normalize/index.ts","../../packages/core/src/entity/proxy/ValueProxy.ts","../../packages/core/src/entity/proxy/GroupProxy.ts","../../packages/core/src/entity/proxy/RefProxy.ts","../../packages/core/src/entity/proxy/ElementProxy.ts","../../packages/core/src/entity/proxy/ShellProxy.ts","../../packages/core/src/entity/convert/utils.ts","../../packages/core/src/entity/proxy/SlotProxy.ts","../../packages/core/src/extends/entity.ts","../../packages/core/src/entity/proxy/ComponentProxy.ts","../../packages/core/src/entity/proxy/RenderComponentProxy.ts","../../packages/core/src/entity/proxy/StandardComponentProxy.ts","../../packages/core/src/extends/recognizer.ts","../../packages/core/src/entity/convert/create.ts","../../packages/core/src/entity/recursive.ts","../../packages/core/src/entity/convert/update.ts","../../packages/core/src/entity/convert/index.ts","../../packages/core/src/extends/nextTick.ts","../../packages/core/src/entity/proxy/ContainerProxy.ts","../../packages/core/src/render.ts","../../packages/core/src/create.ts","../../packages/core/src/components/lazy.ts","../../packages/core/src/entity/proxy/RenderProxy.ts","../../packages/core/src/extends/proxy.ts","../../packages/renderer-html/src/install/neep.ts","../../packages/renderer-html/src/renderer/updateProps/id.ts","../../packages/renderer-html/src/renderer/updateProps/class.ts","../../packages/renderer-html/src/renderer/updateProps/style.ts","../../packages/renderer-html/src/renderer/updateProps/attr.ts","../../packages/renderer-html/src/renderer/updateProps/event.ts","../../packages/renderer-html/src/renderer/updateProps/index.ts","../../packages/renderer-html/src/renderer/nextFrame.ts","../../packages/renderer-html/src/renderer/container/getTarget.ts","../../packages/renderer-html/src/renderer/container/mountContainer.ts","../../packages/renderer-html/src/renderer/container/unmountContainer.ts","../../packages/renderer-html/src/renderer/container/updateContainer.ts","../../packages/renderer-html/src/renderer/removeNode.ts","../../packages/renderer-html/src/renderer/container/getContainer.ts","../../packages/renderer-html/src/renderer/index.ts","../../packages/renderer-html/src/init/Container.ts","../../packages/renderer-html/src/install/init.ts","../../packages/renderer-html/src/install/install.ts","../components/Compute.tsx","../components/Compute2.tsx","../components/Sync.tsx","../components/Sync2.tsx","../components/delivers.tsx","../components/B.tsx","../register.ts","../components/E.tsx","../components/D.tsx","../components/C.tsx","../components/A.tsx","../App.tsx","../index.tsx"],"sourcesContent":["const xmlnsMap: Record<string, string> = {\n\tsvg: 'http://www.w3.org/2000/svg',\n\thtml: 'http://www.w3.org/1999/xhtml',\n\tmathml: 'http://www.w3.org/1998/Math/MathML',\n};\nconst SVGTags = new Set([\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'script',\n\t'set',\n\t'stop',\n\t'style',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'title',\n\t'tref',\n\t'tspan',\n\t'use',\n\t'view',\n\t'vkern',\n]);\nconst MathMLTags = new Set([\n\t'maction',\n\t'math',\n\t'menclose',\n\t'merror',\n\t'mfenced',\n\t'mfrac',\n\t'mglyph',\n\t'mi',\n\t'mlabeledtr',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics',\n]);\n\nexport default function createElement(\n\ttagname: string,\n\tnamespace?: string,\n): Element {\n\tconst res = /^([a-z][a-z0-9-]*):([a-z0-9-]+)$/i.exec(tagname);\n\tconst tag = res ? res[2] : tagname;\n\tconst ns = (namespace || res?.[1]\n\t\t|| SVGTags.has(tag.toLowerCase()) && 'svg'\n\t\t|| MathMLTags.has(tag.toLowerCase()) && 'mathml' || '').toLowerCase();\n\tif (!ns) {\n\t\treturn document.createElement(tag);\n\t}\n\treturn document.createElementNS(\n\t\tns in xmlnsMap && xmlnsMap[ns] || ns,\n\t\ttag,\n\t);\n}\n","import createElement from './createElement';\nimport Neep from '@neep/core';\n\nexport default function createComponent(\n\trenderer: Neep.IRenderer,\n): [Element, ShadowRoot] {\n\tconst node = createElement('neep-component');\n\treturn [node, node.attachShadow({ mode: 'open' })];\n\n}\n","export default function createPlaceholder(): Comment {\n\treturn document.createComment('');\n}\n","export default function createText(text: string): Text {\n\treturn document.createTextNode(text);\n}\n","export default function getParent(node: Node): (Node & ParentNode) | null {\n\treturn node.parentNode;\n}\n","export default function insertNode(\n\tparent: Node & ParentNode,\n\tnode: Node,\n\tnext: Node | null = null,\n): void {\n\tparent.insertBefore(node, next);\n}\n","/**\n * Global constant\n *\n * Will be replaced by the 'rollup-plugin-replace' plug-in\n */\n\n/**\n * Neep code version\n */\nexport const version = '__VERSION__' as string;\n/**\n * Is the current mode production mode\n * @description Support tree shaking\n */\nexport const isProduction = process.env.NODE_ENV === 'production';\n","import { Devtools } from '../type';\n\nexport const devtools: Devtools = {\n\trenderHook(){},\n};\n\nexport default function installDevtools(\n\ttools?: Partial<Devtools>,\n): void {\n\tif (!tools) { return; }\n\tif (typeof tools !== 'object') { return; }\n\tconst { renderHook } = tools;\n\tif (typeof renderHook === 'function') {\n\t\tdevtools.renderHook = renderHook;\n\t}\n}\n","export default class NeepError extends Error {\n\treadonly tag: string;\n\tconstructor(message: string, tag: string = '') {\n\t\tsuper(tag ? `[${ tag }] ${ message }` : message);\n\t\tthis.tag = tag;\n\t}\n}\nexport function assert(\n\tv: any,\n\tmessage: string,\n\ttag?: string,\n): asserts v {\n\tif (v) { return; }\n\tthrow new NeepError(message, tag);\n}\n","import { IRenderer } from '../type';\nimport { assert } from '../Error';\n\nlet nextFrameApi: undefined | ((fn: () => void) => void);\nexport function nextFrame(fn: () => void): void {\n\tassert(nextFrameApi, 'The basic renderer is not installed', 'install');\n\tnextFrameApi(fn);\n}\n\nexport const renderers: Record<string, IRenderer>\n\t= Object.create(null);\n\nexport function getRender(\n\ttype: string | number | IRenderer = '',\n\tdef = renderers.default,\n): IRenderer {\n\tif (typeof type === 'object') { return type; }\n\treturn renderers[type] || def;\n}\n\nexport default function installRender(renderer?: IRenderer): void {\n\tif (!renderer) { return; }\n\trenderers[renderer.type] = renderer;\n\tif (nextFrameApi) { return; }\n\tif (!renderers.default) {\n\t\trenderers.default = renderer;\n\t}\n\tif (!nextFrameApi && renderer.nextFrame) {\n\t\trenderers.default = renderer;\n\t\tnextFrameApi = renderer.nextFrame.bind(renderer);\n\t}\n\n}\n","\n/*!\n * monitorable v0.1.0-beta.1\n * (c) 2020-2021 Fierflame\n * @license MIT\n */\n\nlet printErrorLog;\n/** 打印错误 */\n\nfunction printError(info) {\n  if (typeof printErrorLog === 'function') {\n    printErrorLog(info);\n    return;\n  }\n\n  console.error(info);\n}\nfunction setPrintError(p) {\n  printErrorLog = typeof p === 'function' ? p : undefined;\n}\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n/** 回调函数安全化处理 */\n\nfunction safeify(fn) {\n  return (...p) => {\n    try {\n      fn(...p);\n    } catch (e) {\n      printError(e);\n    }\n  };\n}\n/** 回调函数安全化处理 */\n\nfunction safeCall(fn) {\n  try {\n    fn();\n  } catch (e) {\n    printError(e);\n  }\n}\nfunction getIndexes(target, prop) {\n  if (!target) {\n    return undefined;\n  }\n\n  if (typeof target !== 'function' && typeof target !== 'object') {\n    return undefined;\n  }\n\n  if (typeof prop === 'number') {\n    return [target, String(prop)];\n  }\n\n  if (typeof prop === 'symbol') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'string') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'boolean') {\n    return [target, prop];\n  }\n\n  return undefined;\n}\nfunction getMapValue(map, key, def) {\n  if (map.has(key)) {\n    return map.get(key);\n  }\n\n  const value = def();\n  map.set(key, value);\n  return value;\n}\n\n/** 已被读取的 */\nlet read;\n/**\n * 标记已读状态\n * @param obj  要标记的对象\n * @param prop 要标记的属性\n */\n\nfunction markRead(target, prop) {\n  if (!read) {\n    return;\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n  const propMap = getMapValue(read, target, () => new Map());\n\n  if (propMap.has(prop)) {\n    return;\n  }\n\n  propMap.set(prop, false);\n}\n\n/**\n * 监听函数的执行，并将执行过程中读取的对象值设置到 map 中\n * @param fn 要执行的含糊\n * @param map 用于存储被读取对象的 map\n */\nfunction observeRun(map, fn, options) {\n  const oldRead = read;\n  read = map;\n\n  try {\n    if (!(options === null || options === void 0 ? void 0 : options.postpone)) {\n      return fn();\n    }\n\n    return postpone(fn, options.postpone === 'priority');\n  } finally {\n    read = oldRead;\n  }\n}\n\nfunction observe(map, fn, options) {\n  if (typeof fn === 'function') {\n    return observeRun(map, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return observeRun(map, options, fn);\n}\nconst watchList = new WeakMap();\n\nfunction execWatch(target, prop, filter) {\n  var _watchList$get;\n\n  const watch = (_watchList$get = watchList.get(target)) === null || _watchList$get === void 0 ? void 0 : _watchList$get.get(prop);\n\n  if (!watch) {\n    return;\n  }\n\n  let list = [...watch];\n\n  if (filter) {\n    list = list.filter(([, t]) => filter(t));\n  }\n\n  list.forEach(([w]) => w());\n}\n\nlet waitList;\n\nfunction runDeferred(list) {\n  for (const [target, set] of list.entries()) {\n    var _read;\n\n    const propMap = (_read = read) === null || _read === void 0 ? void 0 : _read.get(target);\n\n    for (const prop of set) {\n      execWatch(target, prop, t => !t);\n\n      if (propMap === null || propMap === void 0 ? void 0 : propMap.has(prop)) {\n        propMap.set(prop, true);\n      }\n    }\n  }\n}\n\nfunction postponeRun(f, priority) {\n  const list = !priority && waitList || new Map();\n  const old = waitList;\n  waitList = list;\n\n  try {\n    return f();\n  } finally {\n    waitList = old;\n\n    if (list !== waitList) {\n      runDeferred(list);\n    }\n  }\n}\n\nfunction postpone(fn, priority) {\n  if (typeof fn === 'function') {\n    return postponeRun(fn, priority);\n  }\n\n  if (typeof priority !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return postponeRun(priority, fn);\n}\n\nfunction wait(target, prop) {\n  if (!waitList) {\n    return false;\n  }\n\n  getMapValue(waitList, target, () => new Set()).add(prop);\n  return true;\n}\n/**\n * 标记属性的修改，同时触发监听函数\n * @param target 要标记的对象\n * @param prop   要标记的属性 特别的，false 表示原型，true 表示成员\n */\n\n\nfunction markChange(target, prop) {\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n\n  if (wait(target, prop)) {\n    execWatch(target, prop, Boolean);\n    return;\n  }\n\n  execWatch(target, prop);\n}\n/**\n * 观察对象属性的变化\n * @param target 要观察的对象\n * @param prop   要观察的属性名 特别的，false 表示原型，true 表示成员\n * @param fn     属性改变后触发的函数\n */\n\nfunction watchProp(target, prop, cb, disdeferable = false) {\n  if (typeof cb !== 'function') {\n    return () => {};\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return () => {};\n  }\n\n  [target, prop] = indexes;\n  const key = prop;\n  let map = watchList.get(target);\n\n  if (!map) {\n    map = new Map();\n    watchList.set(target, map);\n  }\n\n  const list = getMapValue(map, key, () => new Set());\n  const item = [safeify(cb), disdeferable];\n  list.add(item);\n  let removed = false;\n  return () => {\n    if (removed) {\n      return;\n    }\n\n    removed = true; // 从当前列表中移除\n\n    list.delete(item); // 从属性关联中删除\n\n    if (list.size) {\n      return;\n    }\n\n    if (!map) {\n      return;\n    }\n\n    map.delete(key); // 映射列表中删除\n\n    if (map.size) {\n      return;\n    }\n\n    watchList.delete(target);\n  };\n}\n\nfunction run(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  const postpone = options === null || options === void 0 ? void 0 : options.postpone;\n  let end = false;\n  /** 取消监听 */\n\n  function cancel() {\n    if (end) {\n      return false;\n    }\n\n    end = true;\n\n    if (!cancelList) {\n      return true;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (end) {\n      return false;\n    }\n\n    if (!thisRead.size) {\n      end = true;\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(obj, p, trigger, options === null || options === void 0 ? void 0 : options.disdeferable));\n  }\n\n  function stop() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  }\n  const thisRead = new Map();\n  const result = observe(thisRead, () => fn(stop), {\n    postpone\n  });\n  run(thisRead);\n\n  if (options === null || options === void 0 ? void 0 : options.resultOnly) {\n    return result;\n  }\n\n  return {\n    result,\n    stop\n  };\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction exec(cb, fn, options) {\n  if (typeof cb !== 'function') {\n    throw new Error('cb needs to be a function');\n  }\n\n  if (typeof fn === 'function') {\n    return run(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return run(cb, options, fn);\n}\n\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\nfunction create(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  /** 取消监听 */\n\n  function cancel() {\n    if (!cancelList) {\n      return false;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (!thisRead.size) {\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(obj, p, trigger, options === null || options === void 0 ? void 0 : options.disdeferable));\n  }\n\n  function exec(...p) {\n    cancel();\n    const thisRead = new Map();\n    const result = observe(thisRead, () => fn(...p), options);\n    run(thisRead);\n    return result;\n  }\n\n  exec.stop = () => {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  };\n\n  return exec;\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction monitor(cb, fn, options) {\n  if (typeof fn === 'function') {\n    return create(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return create(cb, options, fn);\n}\n\n/** 取消监听的方法 */\n\nconst values = new WeakSet();\nfunction isValue(x) {\n  return values.has(x);\n}\n/** 触发监听 */\n\nfunction valueOf() {\n  const value = this();\n\n  if (value === undefined) {\n    return value;\n  }\n\n  if (value === null) {\n    return value;\n  }\n\n  return value.valueOf();\n}\n\nfunction toString(...p) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value.toString === 'function') {\n    return value.toString(...p);\n  }\n\n  return String(value);\n}\n\nfunction toPrimitive(hint) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value[Symbol.toPrimitive] === 'function') {\n    return value[Symbol.toPrimitive](hint);\n  }\n\n  if (hint === 'string') {\n    return String(value);\n  }\n\n  if (hint === 'number') {\n    return Number(value);\n  }\n\n  return value;\n}\n\nfunction createValue(recover, setValue, stop = () => {}, change = () => {}) {\n  function set(v, marked = false) {\n    if (!setValue) {\n      return;\n    }\n\n    try {\n      setValue(v, () => {\n        marked = true;\n      });\n    } finally {\n      if (marked) {\n        trigger();\n      }\n    }\n  }\n\n  function get() {\n    markRead(value, 'value');\n    return recover();\n  }\n\n  const value = (...v) => {\n    if (v.length) {\n      set(v[0], v[1]);\n      return v[0];\n    }\n\n    return get();\n  };\n\n  Reflect.defineProperty(value, 'value', {\n    get,\n    set,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'valueOf', {\n    value: valueOf,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'toString', {\n    value: toString,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, Symbol.toPrimitive, {\n    value: toPrimitive,\n    enumerable: true,\n    configurable: true\n  });\n  let stopList = new Set();\n\n  function watch(cb, disdeferable) {\n    if (!stopList) {\n      return () => {};\n    }\n\n    const cancel = watchProp(value, 'value', () => cb(value, false), disdeferable);\n    let cancelled = false;\n\n    const stop = () => {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (stopList) {\n        stopList.delete(stop);\n      }\n\n      cancel();\n      safeCall(() => cb(value, true));\n    };\n\n    stopList.add(stop);\n    change();\n    return () => {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (stopList) {\n        stopList.delete(stop);\n      }\n\n      cancel();\n      change();\n    };\n  }\n\n  Reflect.defineProperty(value, 'watch', {\n    get() {\n      return watch;\n    },\n\n    set() {},\n\n    configurable: true\n  });\n\n  const trigger = () => markChange(value, 'value');\n\n  trigger.has = () => {\n    var _stopList;\n\n    return Boolean((_stopList = stopList) === null || _stopList === void 0 ? void 0 : _stopList.size);\n  };\n\n  trigger.stop = () => {\n    if (!stopList) {\n      return;\n    }\n\n    const list = stopList;\n    stopList = undefined;\n\n    for (const stop of [...list]) {\n      stop();\n    }\n  };\n\n  values.add(value);\n  let stopped = false;\n\n  value.stop = () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n    stop();\n    trigger.stop();\n  };\n\n  return {\n    value,\n    trigger\n  };\n}\n/**\n * 创建引用值\n * @param value 初始值\n * @param options 选项\n */\n\n\nfunction value(def) {\n  let source;\n  let proxyValue;\n  const {\n    value\n  } = createValue(() => proxyValue, (v, mark) => {\n    if (v === source) {\n      return;\n    }\n\n    source = v;\n    proxyValue = source;\n    mark();\n  });\n  value(def);\n  return value;\n}\nfunction computed(getter, setter, options) {\n  var _options, _options2;\n\n  if (typeof setter !== 'function') {\n    options = setter;\n    setter = undefined;\n  }\n\n  const setValue = setter;\n  const postpone = (_options = options) === null || _options === void 0 ? void 0 : _options.postpone;\n  const deferable = (_options2 = options) === null || _options2 === void 0 ? void 0 : _options2.deferable;\n  let source;\n  let proxyValue;\n  let stopped = false;\n  let computed = false;\n  let trigger;\n  const executable = monitor(changed => {\n    computed = !changed;\n\n    if (changed && trigger) {\n      trigger();\n    }\n  }, getter, {\n    postpone,\n    disdeferable: !deferable\n  });\n\n  function run() {\n    computed = true;\n\n    try {\n      source = executable();\n      proxyValue = source;\n      return proxyValue;\n    } catch (e) {\n      if (!stopped) {\n        computed = false;\n      }\n\n      throw e;\n    }\n  }\n\n  let value;\n  ({\n    value,\n    trigger\n  } = createValue(() => computed || stopped ? proxyValue : run(), setValue && (v => setValue(v)), () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n\n    if (computed) {\n      return;\n    }\n\n    run();\n  }));\n  return value;\n}\n\nfunction createValue$1(props, key, def, set) {\n  function setValue(value, setted) {\n    if (!set) {\n      return;\n    }\n\n    set(value, setted);\n  }\n\n  return computed(() => {\n    const p = props[key];\n\n    if (p === undefined && def) {\n      return def();\n    }\n\n    return isValue(p) ? p() : p;\n  }, v => {\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n      setValue(v, true);\n      return;\n    }\n\n    if (p === undefined && def) {\n      def(v);\n      setValue(v, false);\n      return;\n    }\n\n    setValue(v, false);\n  });\n}\n\nfunction valueify(props, key, def, set) {\n  if (!key) {\n    return (k, d, s) => createValue$1(props, k, d, s);\n  }\n\n  if (!Array.isArray(key)) {\n    return createValue$1(props, key, def, set);\n  }\n\n  const r = Object.create(null);\n\n  for (const k of key) {\n    const value = createValue$1(props, k, def && def(k), set && ((v, s) => set(v, s, k)));\n    Reflect.defineProperty(props, k, {\n      get() {\n        return value();\n      },\n\n      set(v) {\n        value.value = v;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return r;\n}\nfunction mixValue(source, props = Reflect.ownKeys(source), set) {\n  const p = Object.create(source);\n\n  if (Array.isArray(props)) {\n    for (const key of props) {\n      const value = createValue$1(source, key, undefined, set && ((v, s) => set(v, s, key)));\n      Reflect.defineProperty(p, key, {\n        get() {\n          return value();\n        },\n\n        set(v) {\n          value.value = v;\n        },\n\n        configurable: true,\n        enumerable: true\n      });\n    }\n\n    return p;\n  }\n\n  const keys = Reflect.ownKeys(props);\n\n  for (const key of keys) {\n    const value = createValue$1(source, key, props[key], set && ((v, s) => set(v, s, key)));\n    Reflect.defineProperty(p, key, {\n      get() {\n        return value();\n      },\n\n      set(v) {\n        value.value = v;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return p;\n}\n\nfunction createAsValue(props, key) {\n  return computed(() => {\n    const p = props[key];\n    return isValue(p) ? p() : p;\n  }, v => {\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n    } else {\n      props[key] = v;\n    }\n  });\n}\n\nfunction asValue(props, key) {\n  if (arguments.length >= 2) {\n    return createAsValue(props, key);\n  }\n\n  return k => createAsValue(props, k);\n}\n\nfunction merge(cb) {\n  let oldValue;\n  let ran = false;\n  return (v, stopped) => {\n    if (stopped) {\n      return cb(v, stopped);\n    }\n\n    const newValue = v();\n\n    if (newValue === oldValue && ran) {\n      return;\n    }\n\n    ran = true;\n    oldValue = newValue;\n    cb(v, stopped);\n  };\n}\n\nfunction defineProperty(obj, key, val) {\n  return Reflect.defineProperty(obj, key, {\n    get() {\n      markRead(obj, key);\n      return val;\n    },\n\n    set(v) {\n      if (v === val) {\n        return;\n      }\n\n      val = v;\n      markChange(obj, key);\n    },\n\n    configurable: true,\n    enumerable: true\n  });\n}\nfunction createObject(keys, base = {}, create) {\n  const obj = create || base === null ? Object.create(base) : base;\n\n  for (const key of keys) {\n    let val = obj[key];\n    Reflect.defineProperty(obj, key, {\n      get() {\n        markRead(obj, key);\n        return val;\n      },\n\n      set(v) {\n        if (v === val) {\n          return;\n        }\n\n        val = v;\n        markChange(obj, key);\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  return obj;\n}\nfunction get(obj, key) {\n  markRead(obj, key);\n  return obj[key];\n}\nfunction set(obj, key, v) {\n  if (v === obj[key]) {\n    return v;\n  }\n\n  obj[key] = v;\n  markChange(obj, key);\n  return v;\n}\n\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable$1(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n\nlet getValue;\n/**\n * 获取被代理对象\n * @param obj  要被代理的对象\n * @param nest 递归代理的层数\n */\n\nfunction encase(value, nest = 0) {\n  if (!encashable$1(value)) {\n    return value;\n  }\n\n  const original = recover(value);\n  const nestLayer = nest === true ? Infinity : nest || 0;\n  const proxy = new Proxy(original, {\n    set(target, prop, value, receiver) {\n      if (nest === false) {\n        return Reflect.set(target, prop, value, receiver);\n      }\n\n      const has = Reflect.has(target, prop);\n      const old = Reflect.get(target, prop, receiver);\n      const modified = Reflect.set(target, prop, value, encase(receiver));\n\n      if (!modified) {\n        return modified;\n      }\n\n      if (has !== Reflect.has(target, prop)) {\n        markChange(receiver, true);\n      }\n\n      if (old !== Reflect.get(target, prop, receiver)) {\n        markChange(receiver, prop);\n      }\n\n      return modified;\n    },\n\n    get(target, prop, receiver) {\n      if (getValue === proxy) {\n        if (prop === '__monitorable__recover__') {\n          getValue = original;\n          return;\n        }\n      }\n\n      if (nest === false) {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      markRead(receiver, prop);\n      const value = Reflect.get(target, prop, encase(receiver));\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    setPrototypeOf(target, proto) {\n      if (nest === false) {\n        return Reflect.setPrototypeOf(target, proto);\n      }\n\n      const oldProto = Reflect.getPrototypeOf(target);\n      const modified = Reflect.setPrototypeOf(target, proto);\n\n      if (modified && oldProto !== proto) {\n        markChange(target, false);\n        markChange(proxy, false);\n      }\n\n      return modified;\n    },\n\n    getPrototypeOf(target) {\n      if (nest === false) {\n        return Reflect.getPrototypeOf(target);\n      }\n\n      markRead(target, false);\n      markRead(proxy, false);\n      const value = Reflect.getPrototypeOf(target);\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    defineProperty(target, prop, attr) {\n      if (nest === false) {\n        return Reflect.defineProperty(target, prop, attr);\n      }\n\n      let changed = true;\n\n      if ('value' in attr) {\n        const desc = Reflect.getOwnPropertyDescriptor(target, prop);\n\n        if (desc && 'value' in desc && recover(attr.value) === recover(desc.value)) {\n          changed = false;\n        }\n      }\n\n      const modified = Reflect.defineProperty(target, prop, attr);\n\n      if (changed && modified) {\n        markChange(target, prop);\n        markChange(proxy, prop);\n      }\n\n      return modified;\n    },\n\n    getOwnPropertyDescriptor(target, prop) {\n      if (nest === false) {\n        return Reflect.getOwnPropertyDescriptor(target, prop);\n      }\n\n      markRead(target, prop);\n      markRead(proxy, prop);\n      return Reflect.getOwnPropertyDescriptor(target, prop);\n    },\n\n    deleteProperty(target, prop) {\n      if (nest === false) {\n        return Reflect.deleteProperty(target, prop);\n      }\n\n      const has = Reflect.has(target, prop);\n      const deleted = Reflect.deleteProperty(target, prop);\n\n      if (has && !Reflect.has(target, prop)) {\n        markChange(target, prop);\n        markChange(target, true);\n        markChange(proxy, prop);\n        markChange(proxy, true);\n      }\n\n      return deleted;\n    },\n\n    ownKeys(target) {\n      if (nest === false) {\n        return Reflect.ownKeys(target);\n      }\n\n      markRead(target, true);\n      markRead(proxy, true);\n      return Reflect.ownKeys(target);\n    },\n\n    has(target, prop) {\n      if (nest === false) {\n        return Reflect.has(target, prop);\n      }\n\n      markRead(target, true);\n      markRead(proxy, true);\n      return Reflect.has(target, prop);\n    }\n\n  });\n  return proxy;\n}\n/** 获取被代理的原始值 */\n\nfunction recover(v) {\n  if (!v) {\n    return v;\n  }\n\n  if (!encashable$1(v)) {\n    return v;\n  }\n\n  let value = v;\n\n  try {\n    getValue = v;\n    value = v.__monitorable__recover__;\n  } catch (_unused) {}\n\n  value = getValue;\n  getValue = false;\n\n  if (!value) {\n    return v;\n  }\n\n  if (typeof value === 'object') {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    return value;\n  }\n\n  return v;\n}\nfunction equal(a, b) {\n  return recover(a) === recover(b);\n}\n\n\n\nvar Monitorable = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tprintError: printError,\n\tsetPrintError: setPrintError,\n\tencashable: encashable,\n\tsafeify: safeify,\n\tsafeCall: safeCall,\n\tgetIndexes: getIndexes,\n\tgetMapValue: getMapValue,\n\tmarkRead: markRead,\n\tobserve: observe,\n\tpostpone: postpone,\n\tmarkChange: markChange,\n\twatchProp: watchProp,\n\texec: exec,\n\tmonitor: monitor,\n\tisValue: isValue,\n\tvalue: value,\n\tcomputed: computed,\n\tvalueify: valueify,\n\tmixValue: mixValue,\n\tasValue: asValue,\n\tmerge: merge,\n\tdefineProperty: defineProperty,\n\tcreateObject: createObject,\n\tget: get,\n\tset: set,\n\tencase: encase,\n\trecover: recover,\n\tequal: equal\n});\n\nexport default Monitorable;\nexport { asValue, computed, createObject, defineProperty, encase, encashable, equal, exec, get, getIndexes, getMapValue, isValue, markChange, markRead, merge, mixValue, monitor, observe, postpone, printError, recover, safeCall, safeify, set, setPrintError, value, valueify, watchProp };\n//# sourceMappingURL=monitorable.esm.js.map\n","export {\n\tprintError, safeify,\n\tmarkRead, markChange, postpone,\n\texec, monitor,\n\tvalue, computed, isValue, valueify, asValue, mixValue,\n\tdefineProperty, createObject, get, set,\n\tencase,\n} from 'monitorable';\n\n\nexport default function installMonitorable(\n\tapi?: typeof import('monitorable'),\n): void {\n}\n","import { IRenderer, Devtools } from '../type';\nimport { isProduction } from '../constant';\nimport installDevtools from './devtools';\nimport installRender from './renderer';\nimport installMonitorable from './monitorable';\n\n\nexport * from './devtools';\nexport * from './renderer';\n\n\nexport interface InstallOptions {\n\tmonitorable?: typeof import('monitorable');\n\trenderer?: IRenderer;\n\tdevtools?: Devtools;\n}\n\n\nexport default function install(apis: InstallOptions): void {\n\tinstallMonitorable(apis.monitorable);\n\tinstallRender(apis.renderer);\n\tif (!isProduction) {\n\t\tinstallDevtools(apis.devtools);\n\t}\n}\n","export const ScopeSlot = 'core:scopeslot';\nexport const Render = 'core:render';\nexport const Slot = 'core:slot';\nexport const Container = 'core:container';\nexport const Template = 'template';\nexport const Fragment = Template;\n","/**\n * ref 类 API\n */\nimport { RefValue, Ref, RefSet, Entity, RefEntityValue } from '../type';\nimport { value } from '../install/monitorable';\n\nfunction createEntitySetRef<T extends Entity<any, any>>(set: RefSet<T>): Ref<any, T> {\n\treturn function refValue(_0, _1, entity, state): void {\n\t\tif (state === true) {\n\t\t\tset.add(entity);\n\t\t\treturn;\n\t\t}\n\t\tif (state === false) {\n\t\t\tset.delete(entity);\n\t\t}\n\t};\n}\nfunction createExposedSetRef<T extends object>(set: RefSet<T>): Ref<T, any> {\n\treturn function refValue(newNode, oldNode): void {\n\t\tif (newNode === undefined) {\n\t\t\tif (oldNode !== undefined) {\n\t\t\t\tset.delete(oldNode);\n\t\t\t}\n\t\t\treturn;\n\t\t} if (oldNode === undefined) {\n\t\t\tset.add(newNode);\n\t\t\treturn;\n\t\t} if (typeof set.replace === 'function') {\n\t\t\tset.replace(newNode, oldNode);\n\t\t\treturn;\n\t\t}\n\t\tset.delete(oldNode);\n\t\tset.add(newNode);\n\t};\n}\nfunction createEntityRefValue<T extends Entity<any, any>>(watch?: boolean): RefEntityValue<T> {\n\tconst obj =  watch ? value<T | undefined>(undefined) : { value: undefined };\n\tfunction refValue(_1: any, _2: any, entity: T, state?: boolean): void {\n\t\tobj.value = state === false ? entity : undefined;\n\t}\n\tReflect.defineProperty(refValue, 'value', {\n\t\tget() { return obj.value; },\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n\treturn refValue as unknown as RefEntityValue<T>;\n}\nfunction createExposedRefValue<T extends object>(watch?: boolean): RefValue<T> {\n\tconst obj =  watch ? value<T | undefined>(undefined) : { value: undefined };\n\tfunction refValue(newNode: T | undefined): void {\n\t\tobj.value = newNode;\n\t}\n\tReflect.defineProperty(refValue, 'value', {\n\t\tget() { return obj.value; },\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n\treturn refValue as unknown as RefValue<T>;\n}\n\nexport function ref<T extends object>(watch?: boolean, isEntity?: false): RefValue<T>;\nexport function ref<T extends Entity<any, any>>(watch: boolean, isEntity: true): RefEntityValue<T>;\nexport function ref<T extends object>(set: RefSet<T>, isEntity?: false): Ref<T, any>;\nexport function ref<T extends Entity<any, any>>(set: RefSet<T>, isEntity: true): Ref<any, T>;\nexport function ref<\n\tT extends object\n>(\n\tset?: boolean | RefSet<T>,\n\tisEntity?: boolean,\n): Ref<T, any> | RefValue<T> | RefEntityValue<T & Entity<any, any>> | Ref<any, T & Entity<any, any>> {\n\tif (set && (typeof set === 'function' || typeof set === 'object')) {\n\t\treturn isEntity ? createEntitySetRef(set as any) : createExposedSetRef(set);\n\t}\n\treturn isEntity ? createEntityRefValue(set) : createExposedRefValue(set);\n}\n","import { ComponentEntity, UseHook, Label } from '../type';\nimport { assert } from '../Error';\nimport { isProduction } from '../constant';\n\n\n/** 当前正在执行的对象 */\nexport let current: ComponentEntity<any, any> | undefined;\nlet isInit = false;\nlet root: UseHook[] = [];\nlet hookList: UseHook[] = [];\nlet runs: UseHook[] = [];\nexport function getUseHookValue<T>(\n\tname: string,\n\tlib: string,\n\tinit: (entity: ComponentEntity<any, any>) => T,\n): T {\n\tassert(\n\t\tcurrent,\n\t\t`Function \\`${ name }\\` can only be called within a cycle.`,\n\t\t'life',\n\t);\n\tif (isInit) {\n\t\tconst value = init(current);\n\t\thookList.push({ name, lib, value });\n\t\treturn value;\n\t}\n\tconst next = hookList.shift();\n\tassert(next && next.name === name && next.lib === lib && !next.list, '');\n\tif (!isProduction) {\n\t\truns.push({ name, lib });\n\t}\n\treturn next.value;\n}\nexport function execUseHooks<T>(\n\tname: string,\n\tlib: string,\n\trun: (entity: ComponentEntity<any, any>\n\t) => T,\n): T {\n\tassert(\n\t\tcurrent,\n\t\t`Function \\`${ name }\\` can only be called within a cycle.`,\n\t\t'life',\n\t);\n\tif (isInit) {\n\t\tconst list: UseHook[] = [];\n\t\thookList.push({ name, lib, list });\n\t\tconst parent = hookList;\n\t\thookList = list;\n\t\ttry {\n\t\t\treturn run(current);\n\t\t} finally {\n\t\t\thookList = parent;\n\t\t}\n\t}\n\tconst next = hookList.shift();\n\tassert(next && next.name === name && next.lib === lib && next.list, '');\n\tconst parent = hookList;\n\tconst list = [...next.list];\n\thookList = list;\n\n\tif (isProduction) {\n\t\ttry {\n\t\t\tconst ret = run(current);\n\t\t\tassert(!list.length, '');\n\t\t\treturn ret;\n\t\t} finally {\n\t\t\thookList = parent;\n\t\t}\n\t} else {\n\t\tconst runList: UseHook[] = [];\n\t\truns.push({ name, lib, list: runList });\n\t\tconst runParent = runs;\n\t\truns = runList;\n\t\ttry {\n\t\t\tconst ret = run(current);\n\t\t\tassert(!list.length, '');\n\t\t\treturn ret;\n\t\t} finally {\n\t\t\thookList = parent;\n\t\t\truns = runParent;\n\t\t}\n\t}\n\n\n}\n\nexport let setLabels: ((l: Label[] | undefined) => void) | undefined;\n\nexport function runShell<T>(\n\tsetLabel: typeof setLabels,\n\tfn: () => T,\n): T {\n\tif (!isProduction) {\n\t\tconst oldSetLabel = setLabels;\n\t\tsetLabels = setLabel;\n\t\ttry {\n\t\t\treturn fn();\n\t\t} finally {\n\t\t\tsetLabels = oldSetLabel;\n\t\t}\n\t}\n\treturn fn();\n}\n\nexport function runCurrent<T>(\n\tentity: ComponentEntity<any, any>,\n\tsetLabel: typeof setLabels,\n\tfn: () => T,\n): T {\n\n\tconst oldSetLabel = setLabels;\n\tif (!isProduction) {\n\t\tsetLabels = setLabel;\n\t}\n\n\tconst oldEntity = current;\n\tcurrent = entity;\n\n\tconst oldIsInit = isInit;\n\tisInit = !entity.created;\n\tconst oldRuns = runs;\n\truns = [];\n\tconst oldRoot = root;\n\troot = current.$_useHookValues;\n\tconst oldHookList = hookList;\n\thookList = isInit ? root : [...root];\n\n\ttry {\n\t\tconst ret = fn();\n\t\tassert(\n\t\t\tisInit || !hookList.length,\n\t\t\t'Inconsistent number of useService executions',\n\t\t\t'life',\n\t\t);\n\t\treturn ret;\n\t} finally {\n\t\tcurrent = oldEntity;\n\t\tisInit = oldIsInit;\n\t\thookList = oldHookList;\n\t\truns = oldRuns;\n\t\troot = oldRoot;\n\n\t\tif (!isProduction) {\n\t\t\tsetLabels = oldSetLabel;\n\t\t}\n\t}\n}\n\nexport function checkCurrent(\n\tname: string,\n\tinitOnly = false,\n): ComponentEntity<any, any> {\n\tassert(\n\t\tcurrent,\n\t\t`Function \\`${ name }\\` can only be called within a cycle.`,\n\t\t'life',\n\t);\n\tassert(\n\t\t!initOnly || !current.created,\n\t\t`Function \\`${ name }\\` can only be called at initialization time.`,\n\t\t'life',\n\t);\n\treturn current;\n}\n","import { safeify } from './install/monitorable';\nimport { Hook, HookName, HookEntity, ComponentEntity, ContainerEntity } from './type';\nconst hooks: Record<string, Set<Hook>> = Object.create(null);\n\nexport function setHook<H extends HookName, T extends HookEntity<any, any>>(\n\tid: H,\n\thook: Hook<T>,\n\tentity: T,\n): () => void;\nexport function setHook<T extends HookEntity<any, any>>(\n\tid: string,\n\thook: Hook<T>,\n\tentity: T,\n): () => void;\nexport function setHook<H extends HookName>(\n\tid: H,\n\thook: Hook,\n\tentity?: HookEntity<any, any>,\n): () => void;\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: HookEntity<any, any>,\n): () => void;\n\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: HookEntity<any, any>,\n): () => void {\n\tlet list = entity?.$_hooks || hooks;\n\tif (!list) { return () => {}; }\n\thook = safeify(hook);\n\tlet set = list[id];\n\tif (!set) {\n\t\tset = new Set();\n\t\tlist[id] = set;\n\t}\n\tset.add(hook);\n\treturn () => set.delete(hook);\n}\n\nexport function callHook<H extends HookName>(\n\tid: H,\n\tentity: ComponentEntity<any, any> | ContainerEntity<any>,\n): void;\nexport function callHook(\n\tid: string,\n\tentity: ComponentEntity<any, any> | ContainerEntity<any>,\n): void;\nexport function callHook(\n\tid: string,\n\tentity: ComponentEntity<any, any> | ContainerEntity<any>,\n): void {\n\tif (!entity) { return; }\n\tfor (const hook of entity.$_hooks[id] || []) {\n\t\thook(entity);\n\t}\n\tfor (const hook of hooks[id] || []) {\n\t\thook(entity);\n\t}\n}\n","/**********************************\n * 组件上下文环境专用 API\n * @description 简单组件不支持\n **********************************/\nimport { Value, WatchCallback, HookName, Service, CancelWatch } from '../type';\nimport { checkCurrent } from '../extends/current';\nimport { setHook } from '../hook';\nimport { isValue, value, computed } from './state';\nimport { getUseHookValue } from '../extends/current';\n\n\n/**********************************\n * 状态管理类 API\n **********************************/\n/**\n * 监听指定值的变化\n * @description 本质是调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 被监听的值\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: Value<T>,\n\tcb: WatchCallback<T>,\n\trun?: boolean,\n): () => void;\n/**\n * 监听指定值的变化\n * @description 本质是创建调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 用于计算观测值的函数\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: () => T,\n\tcb: (v: T, stopped: boolean) => void,\n\trun?: boolean,\n): () => void;\nexport function watch<T>(\n\tvalue: Value<T> | (() => T),\n\tcb: (v: Value<T> | T, stopped: boolean) => void,\n\trun?: boolean,\n): () => void {\n\tconst entity = checkCurrent('watch');\n\tif (typeof value !== 'function') { return () => {}; }\n\tlet stop: CancelWatch;\n\tif (isValue(value)) {\n\t\tstop = value.watch(cb);\n\t\tcb(value, false);\n\t} else {\n\t\tconst v = computed(value);\n\t\tstop = v.watch((v, s) => cb(v(), s));\n\t\tcb(v(), false);\n\t}\n\tsetHook('beforeDestroy', () => stop(), entity);\n\treturn stop;\n}\n\nexport function useValue(): Value<any>;\nexport function useValue<T>(fn: () => T): T;\nexport function useValue<T>(fn?: () => T): T | Value<any>;\nexport function useValue<T>(fn?: () => T): T | Value<any> {\n\treturn getUseHookValue<T | Value<any>>(\n\t\t'useValue',\n\t\t'core',\n\t\ttypeof fn === 'function' ? fn : () => value(undefined),\n\t);\n\n}\n\n/**********************************\n * 服务 API\n **********************************/\nexport function useService<T, P extends any[]>(\n\tfn: Service<T, P>,\n\t...p: P\n): T {\n\treturn getUseHookValue<T>(\n\t\t'useService',\n\t\t'core',\n\t\tentity => fn(entity, ...p),\n\t);\n}\n\nexport function byService<T, P extends any[]>(\n\tfn: Service<T, P>,\n\t...p: P\n): T {\n\tconst entity = checkCurrent('byService');\n\treturn fn(entity, ...p);\n}\n\n\n/**********************************\n * 钩子类 API\n **********************************/\n/**\n * 为当前组件注册钩子\n * @param name 钩子名称\n * @param hook 钩子\n * @param initOnly 是否仅在初始化时有效\n */\nexport function hook<H extends HookName>(\n\tname: H,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void) {\n\tconst entity = checkCurrent('setHook');\n\tif (initOnly && entity.created) { return undefined; }\n\treturn setHook(name, () => hook(), entity);\n}\n","export const rendererSymbol = Symbol.for('renderer');\nexport const nameSymbol = Symbol.for('name');\nexport const componentsSymbol = Symbol.for('components');\nexport const propsSymbol = Symbol.for('props');\nexport const componentValueSymbol = Symbol.for('$$$componentValue$$$');\n\n\nexport const objectTypeSymbol = Symbol.for('$$$objectType$$$');\nexport const objectTypeSymbolElement = '$$$objectType$$$Element';\nexport const objectTypeSymbolDeliverComponent = '$$$objectType$$$DeliverComponent';\nexport const objectTypeSymbolNativeComponent = '$$$objectType$$$NativeComponentNode';\nexport const objectTypeSymbolSimpleComponent = '$$$objectType$$$SimpleComponent';\nexport const objectTypeSymbolShellComponent = '$$$objectType$$$ShellComponent';\nexport const objectTypeSymbolRenderComponent = '$$$objectType$$$RenderComponent';\nexport const objectTypeSymbolContainerComponent = '$$$objectType$$$ContainerComponent';\nexport const objectTypeSymbolElementComponent = '$$$objectType$$$ElementComponent';\nexport const objectTypeSymbolHookEntity = '$$$objectType$$$HookEntity';\nexport const objectTypeSymbolRootEntity = '$$$objectType$$$RootEntity';\n\n\nexport const deliverKeySymbol = Symbol.for('$$$deliverKey$$$');\nexport const deliverDefaultSymbol = Symbol.for('$$$deliverDefault$$$');\n","import {\n\tRenderComponent,\n\tSimpleComponent,\n\tContainerComponent,\n\tDeliverComponent,\n\tNativeComponent,\n\tShellComponent,\n\tElementComponent,\n} from './type';\nimport {\n\tobjectTypeSymbol,\n\tobjectTypeSymbolSimpleComponent,\n\tobjectTypeSymbolNativeComponent,\n\tobjectTypeSymbolRenderComponent,\n\tobjectTypeSymbolDeliverComponent,\n\tobjectTypeSymbolContainerComponent,\n\tobjectTypeSymbolShellComponent,\n\tobjectTypeSymbolElementComponent,\n} from './symbols';\n\nexport function isSimpleComponent(v: any): v is SimpleComponent<any, any> {\n\tif (typeof v !== 'function') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolSimpleComponent;\n}\nexport function isShellComponent(v: any): v is ShellComponent<any, any> {\n\tif (typeof v !== 'function') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolShellComponent;\n}\nexport function isNativeComponent(v: any):  v is NativeComponent<any, any, any> {\n\tif (typeof v !== 'function') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolNativeComponent;\n}\nexport function isRenderComponent(v: any): v is RenderComponent<any, any, any> {\n\tif (typeof v !== 'function') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolRenderComponent;\n}\nexport function isContainerComponent(v: any): v is ContainerComponent<any, any> {\n\tif (typeof v !== 'function') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolContainerComponent;\n}\nexport function isElementComponent(v: any): v is ElementComponent<any, any> {\n\tif (typeof v !== 'function') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolElementComponent;\n}\nexport function isDeliverComponent(v: any): v is DeliverComponent<any> {\n\tif (typeof v !== 'function') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolDeliverComponent;\n}\n\nexport {\n\tisDeliverComponent as isDeliver,\n};\n","import {\n\tTag,\n\tElement,\n\tElementIteratorOptions,\n\tComponent,\n\tDeliverComponent,\n\tRenderComponent,\n\tNode,\n} from '../type';\nimport {\n\tobjectTypeSymbol,\n\tobjectTypeSymbolElement,\n} from '../symbols';\nimport {\n\tTemplate, Render,\n} from './tags';\nimport {\n\tisSimpleComponent,\n} from '../is';\n\n/**\n * 判读是否为元素\n */\nexport function isElement(v: any): v is Element {\n\tif (!v) { return false; }\n\tif (typeof v !== 'object') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolElement;\n}\nexport function isFragmentElement(v: any): v is Element<'template'> {\n\tif (!isElement(v)) { return false; }\n\tconst { tag } = v;\n\tif (typeof tag !== 'string') { return false; }\n\treturn tag.toLowerCase() === 'template';\n}\nexport function isRenderElement(v: any): v is Element<typeof Render> {\n\tif (!isElement(v)) { return false; }\n\tconst { tag } = v;\n\tif (typeof tag !== 'string') { return false; }\n\treturn tag.toLowerCase() === Render;\n}\nexport function isSimpleElement(v: any): boolean {\n\treturn isElement(v) && isSimpleComponent(v.tag);\n}\n\nexport function createElement<T extends DeliverComponent<any>>(\n\ttag: T,\n\tattrs?: (T extends DeliverComponent<infer P> ? {value: P} : never),\n\t...children: any[]\n): Element;\nexport function createElement<P extends object, T extends Component<P> | RenderComponent<P, any, any>>(\n\ttag: T,\n\tattrs?: P,\n\t...children: any[]\n): Element;\nexport function createElement<T extends string>(\n\ttag: T,\n\tattrs?: Record<string, any>,\n\t...children: any[]\n): Element;\n\nexport function createElement(\n\ttag: any,\n\tattrs?: Record<string, any> | null,\n\t...children: any[]\n): Element;\nexport function createElement(\n\ttag: any,\n\tattrs?: Record<string, any> | null,\n\t...children: any[]\n): Element {\n\tconst attrProps = attrs ? {...attrs} : {};\n\tconst props: Record<string, any> = {};\n\tfor (const n of Object.keys(attrProps)) {\n\t\tif (n === '@') {\n\t\t\tprops['n:on'] = attrProps[n];\n\t\t\tcontinue;\n\t\t}\n\t\tif (n[0] === '!') {\n\t\t\tprops[`n:${ n.substr(1) }`] = attrProps[n];\n\t\t\tcontinue;\n\t\t}\n\t\tif (n[0] === '@') {\n\t\t\tprops[`on:${ n.substr(1) }`] = attrProps[n];\n\t\t\tcontinue;\n\t\t}\n\t\tif (n.substr(0, 2) === 'n-') {\n\t\t\tprops[`n:${ n.substr(2) }`] = attrProps[n];\n\t\t\tcontinue;\n\t\t}\n\t\tif (n.substr(0, 3) === 'on-') {\n\t\t\tconst fn = attrProps[n];\n\t\t\tif (typeof fn === 'function' || fn === null || fn === undefined) {\n\t\t\t\tprops[`on:${ n.substr(3) }`] = fn;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (n.substr(0, 5) === 'hook-') {\n\t\t\tconst fn = attrProps[n];\n\t\t\tif (typeof fn === 'function' || fn === null || fn === undefined) {\n\t\t\t\tprops[`hook:${ n.substr(5) }`] = fn;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (n.substr(0, 5) === 'data-') {\n\t\t\tprops[`data:${ n.substr(5) }`] = attrProps[n];\n\t\t}\n\t\tprops[n] = attrProps[n];\n\t}\n\treturn createElementBase(tag, props, ...children);\n}\n\n\nexport function createElementBase<T extends DeliverComponent<any>>(\n\ttag: T,\n\tattrs?: (T extends DeliverComponent<infer P> ? {value: P} : never),\n\t...children: any[]\n): Element;\nexport function createElementBase<P extends object, T extends Component<P> | RenderComponent<P, any, any>>(\n\ttag: T,\n\tattrs?: P,\n\t...children: any[]\n): Element;\nexport function createElementBase<T extends string>(\n\ttag: T,\n\tattrs?: Record<string, any>,\n\t...children: any[]\n): Element;\nexport function createElementBase<T extends Tag<any>>(\n\ttag: T,\n\tattrs?: Record<string, any> | null,\n\t...children: any[]\n): Element;\nexport function createElementBase<T extends Tag<any>>(\n\ttag: T,\n\tattrs?: Record<string, any> | null,\n\t...children: any[]\n): Element {\n\tconst props: Record<string, any> = typeof attrs === 'object' && attrs || {};\n\tconst node: Element = {\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\ttag,\n\t\tprops,\n\t\tchildren,\n\t\tkey: undefined,\n\t};\n\tif ('n:key' in props) { node.key = props['n:key']; }\n\tif ('n:slot' in props) { node.slot = props['n:slot']; }\n\treturn node;\n}\n\nexport function createRenderElement(\n\trender: (_?: any) => Node,\n\t{slot, key}: {slot?: string, key?: string} = {},\n): Element {\n\tconst node: Element = {\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\ttag: Render,\n\t\tprops: {\n\t\t\t'n:key': key,\n\t\t\t'n:slot': slot,\n\t\t},\n\t\tchildren: [render],\n\t\tkey, slot,\n\t};\n\treturn node;\n}\n\n\nexport function elements(\n\tnode: any,\n\topt: ElementIteratorOptions = {},\n): any[] {\n\tif (Array.isArray(node)) {\n\t\tconst list: any[][] = [];\n\t\tfor (let n of node) {\n\t\t\tlist.push(elements(n, opt));\n\t\t}\n\t\treturn ([] as any[]).concat(...list);\n\t}\n\tif (!isElement(node)) { return [node]; }\n\tlet { tag } = node;\n\tif (!tag) { return [node]; }\n\n\tif (tag === Template) {\n\t\treturn elements(node.children, opt);\n\t}\n\tif (!isSimpleComponent(tag)) { return [node]; }\n\tconst { simple } = opt;\n\tif (Array.isArray(simple)) {\n\t\tif (simple.includes(tag)) { return [node]; }\n\t} else if (typeof simple === 'function') {\n\t\tif (simple(tag)) { return [node]; }\n\t} else if (simple) {\n\t\treturn [node];\n\t}\n\treturn elements(node.children, opt);\n}\nexport function equal(a: any, b: any): boolean {\n\tif (Object.is(a, b)) { return true; }\n\tif (!a) { return false; }\n\tif (!b) { return false; }\n\tif (typeof a !== 'object') { return false; }\n\tif (typeof b !== 'object') { return false; }\n\tif (Array.isArray(a)) {\n\t\tif (!Array.isArray(b)) { return false; }\n\t\tif (a.length !== b.length) { return false; }\n\t\tfor (let i = a.length - 1; i >= 0; i--) {\n\t\t\tif (!equal(a[i], b[i])) { return false; }\n\t\t}\n\t\treturn true;\n\t}\n\tif (Array.isArray(b)) { return false; }\n\tif (!isElement(a)) { return false; }\n\tif (!isElement(b)) { return false; }\n\tif (a.tag !== b.tag) { return false; }\n\tif (a.execed !== b.execed) { return false; }\n\tif (a.inserted !== b.inserted) { return false; }\n\tif (a.isDefault !== b.isDefault) { return false; }\n\tif (a.key !== b.key) { return false; }\n\tif (a.slot !== b.slot) { return false; }\n\tconst aprops = a.props;\n\tconst bprops = b.props;\n\tif (Object.is(aprops, bprops)) { return equal(a.children, b.children); }\n\tif (!aprops) { return false; }\n\tif (!bprops) { return false; }\n\tif (typeof aprops !== 'object') { return false; }\n\tif (typeof bprops !== 'object') { return false; }\n\tconst aKeys = new Set(Object.keys(aprops));\n\tconst bKeys = Object.keys(bprops);\n\tif (aKeys.size !== bKeys.length) { return false; }\n\tfor (const k of bKeys) {\n\t\tif (!aKeys.has(k)) { return false; }\n\t\tif (aprops[k] !== bprops[k]) { return false; }\n\t}\n\treturn equal(a.children, b.children);\n}\n\nexport function createTemplateElement(...children: any[]): Element {\n\treturn {\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\ttag: Template,\n\t\tchildren,\n\t};\n}\n","import { isProduction } from '../constant';\nimport { Label } from '../type';\nimport { setLabels } from '../extends/current';\n\n\nexport function label(...label: (string | Label)[]): void {\n\tif (!isProduction) {\n\t\tconst labels = label.filter(Boolean).map(t => typeof t === 'string' ? {text: t} : t);\n\t\tif (!setLabels) { return; }\n\t\tsetLabels(labels);\n\n\t}\n}\n","import { NativeNode, MountNode, MountedNode } from '../type';\nimport { isProduction } from '../constant';\nimport { markRead, markChange } from '../install/monitorable';\n\nlet ids = 0;\nconst Nodes: {[key: number]: MountNode} = {};\nlet IdMap: undefined | WeakMap<NativeNode, number>;\nif (!isProduction) {\n\tIdMap = new WeakMap();\n}\nexport function createMountedNode(\n\tn: MountNode,\n\tid?: number,\n): MountedNode {\n\tif (!isProduction) {\n\t\tid = id || ++ids;\n\t\tconst { node } = n;\n\t\tif (node && IdMap) { IdMap.set(node, id); }\n\t\tconst newNode = {...n, id} as MountedNode;\n\t\tNodes[id] = newNode;\n\t\tmarkChange(Nodes, id);\n\t\treturn newNode;\n\t}\n\treturn {...n, id: 0} as MountedNode;\n}\n\nexport function recoveryMountedNode(node: MountedNode): void {\n\tif (!isProduction) {\n\t\tdelete Nodes[node.id];\n\t}\n}\n\nexport function getNode(\n\tid: number | NativeNode,\n): MountNode | undefined {\n\tif (!isProduction) {\n\t\tif (typeof id !== 'number') {\n\t\t\tid = IdMap?.get(id) || -1;\n\t\t}\n\t\tmarkRead(Nodes, id);\n\t\treturn Nodes[id];\n\t}\n\treturn undefined;\n}\n","import {\n\tIRenderer,\n\tMountedNode,\n\tHookName,\n\tLabel,\n\tMountOptions,\n} from '../../type';\nimport { isProduction } from '../../constant';\nimport ContainerProxy from './ContainerProxy';\nimport { exec, defineProperty } from '../../install/monitorable';\nimport ComponentProxy from './ComponentProxy';\n\nlet completeList: (() => void)[] | undefined;\nexport function setCompleteList(list?: (() => void)[]): void {\n\tcompleteList = list;\n}\nexport function complete(it: () => void): void {\n\tif (!completeList) {\n\t\tit();\n\t} else {\n\t\tcompleteList.push(it);\n\t}\n}\n\n\nexport default abstract class BaseProxy<TTag> {\n\treadonly tag: TTag;\n\tattrs: Record<string, any>;\n\treadonly renderer: IRenderer;\n\n\tlabels?: Label[];\n\t/** 父组件 */\n\treadonly parentProxy?: BaseProxy<any>;\n\t/** 呈递值 */\n\treadonly delivered: Record<any, any>;\n\t/** 状态 */\n\tcreated: boolean = false;\n\tdestroyed: boolean = false;\n\tmounted: boolean = false;\n\tunmounted: boolean = false;\n\t/** The subtree mounted on the parent node */\n\ttree: (MountedNode | MountedNode[])[] = [];\n\t/** 所属容器 */\n\tabstract readonly container: ContainerProxy<any>;\n\t/** 渲染组件根部，如果自身是 ComponentProxy 则为自身 */\n\tabstract readonly componentRoot?: ComponentProxy<any, any, any, any>;\n\n\tabstract get content():  (MountedNode | MountedNode[])[];\n\treadonly originalTag: any;\n\n\n\tconstructor(\n\t\trenderer: IRenderer,\n\t\toriginalTag: any,\n\t\ttag: any,\n\t\tattrs: any,\n\t\tparent?: BaseProxy<any>,\n\t\tdelivered?: Record<any, any>,\n\t) {\n\t\tthis.originalTag = originalTag;\n\t\tthis.tag = tag;\n\t\tthis.renderer = renderer;\n\t\tthis.attrs = attrs;\n\n\t\tthis.parentProxy = parent;\n\t\tthis.delivered = delivered || parent?.delivered || Object.create(null);\n\t\tif (!isProduction) { defineProperty(this, 'tree', []); }\n\t}\n\n\n\t/** 请求绘制 */\n\tprotected abstract requestDraw(): void;\n\n\tabstract callHook<H extends HookName>(id: H): void;\n\tabstract callHook(id: string): void;\n\n\t/** 更新属性及子代 */\n\tabstract _update(props: object, children: any[]): void;\n\t/** 更新属性及子代 */\n\tupdate(attrs: Record<string, any>, children: any[]): void {\n\t\tthis.attrs = attrs;\n\t\tthis._update(attrs, children);\n\t}\n\n\n\tprivate __executed_destroy = false;\n\tprotected abstract _destroy(): void;\n\tdestroy(): boolean {\n\t\tif (this.__executed_destroy) { return false; }\n\t\tthis.__executed_destroy = true;\n\t\tthis.callHook('beforeDestroy');\n\t\tthis._destroy();\n\t\tthis.callHook('destroyed');\n\t\tthis.destroyed = true;\n\t\treturn true;\n\t}\n\n\n\tprivate __mountOptions: MountOptions | null = null;\n\tprotected abstract _mount(mountOptions: MountOptions): MountOptions | void;\n\tprivate __cancelDrawMonitor?: () => void;\n\tmount(mountOptions: MountOptions): boolean {\n\t\tif (this.__executed_destroy) { return false; }\n\t\tif (!mountOptions) { return false; }\n\t\tif (this.__mountOptions) { return false; }\n\t\tthis.__mountOptions = mountOptions;\n\t\tthis.callHook('beforeMount');\n\t\tconst result = exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => {\n\t\t\t\tconst newMountOptions = this._mount(mountOptions);\n\t\t\t\tthis.__mountOptions = newMountOptions || mountOptions;\n\t\t\t\tthis.mounted = true;\n\t\t\t},\n\t\t);\n\t\tthis.__cancelDrawMonitor = result.stop;\n\t\tcomplete(() => this.callHook('mounted'));\n\t\treturn true;\n\t}\n\n\tprivate __executed_unmounted = false;\n\tprotected abstract _unmount(): void;\n\tunmount(): boolean {\n\t\tif (!this.mounted) { return false; }\n\t\tif (this.__executed_unmounted) { return false; }\n\t\tthis.__executed_unmounted = true;\n\t\tthis.callHook('beforeUnmount');\n\t\tthis._unmount();\n\t\tthis.callHook('unmounted');\n\t\tthis.unmounted = true;\n\t\treturn true;\n\t}\n\n\tprotected abstract _redraw(mountOptions: MountOptions): void;\n\tredraw(): void {\n\t\tif (this.__executed_destroy) { return; }\n\t\tif (!this.mounted) { return; }\n\t\tconst mountOptions = this.__mountOptions;\n\t\tif (!mountOptions) { return; }\n\t\tif (this.__cancelDrawMonitor) {\n\t\t\tthis.__cancelDrawMonitor();\n\t\t}\n\t\tthis.callHook('beforeDraw');\n\t\tconst result = exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => this._redraw(mountOptions),\n\t\t);\n\t\tthis.__cancelDrawMonitor = result.stop;\n\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n}\n","import BaseProxy from './BaseProxy';\nimport { ContainerProxy } from '../../exports';\nimport ComponentProxy from './ComponentProxy';\n\nexport default abstract class NodeProxy<\n\tTTag,\n> extends BaseProxy<TTag> {\n\t/** 所属容器 */\n\treadonly container: ContainerProxy<any>;\n\t/** 渲染组件根部，如果自身是 ComponentProxy 则为自身 */\n\treadonly componentRoot?: ComponentProxy<any, any, any, any>;\n\n\tconstructor(\n\t\toriginalTag: any,\n\t\ttag: TTag,\n\t\tattrs: Record<string, any>,\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t\tdelivered?: Record<any, any>,\n\t) {\n\t\tsuper(\n\t\t\tparent.renderer,\n\t\t\toriginalTag,\n\t\t\ttag,\n\t\t\tattrs,\n\t\t\tparent,\n\t\t\tdelivered,\n\t\t);\n\t\tthis.container = parent.container;\n\t\tthis.componentRoot = parent.componentRoot;\n\t}\n\n\trequestDraw(): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tthis.container.markDraw(this);\n\t}\n\tcallHook(id: string): void {\n\t}\n}\n","import {\n\tIRenderer,\n\tTreeNode,\n\tMountedNode,\n\tTreeNodeList,\n\tMountOptions,\n} from '../../type';\nimport { createMountedNode } from '../id';\n\n\nexport function createPlaceholder(renderer: IRenderer): MountedNode {\n\tconst node = renderer.createPlaceholder();\n\treturn createMountedNode({ tag: null, node });\n}\n\nexport function createItem(\n\trenderer: IRenderer,\n\tmountOptions: MountOptions,\n\tsource: TreeNode | null,\n): MountedNode {\n\tif (!source) { return createPlaceholder(renderer); }\n\tconst { proxy } = source;\n\tproxy.mount(mountOptions);\n\treturn createMountedNode({\n\t\t...source,\n\t\tnode: undefined,\n\t\tproxy,\n\t});\n}\n\n\nexport function createList(\n\trenderer: IRenderer,\n\tmountOptions: MountOptions,\n\tsource: TreeNode[],\n): MountedNode[] {\n\tif (source.length) {\n\t\treturn source.map(it => createItem(renderer, mountOptions, it));\n\t}\n\treturn [createPlaceholder(renderer)];\n}\n\nexport function createAll(\n\trenderer: IRenderer,\n\tmountOptions: MountOptions,\n\tsource: TreeNodeList,\n): (MountedNode | MountedNode[])[] {\n\tif (!source.length) {\n\t\treturn [createPlaceholder(renderer)];\n\t}\n\n\treturn source.map(item =>\n\t\tArray.isArray(item)\n\t\t\t? createList(renderer, mountOptions, item)\n\t\t\t: createItem(renderer, mountOptions, item));\n}\n","import { IRenderer, NativeNode, MountedNode, MountNode } from '../../type';\nimport { recoveryMountedNode } from '../id';\n\n\ntype MountedNodes = MountedNode | MountedNode[]\n| (MountedNode | MountedNode[])[];\n\n\ntype MountNodes = MountNode | MountNode[]\n| (MountNode | MountNode[])[];\n\n\nexport function *getNodes(tree: MountNodes): Iterable<NativeNode> {\n\tif (Array.isArray(tree)) {\n\t\tfor (const it of tree) {\n\t\t\tyield *getNodes(it);\n\t\t}\n\t\treturn;\n\t}\n\tconst { node, proxy } = tree;\n\tif (node) {\n\t\tyield node;\n\t\treturn;\n\t}\n\tif (proxy) {\n\t\tyield *getNodes(proxy.tree);\n\t}\n}\n\nexport function unmount(renderer: IRenderer, tree?: MountedNodes): void {\n\tif (!tree) { return; }\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(e => unmount(renderer, e));\n\t\treturn;\n\t}\n\trecoveryMountedNode(tree);\n\tif (tree.proxy) {\n\t\tconst { proxy } = tree;\n\t\tproxy.unmount();\n\t\treturn;\n\t}\n\tif (tree.node) {\n\t\tconst { node } = tree;\n\t\trenderer.removeNode(node);\n\t}\n\tunmount(renderer, tree.children);\n}\n","import {\n\tIRenderer,\n\tNativeNode,\n\tMountNode,\n\tTreeNode,\n\tMountedNode,\n\tTreeNodeList,\n\tMountOptions,\n} from '../../type';\nimport { createMountedNode } from '../id';\nimport { createItem, createList, createPlaceholder, createAll } from './create';\nimport { getNodes, unmount } from './utils';\n\n\ntype MountedNodes = MountedNode | MountedNode[]\n| (MountedNode | MountedNode[])[];\ntype MountNodes = MountNode | MountNode[]\n| (MountNode | MountNode[])[];\n\nfunction getLastNode(tree: MountNodes): NativeNode {\n\tif (Array.isArray(tree)) {\n\t\treturn getLastNode(tree[tree.length - 1]);\n\t}\n\tif (tree.node) { return tree.node; }\n\treturn getLastNode(tree.proxy.tree);\n}\n\nfunction getFirstNode(tree: MountNodes): NativeNode {\n\tif (Array.isArray(tree)) { return getFirstNode(tree[0]); }\n\tif (tree.node) { return tree.node; }\n\treturn getFirstNode(tree.proxy.tree);\n}\n\nexport function replace<T extends MountNodes>(\n\trenderer: IRenderer,\n\tnewTree: T,\n\toldTree: MountedNodes,\n): T {\n\tconst next = getFirstNode(oldTree);\n\tif (!next) { return newTree; }\n\tconst parentNode = renderer.getParent(next);\n\tif (!parentNode) { return newTree; }\n\tfor (const it of getNodes(newTree)) {\n\t\trenderer.insertNode(parentNode, it, next);\n\t}\n\tunmount(renderer, oldTree);\n\treturn newTree;\n}\n\nfunction updateList(\n\trenderer: IRenderer,\n\tmountOptions: MountOptions,\n\tsource: TreeNode[],\n\ttree: MountedNode | MountedNode[],\n): MountedNode[] {\n\tif (!source.length) {\n\t\tconst node = createPlaceholder(renderer);\n\t\treturn [replace(renderer, node, tree)];\n\t}\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: MountedNode[] = [];\n\tconst list = [...tree];\n\tconst mountedMap = new Map<MountNode, MountNode>();\n\tfor (const src of source) {\n\t\tconst index = list.findIndex(it =>\n\t\t\tit.tag === src.tag && it.key === src.key && it.proxy === src.proxy);\n\t\tif (index >= 0) {\n\t\t\tconst old = list[index];\n\t\t\tconst item = updateItem(renderer, mountOptions, src, old);\n\t\t\tmountedMap.set(old, item);\n\t\t\tnewList.push(item);\n\t\t\tlist.splice(index, 1);\n\t\t} else {\n\t\t\tconst item = createItem(renderer, mountOptions, src);\n\t\t\tnewList.push(item);\n\t\t}\n\t}\n\tif (!mountedMap.size) {\n\t\treturn replace(renderer, newList, list);\n\t}\n\tunmount(renderer, list);\n\ttree = tree.filter(t => mountedMap.has(t));\n\tconst last = getLastNode(tree.map(t => mountedMap.get(t)).filter(Boolean) as MountNode[]);\n\tconst parentNode = renderer.getParent(last);\n\tif (!parentNode) { return newList; }\n\tlet next = renderer.nextNode(last);\n\t// 调整次序\n\tfor (let i = newList.length - 1; i >= 0; i--) {\n\t\tconst item = newList[i];\n\t\tconst index = tree.findIndex(o => mountedMap.get(o) === item);\n\t\tif (index >= 0) {\n\t\t\tfor (const it of tree.splice(index)) {\n\t\t\t\tmountedMap.delete(it);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\trenderer.insertNode(parentNode, it, next);\n\t\t\t}\n\t\t}\n\t\tnext = getFirstNode(item) || next;\n\t}\n\treturn newList;\n}\n/**\n * 更新树\n * @param tree 已有树\n * @param source 用于替换的源\n * @param renderer Neep 对象\n */\nexport function updateAll(\n\trenderer: IRenderer,\n\tmountOptions: MountOptions,\n\tsource: TreeNodeList,\n\ttree: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (source.length === 0) {\n\t\treturn replace(renderer, createAll(renderer, mountOptions, []), tree);\n\t}\n\tlet index = 0;\n\tlet length = Math.min(source.length, tree.length);\n\tconst list: (MountedNode | MountedNode[])[] = [];\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tlist.push(updateList(renderer, mountOptions, src, tree[index]));\n\t\t} else {\n\t\t\tlist.push(updateItem(renderer, mountOptions, src, tree[index]));\n\t\t}\n\t}\n\tlength = Math.max(source.length, tree.length);\n\tif (tree.length > index) {\n\t\t// 销毁多余项\n\t\tfor (; index < length; index++) {\n\t\t\tunmount(renderer, tree[index]);\n\t\t}\n\t}\n\tif (source.length > index) {\n\t\t// 创建多余项\n\t\tconst last = getLastNode(list[list.length - 1]);\n\t\tconst parentNode = renderer.getParent(last);\n\t\tconst next = renderer.nextNode(last);\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = source[index];\n\t\t\tconst item = Array.isArray(src)\n\t\t\t\t? createList(renderer, mountOptions, src)\n\t\t\t\t: createItem(renderer, mountOptions, src);\n\t\t\tlist.push(item);\n\t\t\tif (!parentNode) { continue; }\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\trenderer.insertNode(parentNode, it, next);\n\t\t\t}\n\t\t}\n\t}\n\treturn list;\n}\n\n/**\n * 更新树节点\n * @param renderer Neep 对象\n * @param tree 已有树\n * @param source 用于替换的源\n */\nfunction updateItem(\n\trenderer: IRenderer,\n\tmountOptions: MountOptions,\n\tsource: TreeNode | null,\n\ttree: MountedNode | MountedNode[],\n): MountedNode {\n\tif (!source) {\n\t\tif (Array.isArray(tree)) {\n\t\t\tif (tree.length === 1 && tree[0].tag === null) {\n\t\t\t\treturn tree[0];\n\t\t\t}\n\t\t} else if (tree.tag === null) {\n\t\t\treturn tree;\n\t\t}\n\t\treturn replace(renderer, createPlaceholder(renderer), tree);\n\t}\n\tif (Array.isArray(tree)) {\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === source.tag && it.proxy === source.proxy);\n\t\tif (index < 0) {\n\t\t\treturn replace(renderer, createItem(renderer, mountOptions, source), tree);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tunmount(renderer, all);\n\t}\n\n\tif (source.proxy) {\n\t\tconst { proxy} = source;\n\t\tif (proxy !== tree.proxy) {\n\t\t\treturn replace(renderer, createItem(renderer, mountOptions, source), tree);\n\t\t}\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tproxy,\n\t\t}, tree.id);\n\t}\n\tif (tree.proxy || source.tag !== tree.tag) {\n\t\treturn replace(renderer, createItem(renderer, mountOptions, source), tree);\n\t}\n\tif (source.tag === undefined) { return tree; }\n\treturn replace(renderer, createItem(renderer, mountOptions, source), tree);\n}\n","import { IRenderer, TreeNodeList, MountOptions, MountedNode } from '../../type';\nimport { updateAll } from './update';\nimport { createAll } from './create';\nexport { unmount, getNodes } from './utils';\n\nexport default function draw(\n\trenderer: IRenderer,\n\tmountOptions: MountOptions,\n\tsource: TreeNodeList,\n\ttree?: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (!tree) {\n\t\treturn createAll(renderer, mountOptions, source);\n\t}\n\treturn updateAll(renderer, mountOptions, source, tree);\n}\n","import {\n\tTreeNodeList,\n\tDeliverComponent,\n\tMountOptions,\n\tMountedNode,\n} from '../../type';\nimport BaseProxy from './BaseProxy';\nimport convert, { destroy } from '../convert';\nimport NodeProxy from './NodeProxy';\nimport { deliverKeySymbol } from '../../symbols';\nimport { markRead, markChange } from '../../install/monitorable';\nimport draw, { unmount } from '../draw';\n\nexport default class DeliverProxy<T> extends NodeProxy<DeliverComponent<T>> {\n\tprivate __valueObject: T | undefined;\n\tprivate __nodes: TreeNodeList;\n\tget content(): (MountedNode | MountedNode[])[] { return this.tree; }\n\n\n\tconstructor(\n\t\toriginalTag: any,\n\t\ttag: DeliverComponent<T>,\n\t\tprops: { value?: T;},\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t) {\n\t\tsuper(originalTag, tag, props, children, parent, Object.create(parent.delivered));\n\t\tconst {value} = props;\n\t\tthis.__valueObject = value;\n\t\tReflect.defineProperty(this.delivered, tag[deliverKeySymbol], {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tget:() => {\n\t\t\t\tmarkRead(this, 'value');\n\t\t\t\treturn this.__valueObject;\n\t\t\t},\n\t\t});\n\t\tthis.__nodes = convert(this, children);\n\t\tthis.created = true;\n\t}\n\t/** 更新属性及子代 */\n\t_update({value}: { value?: T;}, children: any[]): void {\n\t\tif (this.__valueObject !== value) {\n\t\t\tthis.__valueObject = value;\n\t\t\tmarkChange(this, 'value');\n\t\t}\n\t\tthis.__nodes = convert(this, children, this.__nodes);\n\t\tthis.requestDraw();\n\t}\n\n\t_destroy(): void {\n\t\tdestroy(this.__nodes);\n\t}\n\t_mount(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(this.renderer, mountOptions, this.__nodes);\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tconst { renderer, __nodes, tree } = this;\n\t\tthis.tree = draw(renderer, mountOptions, __nodes, tree);\n\t}\n\t_unmount(): void {\n\t\tunmount(this.renderer, this.tree);\n\t}\n}\n","let delayedRefresh = 0;\nconst objectSet = new Set<{refresh(): void}>();\nexport function wait(obj: {refresh(): void}): boolean {\n\tif (delayedRefresh <= 0) { return false; }\n\tobjectSet.add(obj);\n\treturn true;\n}\nfunction run(): void {\n\tif (delayedRefresh > 0) { return; }\n\tconst list = [...objectSet];\n\tobjectSet.clear();\n\tlist.forEach(o => o.refresh());\n}\nasync function asyncRefresh<T>(f: () => PromiseLike<T> | T): Promise<T> {\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn await f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\nexport default function refresh<T>(f: () => T, async?: false): T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync: true,\n): Promise<T>;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T {\n\tif (async) { return asyncRefresh(f); }\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\n","import { markRead, markChange, printError } from './install/monitorable';\nimport { Emit, On, Listener, EventInfo } from './type';\nimport refresh from './extends/refresh';\n\nfunction createEmit<T, E extends Record<string, any>>(\n\temitter: EventEmitter<T, E>,\n\tomitNames: (string | number | symbol)[] = [],\n): Emit<E> {\n\tconst emit = <N extends keyof E & string>(\n\t\tname: N,\n\t\tp: E[N],\n\t\toptions?: any,\n\t): boolean => refresh(() => {\n\t\tconst cancelable = Boolean(options?.cancelable);\n\t\tconst {target} = emitter;\n\t\tlet defaultPrevented = true;\n\t\tconst eventInfo: EventInfo<any> = {\n\t\t\tget target() { return target; },\n\t\t\tget cancelable() { return cancelable; },\n\t\t\tget defaultPrevented() { return defaultPrevented; },\n\t\t\tget prevented() { return defaultPrevented; },\n\t\t\tpreventDefault() { defaultPrevented = false; },\n\t\t\tprevent() { defaultPrevented = false; },\n\t\t};\n\t\tconst events = emitter.events[name];\n\t\tif (!events) { return defaultPrevented; }\n\t\tfor (const event of events) {\n\t\t\tevent(p, eventInfo);\n\t\t}\n\t\treturn defaultPrevented;\n\t});\n\temit.omit = (...names: string[]) => createEmit(emitter, [...omitNames, ...names]);\n\tReflect.defineProperty(emit, 'names', {\n\t\tget:() => {\n\t\t\tmarkRead(createEmit, 'names');\n\t\t\treturn [...emitter.names]\n\t\t\t\t.filter(t => !omitNames.includes(t));\n\t\t},\n\t\tconfigurable: true,\n\t});\n\treturn emit as any as Emit<E>;\n}\n\nexport default class EventEmitter<T, E extends Record<string, any> = Record<string, any>> {\n\n\tprivate readonly _names = new Set<keyof E>();\n\tget names(): (keyof E)[] { markRead(this, 'names'); return [...this._names]; }\n\treadonly events: Record<string, Set<Listener<T, any>> | undefined> = Object.create(null);\n\treadonly emit: Emit<E> = createEmit(this);\n\treadonly on: On<T, E>;\n\ttarget?: T;\n\tconstructor() {\n\t\tconst names = this._names;\n\t\tconst eventSet = this.events;\n\n\t\tconst on = (name: string, listener: Listener<T, any>): (() => void) => {\n\t\t\tfunction fn(p: any, event: EventInfo<T>): void {\n\t\t\t\ttry {\n\t\t\t\t\tlistener(p, event);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tprintError(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet event = eventSet[name];\n\t\t\tif (!event?.size) {\n\t\t\t\tevent = new Set();\n\t\t\t\tevent.add(fn);\n\t\t\t\teventSet[name] = event;\n\t\t\t\tnames.add(name);\n\t\t\t\tmarkChange(this, 'names');\n\t\t\t} else {\n\t\t\t\tevent.add(fn);\n\t\t\t}\n\t\t\tlet removed = false;\n\t\t\treturn () => {\n\t\t\t\tif (removed) { return; }\n\t\t\t\tremoved = true;\n\t\t\t\tif (!event) { return; }\n\t\t\t\tevent.delete(fn);\n\t\t\t\tif (event.size) { return; }\n\t\t\t\tnames.delete(name);\n\t\t\t\tmarkChange(this, 'names');\n\t\t\t};\n\t\t};\n\t\tthis.on = on;\n\t}\n\tprivate readonly __propsEvents:\n\tRecord<string, [Listener<T, any>, () => void]>\n\t= Object.create(null);\n\tprivate readonly __eventMap:\n\tRecord<string, [Listener<T, any>, () => void]>\n\t= Object.create(null);\n\tprivate readonly __propsEmitEvents:\n\tRecord<string, () => void>\n\t= Object.create(null);\n\tprivate __propsEmitEvent?: Emit;\n\n\tupdateInProps(props: any): void {\n\n\t\tconst oldPropsEvents = this.__propsEvents;\n\t\tconst oldEventNames = new Set(Object.keys(oldPropsEvents));\n\t\tfor (const [entName, fn] of getEvents(props)) {\n\t\t\tif (oldEventNames.has(entName)) {\n\t\t\t\toldEventNames.delete(entName);\n\t\t\t\tconst [olfFn, cl] = oldPropsEvents[entName] || [];\n\t\t\t\tif (olfFn === fn) { continue; }\n\t\t\t\tif (cl) { cl(); }\n\t\t\t}\n\t\t\toldPropsEvents[entName] = [fn, this.on(entName, fn)];\n\t\t}\n\t\tfor (const entName of oldEventNames) {\n\t\t\tconst e = oldPropsEvents[entName];\n\t\t\tif (!e) { continue; }\n\t\t\te[1]();\n\t\t\tdelete oldPropsEvents[entName];\n\t\t}\n\n\t\tconst eventMap = this.__eventMap;\n\t\tconst oldEventMapNames = new Set(Object.keys(eventMap));\n\t\tfor (const [entName, fn] of getEventsMap(props)) {\n\t\t\tif (oldEventMapNames.has(entName)) {\n\t\t\t\toldEventMapNames.delete(entName);\n\t\t\t\tconst [olfFn, cl] = eventMap[entName] || [];\n\t\t\t\tif (olfFn === fn) { continue; }\n\t\t\t\tif (cl) { cl(); }\n\t\t\t}\n\t\t\teventMap[entName] = [fn, this.on(entName, fn)];\n\t\t}\n\t\tfor (const entName of oldEventMapNames) {\n\t\t\tconst e = eventMap[entName];\n\t\t\tif (!e) { continue; }\n\t\t\te[1]();\n\t\t\tdelete eventMap[entName];\n\t\t}\n\n\n\t\tconst oldEmitEvents = this.__propsEmitEvents;\n\t\tconst eventsFn = getEmitFn(props);\n\t\tif (eventsFn !== this.__propsEmitEvent) {\n\t\t\tthis.__propsEmitEvent = eventsFn;\n\t\t\tfor (const entName of [...Object.keys(oldEmitEvents)]) {\n\t\t\t\tconst e = oldEmitEvents[entName];\n\t\t\t\tif (!e) { continue; }\n\t\t\t\te();\n\t\t\t\tdelete oldEmitEvents[entName];\n\t\t\t}\n\t\t\tif (!eventsFn) { return; }\n\t\t\tconst {names} = eventsFn;\n\t\t\tif (!Array.isArray(names)) { return; }\n\t\t\tfor (const n of names) {\n\t\t\t\toldEmitEvents[n] = this.on(n, p => eventsFn(n, p));\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (!eventsFn) { return; }\n\t\tconst oldNames = new Set(Object.keys(oldEmitEvents));\n\t\tconst names = eventsFn.names || [];\n\t\tfor (const n of names) {\n\t\t\tif (!n) { continue; }\n\t\t\toldNames.delete(n);\n\t\t\tif (oldNames.has(n)) { continue; }\n\t\t\toldEmitEvents[n] = this.on(n, p => eventsFn(n, p));\n\t\t}\n\t\tfor (const entName of oldNames) {\n\t\t\tconst e = oldEmitEvents[entName];\n\t\t\tif (!e) { continue; }\n\t\t\te();\n\t\t\tdelete oldEmitEvents[entName];\n\t\t}\n\t}\n}\nfunction *getEvents(p: any): IterableIterator<[string, Listener<any, any>]> {\n\tif (!p) { return; }\n\n\tfor (const k of Object.keys(p)) {\n\t\tconst fn = p[k];\n\t\tif (typeof fn !== 'function') { continue; }\n\t\tif (k.substr(0, 3) !== 'on:') { continue; }\n\t\tconst entName =  k.substr(3);\n\t\tif (!entName) { continue; }\n\t\tyield [entName, fn];\n\t}\n}\n\nfunction *getEventsMap(p: any): IterableIterator<[string, Listener<any, any>]> {\n\tif (!p) { return; }\n\tconst events = p['n:on'];\n\tif (!events) { return; }\n\tif (typeof events === 'object') { return; }\n\tfor (const k of Object.keys(p)) {\n\t\tconst fn = p[k];\n\t\tif (typeof fn !== 'function') { continue; }\n\t\tyield [k, fn];\n\t}\n}\n\nfunction getEmitFn(p: any): Emit | undefined {\n\tif (!p) { return; }\n\tlet eventsFn = p?.['n:on'] as Emit | undefined;\n\tif (typeof eventsFn !== 'function') { return; }\n\treturn eventsFn;\n}\n","import {\n\tSlots,\n\tIRenderer,\n\tSlotApi,\n\tElement,\n} from '../type';\nimport {\n\tisElement,\n\tRender,\n\tequal,\n\tTemplate,\n\tisValue,\n\tScopeSlot,\n} from '../auxiliary';\nimport { isSimpleComponent } from '../is';\nimport { markRead, markChange } from '../install/monitorable';\nimport { objectTypeSymbol, objectTypeSymbolElement } from '../symbols';\n\n/**\n * 获取槽元素\n * @param renderer 渲染函数\n * @param children 子代\n * @param slots 槽列表\n * @param native 是否为原生组件\n * @returns 原生节点\n */\nexport function getSlots(\n\trenderer: IRenderer,\n\tchildren: any[],\n\tslots: Record<string | symbol, any[]>,\n\tnative = false,\n): any[] {\n\t/** 原始对象 */\n\tconst nativeList: any[] = [];\n\tfor (const it of children) {\n\t\tif (Array.isArray(it)) {\n\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\tnativeList.push(getSlots(renderer, it, list, native));\n\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\tif (k in slots) {\n\t\t\t\t\tslots[k].push(list[k]);\n\t\t\t\t} else {\n\t\t\t\t\tslots[k] = [list[k]];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (isElement(it) && it.slot === undefined) {\n\t\t\tif (isSimpleComponent(it.tag) && it.execed || it.tag === Template) {\n\t\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\t\tnativeList.push(getSlots(renderer, it.children, list, native));\n\t\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\t\tconst node = { ...it, children: list[k] };\n\t\t\t\t\tif (k in slots) {\n\t\t\t\t\t\tslots[k].push(node);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tslots[k] = [node];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif (native) {\n\t\t\tif (renderer.isNode(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!isElement(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (it.tag !== Render && it.tag !== Template) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tconst slot = isElement(it) && it.slot || 'default';\n\t\tconst el = isElement(it) ? {\n\t\t\t...it, slot: undefined,\n\t\t\tprops: {...it.props, 'n:slot': undefined },\n\t\t} : it;\n\t\tif (slot in slots) {\n\t\t\tslots[slot].push(el);\n\t\t} else {\n\t\t\tslots[slot] = [el];\n\t\t}\n\t}\n\treturn nativeList;\n}\n\nexport function setSlot(\n\tslots: Slots,\n\tname: string,\n\tlist?: any[],\n): any[] | undefined {\n\tReflect.defineProperty(slots, name, {\n\t\tget() {\n\t\t\tmarkRead(slots, name);\n\t\t\treturn list;\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n\tmarkChange(slots, name);\n\treturn list;\n}\n/**\n * 将槽子代设置到槽列表上\n * @param children 槽子代\n * @param slots 槽对象\n */\nexport function setSlots(\n\tchildren: {[key: string]: any[]},\n\tslots?: Slots,\n\toldChildren?: {[key: string]: any[]},\n): Slots {\n\tif (!slots) {\n\t\tconst slots = Object.create(null);\n\t\tfor (const k of Reflect.ownKeys(children) as string[]) {\n\t\t\tslots[k] = children[k];\n\t\t}\n\t\treturn slots;\n\t}\n\tfor (const name of Reflect.ownKeys(slots)) {\n\t\tif (name in children) { continue; }\n\t\tsetSlot(slots, name as string);\n\t}\n\tif (!oldChildren) {\n\t\tfor (const name of Reflect.ownKeys(children) as string[]) {\n\t\t\tconst list = children[name];\n\t\t\tsetSlot(slots, name, list);\n\t\t}\n\t\treturn slots;\n\t}\n\tfor (const name of Reflect.ownKeys(children) as string[]) {\n\t\tconst list = children[name];\n\t\tif (equal(list, oldChildren[name])) { continue; }\n\t\tsetSlot(slots, name, list);\n\t}\n\treturn slots;\n}\n\nexport function renderSlot(list: any[], argv: any): any[] {\n\treturn list.map(it => {\n\t\tif (Array.isArray(it)) {\n\t\t\treturn renderSlot(it, argv);\n\t\t}\n\t\tif (!isElement(it)) { return it; }\n\t\tif (it.tag !== Render) {\n\t\t\treturn {\n\t\t\t\t...it,\n\t\t\t\tslot: undefined,\n\t\t\t} as Element;\n\t\t}\n\t\tconst { children } = it;\n\t\tif (children?.length !== 1) { return children; }\n\t\tconst [ render ] = children;\n\t\tif (isValue(render) || typeof render !== 'function') { return children; }\n\t\treturn render(argv);\n\t});\n}\n\nfunction getSlot(slots: Slots, name: string, isSimple: boolean):  any[] | undefined {\n\treturn isSimple || name in slots\n\t\t? slots[name]\n\t\t: setSlot(slots, name);\n}\n\nexport function createSlotApi(\n\tslots: Slots,\n\tisSimple = false,\n): SlotApi {\n\tfunction slotApi(name: string = 'default', argv = {}): Element {\n\t\tconst list = getSlot(slots, name, isSimple);\n\t\treturn {\n\t\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\t\ttag: ScopeSlot,\n\t\t\tchildren: list ? renderSlot(list, argv) : [],\n\t\t\tinserted: true,\n\t\t\tslot: name,\n\t\t\tisDefault: !list,\n\t\t};\n\t}\n\tslotApi.has = (name: string = 'default') => Boolean(getSlot(slots, name, isSimple));\n\treturn slotApi;\n}\n","import { ComponentContext, Context, ContextConstructor, ComponentEntity, ShellContext } from '../type';\nimport { safeify } from '../install/monitorable';\n\nconst constructors: ContextConstructor[] = [];\nexport function initContext<\n\tTContext extends ComponentContext<any, any> | ShellContext<any>,\n>(\n\tcontext: TContext,\n\tentity?: TContext extends Context<any, any, any> ? ComponentEntity<any, any> : never,\n): TContext {\n\tfor (const constructor of constructors) {\n\t\tconstructor(context, entity);\n\t}\n\treturn context;\n}\nexport function addContextConstructor(\n\tconstructor: ContextConstructor,\n): void {\n\tconstructors.push(safeify(constructor));\n}\n","import {\n\tdeliverKeySymbol,\n\tdeliverDefaultSymbol,\n} from '../symbols';\nimport { DeliverComponent } from '../type';\nimport { assert } from '../Error';\nimport { isDeliver } from '../is';\n\nexport default function getDelivered<T>(delivered: any, deliver: DeliverComponent<T>): T {\n\tassert(isDeliver(deliver), 'The `deliver` is not a DeliverComponent.', 'deliver');\n\tconst value = delivered[deliver[deliverKeySymbol]];\n\treturn value === undefined ? deliver[deliverDefaultSymbol] : value;\n}\n","import { Component } from './type';\n\nexport const components: Record<string, Component<any>> = Object.create(null);\n\nexport default function register(\n\tname: string,\n\tcomponent: Component<any>,\n): void {\n\tcomponents[name] = component;\n}\n","\nimport {\n\tElement,\n\tSlots,\n\tSimpleComponent,\n\tComponent,\n\tComponentEntity,\n\tIRenderer,\n} from '../../type';\nimport { isValue, postpone } from '../../install/monitorable';\nimport { componentsSymbol, objectTypeSymbol, objectTypeSymbolElement } from '../../symbols';\nimport ComponentProxy from '../proxy/ComponentProxy';\nimport EventEmitter from '../../EventEmitter';\nimport { isSimpleComponent } from '../../is';\nimport { getSlots, setSlots, createSlotApi, setSlot, renderSlot } from '../slot';\nimport { initContext } from '../../extends/context';\n\nimport {\n\tisElement,\n\tFragment,\n\tRender,\n\tSlot,\n\tScopeSlot,\n\tContainer,\n} from '../../auxiliary';\nimport getDelivered from '../getDelivered';\nimport refresh from '../../extends/refresh';\nimport { components as globalComponents } from '../../register';\n\nexport function findComponent(\n\ttag: any,\n\tcomponents: Record<string, Component<any>>[],\n\tnative?: boolean,\n): Component<any> | string | null {\n\tif (!tag) { return null; }\n\tif (typeof tag !== 'string') { return tag; }\n\tif (/^core:/i.test(tag)) {\n\t\tlet ltag = tag.toLowerCase();\n\t\tif (ltag === Container) { return ltag; }\n\t\tif (ltag === ScopeSlot) { return ltag; }\n\t\tif (ltag === Render) { return ltag; }\n\t\tif (ltag === Slot) { return native ? 'slot' : ScopeSlot; }\n\t\treturn Fragment;\n\t}\n\tif (tag === Fragment) { return tag; }\n\tif (tag === 'slot') { return tag; }\n\tfor (const list of components) {\n\t\tconst component = list[tag];\n\t\tif (component) { return component; }\n\t}\n\treturn globalComponents[tag] || tag;\n}\nexport function getComponents(\n\t...components: (Record<string, Component<any>> | undefined | null)[]\n): Record<string, Component<any>>[] {\n\treturn components.filter(Boolean) as Record<string, Component<any>>[];\n}\n\nfunction getNodeArray(result: any): any[] {\n\tif (Array.isArray(result)) { return result; }\n\tif (!isElement(result)) { return [result]; }\n\tif (result.tag !== Fragment) { return [result]; }\n\treturn result.children;\n}\n\nfunction execSimple(\n\tnormalizeAuxiliaryObject: NormalizeAuxiliaryObject,\n\tnode: Element,\n\ttag: SimpleComponent<any, any>,\n\tcomponents: Record<string, Component<any>>[],\n\tchildren: any[],\n): Element {\n\tconst slotMap = Object.create(null);\n\tgetSlots(normalizeAuxiliaryObject.renderer, children, slotMap);\n\tconst slots = setSlots(slotMap);\n\tconst event = new EventEmitter();\n\tevent.updateInProps(node.props);\n\tconst { refresh, delivered, simpleParent } =  normalizeAuxiliaryObject;\n\n\tconst result = tag({...node.props}, initContext({\n\t\tisShell: true,\n\t\tslot: createSlotApi(slots, true),\n\t\tparent: simpleParent,\n\t\tdelivered: deliver => getDelivered(delivered, deliver),\n\t\tchildNodes: children,\n\t\trefresh,\n\t\temit: event.emit,\n\t}));\n\tconst nodes = init(\n\t\tnormalizeAuxiliaryObject,\n\t\tgetNodeArray(result),\n\t\tslots,\n\t\tgetComponents(...components, tag[componentsSymbol]),\n\t\tfalse,\n\t\ttrue,\n\t);\n\n\treturn {\n\t\t...node,\n\t\ttag,\n\t\texeced: true,\n\t\tchildren: Array.isArray(nodes) ? nodes : [nodes],\n\t};\n}\n\nfunction getSlotRenderFn(\n\tnormalizeAuxiliaryObject: NormalizeAuxiliaryObject,\n\tchildren: any[],\n\tslots: Slots,\n\tcomponents: Record<string, Component<any>>[],\n\tnative: boolean,\n): null | Function {\n\tif (children.length !== 1) {\n\t\treturn null;\n\t}\n\tconst [renderFn] = children;\n\tif (isValue(renderFn) || typeof renderFn !== 'function') {\n\t\treturn null;\n\t}\n\tconst { slotRenderFnList } = normalizeAuxiliaryObject;\n\tconst fn = slotRenderFnList.get(renderFn);\n\tif (fn) { return fn; }\n\tconst newFn = function(this: any, ...p: any[]): any[] {\n\t\treturn init(\n\t\t\tnormalizeAuxiliaryObject,\n\t\t\trenderFn.call(this, ...p),\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t\tfalse,\n\t\t);\n\t};\n\tslotRenderFnList.set(renderFn, newFn);\n\treturn newFn;\n}\n\n\nfunction exec<T>(\n\tnode: T[],\n\tnormalizeAuxiliaryObject: NormalizeAuxiliaryObject,\n\tslots: Slots,\n\tcomponents: Record<string, Component<any>>[],\n\tnative: boolean,\n\tsimpleSlot: boolean,\n): (T | Element)[];\nfunction exec<T>(\n\tnode: T,\n\tnormalizeAuxiliaryObject: NormalizeAuxiliaryObject,\n\tslots: Slots,\n\tcomponents: Record<string, Component<any>>[],\n\tnative: boolean,\n\tsimpleSlot: boolean,\n): T | Element;\n\nfunction exec<T>(\n\tnode: T | T[],\n\tnormalizeAuxiliaryObject: NormalizeAuxiliaryObject,\n\tslots: Slots,\n\tcomponents: Record<string, Component<any>>[],\n\tnative: boolean,\n\tsimpleSlot: boolean,\n): (T | Element) | (T | Element)[] {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(n => exec(\n\t\t\tn,\n\t\t\tnormalizeAuxiliaryObject,\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t\tsimpleSlot,\n\t\t));\n\t}\n\tif (!isElement(node)) { return node; }\n\tif (node.tag === ScopeSlot && node.inserted) { return node; }\n\tconst { children } = node;\n\tconst tag = findComponent(node.tag, components, native);\n\tif (isSimpleComponent(tag)) {\n\t\tif (node.execed) { return node; }\n\t\treturn execSimple(\n\t\t\tnormalizeAuxiliaryObject,\n\t\t\tnode,\n\t\t\ttag,\n\t\t\tcomponents,\n\t\t\tchildren.map(n => exec(\n\t\t\t\tn,\n\t\t\t\tnormalizeAuxiliaryObject,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t\tsimpleSlot,\n\t\t\t)),\n\t\t);\n\t}\n\tif (tag === Render) {\n\t\tconst slotRenderFn = getSlotRenderFn(\n\t\t\tnormalizeAuxiliaryObject,\n\t\t\tchildren,\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t);\n\t\tif (slotRenderFn) {\n\t\t\treturn {\n\t\t\t\t...node,\n\t\t\t\tchildren: [slotRenderFn],\n\t\t\t} as Element;\n\t\t}\n\t}\n\tif (tag !== ScopeSlot) {\n\t\treturn {\n\t\t\t...node,\n\t\t\ttag,\n\t\t\tchildren: children.map(n => exec(\n\t\t\t\tn,\n\t\t\t\tnormalizeAuxiliaryObject,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t\tsimpleSlot,\n\t\t\t)),\n\t\t} as Element;\n\t}\n\n\tconst { props } = node;\n\tconst args = props?.argv || {};\n\tconst slotName = node.props?.name || 'default';\n\tconst slot = simpleSlot || slotName in slots\n\t\t? slots[slotName]\n\t\t: setSlot(slots, slotName);\n\tconst el: Element = {\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\tprops,\n\t\tkey: node.key,\n\t\ttag: ScopeSlot,\n\t\tinserted: true,\n\t\tslot: slotName,\n\t\tisDefault: !slot,\n\t\tchildren: slot\n\t\t\t? renderSlot(slot, args)\n\t\t\t: getChildren(children, args).map(n => exec(\n\t\t\t\tn,\n\t\t\t\tnormalizeAuxiliaryObject,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t\tsimpleSlot,\n\t\t\t)),\n\t};\n\treturn el;\n}\nfunction getChildren(children: any[], args: any): any[] {\n\tif (children.length !== 1) { return children; }\n\tconst [fn] = children;\n\tif (typeof fn !== 'function') { return children; }\n\treturn getNodeArray(fn(args));\n}\n\n\nexport interface NormalizeAuxiliaryObject {\n\trefresh: (f?: () => void) => void;\n\tslotRenderFnList: WeakMap<Function, Function>;\n\tdelivered: Record<any, any>;\n\tsimpleParent: ComponentEntity<any, any> | undefined;\n\trenderer: IRenderer;\n}\nexport function init(\n\tnormalizeAuxiliaryObject: NormalizeAuxiliaryObject,\n\tnode: any[],\n\tslots: Slots,\n\tcomponents: Record<string, Component<any>>[],\n\tnative: boolean,\n\tsimpleSlot: boolean,\n): any[] {\n\treturn refresh(() => postpone(() => exec(\n\t\tnode,\n\t\tnormalizeAuxiliaryObject,\n\t\tslots,\n\t\tcomponents,\n\t\tnative,\n\t\tsimpleSlot,\n\t)));\n}\n\n\nexport default function normalize(\n\tproxy: ComponentProxy<any, any, any, any>,\n\tslotRenderFnList: WeakMap<Function, Function>,\n\trefresh: (f?: () => void) => void,\n\tresult: any,\n\tcomponents = proxy.tag[componentsSymbol] || null,\n): any[] {\n\treturn init(\n\t\t{\n\t\t\trenderer: proxy.renderer,\n\t\t\trefresh,\n\t\t\tslotRenderFnList,\n\t\t\tdelivered: proxy.delivered,\n\t\t\tsimpleParent: proxy.entity,\n\t\t},\n\t\tgetNodeArray(result),\n\t\tproxy.slots,\n\t\tgetComponents(components),\n\t\tBoolean(proxy.isNative),\n\t\tfalse,\n\t);\n}\n","import {\n\tTreeNodeList,\n\tMountOptions,\n\tMountedNode,\n\tMonitored,\n} from '../../type';\nimport BaseProxy from './BaseProxy';\nimport draw, { unmount } from '../draw';\nimport { createMountedNode } from '../id';\nimport { isValue } from '../../install/monitorable';\nimport { replace } from '../draw/update';\nimport NodeProxy from './NodeProxy';\nimport { markRead, markChange } from '../../install/monitorable';\nimport { isElement, Fragment } from '../../auxiliary';\nimport convert, { destroy } from '../convert';\nimport { monitor } from '../../install/monitorable';\nimport { wait } from '../../extends/refresh';\nimport { init, NormalizeAuxiliaryObject } from '../normalize';\nimport { createPlaceholder } from '../draw/create';\nimport { isProduction } from '../../constant';\nimport { defineProperty } from '../../install/monitorable';\n\n\nfunction getText(\n\tvalue: any,\n): string | null {\n\tif (value === undefined || value === null) { return null; }\n\tif (value instanceof Date) { return value.toISOString(); }\n\tif (value instanceof RegExp) { return String(value); }\n\treturn String(value);\n}\n\n\nfunction getNodeArray(result: any): any[] {\n\tif (!isElement(result)) { return [result]; }\n\tif (result.tag !== Fragment) { return [result]; }\n\treturn result.children;\n}\nexport default class ValueProxy extends NodeProxy<null> {\n\n\tget content(): (MountedNode | MountedNode[])[] { return this.tree; }\n\t__value: any;\n\ttext?: string | null;\n\tisValue?: boolean;\n\tset value(v) {\n\t\tconst k = v !== this.__value;\n\t\tthis.__value = v;\n\t\tif (k) {\n\t\t\tmarkChange(this, 'value');\n\t\t}\n\t}\n\tget value(): any {\n\t\tmarkRead(this, 'value');\n\t\tlet v = this.__value;\n\t\twhile (isValue(v)) { v = v(); }\n\t\treturn v;\n\t}\n\t__nodes?: TreeNodeList;\n\tsrc?: any;\n\t/** 结果渲染函数 */\n\tprivate __render: Monitored<boolean, []>;\n\tconstructor(\n\t\tattrs: any,\n\t\tparent: BaseProxy<any>,\n\t) {\n\t\tsuper(null, null, attrs, [], parent);\n\t\tconst {value} = attrs;\n\t\tthis.__value = value;\n\t\tif (!isProduction) {\n\t\t\tdefineProperty(this, 'text', undefined);\n\t\t\tdefineProperty(this, 'isValue', isValue(value));\n\t\t}\n\t\tconst slots = Object.create(null);\n\t\tconst normalizeAuxiliaryObject: NormalizeAuxiliaryObject = {\n\t\t\trenderer: this.renderer,\n\t\t\trefresh: () => this.refresh(),\n\t\t\tslotRenderFnList: new WeakMap(),\n\t\t\tdelivered: this.delivered,\n\t\t\t// TODO\n\t\t\tsimpleParent: undefined,\n\t\t};\n\t\tthis.__render = monitor(\n\t\t\tchanged => changed && this.refresh(),\n\t\t\t() => {\n\t\t\t\tlet {value} = this;\n\t\t\t\tif (isElement(value) || Array.isArray(value)) {\n\t\t\t\t\tthis.__nodes = convert(\n\t\t\t\t\t\tthis,\n\t\t\t\t\t\tinit(\n\t\t\t\t\t\t\tnormalizeAuxiliaryObject,\n\t\t\t\t\t\t\tgetNodeArray(value),\n\t\t\t\t\t\t\tslots,\n\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthis.__nodes,\n\t\t\t\t\t);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (this.__nodes) {\n\t\t\t\t\tdestroy(this.__nodes);\n\t\t\t\t\tthis.__nodes = undefined;\n\t\t\t\t} else if (this.src === value) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.src = value;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t);\n\t\tthis.created = true;\n\t\tthis.refresh();\n\t}\n\n\t/** 是否为刷新中 */\n\tprivate __refreshing = false;\n\t/** 是否需要继续刷新 */\n\tprivate __needRefresh = false;\n\n\n\trefresh(): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.__needRefresh = true;\n\t\tif (!this.created) { return; }\n\n\t\tif (this.__refreshing) { return; }\n\t\tthis.__refreshing = true;\n\n\t\tlet needDraw = false;\n\t\twhile (this.__needRefresh && !wait(this)) {\n\t\t\tthis.__needRefresh = false;\n\t\t\tneedDraw = this.__render() || needDraw;\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis.__refreshing = false;\n\t\tif (!needDraw) { return; }\n\t\tif (wait(this)) { return; }\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis.requestDraw();\n\t}\n\n\t_update({value}: any): void {\n\t\tthis.value = value;\n\t\tif (!isProduction) {\n\t\t\tthis.isValue = isValue(value);\n\t\t}\n\t}\n\t_destroy(): void {\n\t\tthis.__render.stop();\n\t\tconst { __nodes } = this;\n\t\tif (!__nodes) {\n\t\t\treturn;\n\t\t}\n\t\tdestroy(__nodes);\n\t}\n\t_mount(mountOptions: MountOptions): void {\n\t\tconst { renderer, __nodes, src } = this;\n\t\tif (__nodes) {\n\t\t\tthis.tree = draw(renderer, mountOptions, __nodes);\n\t\t\treturn;\n\t\t}\n\t\tif (renderer.isNode(src)) {\n\t\t\tthis.tree = [createMountedNode({ node: src })];\n\t\t\treturn;\n\t\t}\n\t\tconst text = getText(src);\n\t\tif (!isProduction) { this.text = text; }\n\t\tconst node = typeof text === 'string'\n\t\t\t? createMountedNode({ node: renderer.createText(text) })\n\t\t\t: createPlaceholder(renderer);\n\t\tthis.tree = [node];\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tconst { renderer, __nodes, src } = this;\n\t\tif (__nodes) {\n\t\t\tthis.tree = draw(renderer, mountOptions, __nodes, this.tree);\n\t\t\treturn;\n\t\t}\n\t\tif (renderer.isNode(src)) {\n\t\t\tthis.tree = [createMountedNode({ node: src })];\n\t\t\tif (!isProduction) {\n\t\t\t\tthis.text = undefined;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconst text = getText(src);\n\t\tif (!isProduction) { this.text = text; }\n\t\tconst node = typeof text === 'string'\n\t\t\t? createMountedNode({ node: renderer.createText(text) })\n\t\t\t: createPlaceholder(renderer);\n\t\tthis.tree =\treplace(renderer, [node], this.tree);\n\t}\n\t_unmount(): void {\n\t\tconst { renderer, tree } = this;\n\t\tunmount(renderer, tree);\n\t}\n}\n","import {\n\tMountOptions,\n\tTreeNodeList,\n\tMountedNode,\n} from '../../type';\nimport BaseProxy from './BaseProxy';\nimport convert, { destroy } from '../convert';\nimport draw, { unmount } from '../draw';\nimport NodeProxy from './NodeProxy';\n\nexport default class GroupProxy<T> extends NodeProxy<T> {\n\tprivate __nodes: TreeNodeList;\n\n\tget content(): (MountedNode | MountedNode[])[] { return this.tree; }\n\tconstructor(\n\t\ttag: T,\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t) {\n\t\tsuper(tag, tag, {}, children, parent);\n\t\tthis.__nodes = convert(this, children);\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tthis.__nodes = convert(this, children, this.__nodes);\n\t\tthis.requestDraw();\n\t}\n\n\t_destroy(): void {\n\t\tdestroy(this.__nodes);\n\t}\n\t_mount(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(this.renderer, mountOptions, this.__nodes);\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(this.renderer, mountOptions, this.__nodes, this.tree);\n\t}\n\t_unmount(): void {\n\t\tunmount(this.renderer, this.tree);\n\t}\n}\n","import {\n\tIRenderer,\n\tRef,\n\tEntity,\n} from '../../type';\nimport EventEmitter from '../../EventEmitter';\nimport BaseProxy from './BaseProxy';\n\nfunction updateData(\n\tprops: any,\n\tdata: Record<string, any>,\n): void {\n\tconst oldKeys = new Set(Object.keys(data));\n\tfor (const k in props) {\n\t\tif (k.substr(0, 5) !== 'data:') { continue; }\n\t\tconst key = k.substr(5);\n\t\tif (!key) { continue; }\n\t\toldKeys.delete(key);\n\t\tdata[key] = props[key];\n\t}\n\tconst dataset = props['n:data'];\n\tif (dataset && typeof dataset === 'object') {\n\t\tfor (const key in dataset) {\n\t\t\tif (!key) { continue; }\n\t\t\toldKeys.delete(key);\n\t\t\tdata[key] = dataset[key];\n\t\t}\n\t}\n\tfor (const key of oldKeys) {\n\t\tdelete data[key];\n\t}\n}\n\n\nexport default abstract class RefProxy<\n\tTExposed extends object | Function,\n\tTTag,\n\tTEntity extends Entity<any, any>,\n> extends BaseProxy<TTag> {\n\t/** 组件暴露值 */\n\tprivate __exposed?: TExposed;\n\t/** 组件暴露值 */\n\tprivate __ref?: Ref<TExposed, TEntity>;\n\tget exposed(): TExposed | undefined { return this.__exposed; }\n\tsetExposed(t?: TExposed): void {\n\t\tif (this.destroyed) { return; }\n\t\tconst ref = this.__ref;\n\t\tif (typeof ref !== 'function') {\n\t\t\tthis.__exposed = t;\n\t\t\treturn;\n\t\t}\n\t\tconst old = this.__exposed;\n\t\tthis.__exposed = t;\n\t\tref(t, old, this.entity);\n\t}\n\treadonly events: EventEmitter<TEntity>;\n\t/** 组件实体 */\n\treadonly entity: TEntity;\n\n\treadonly data: Record<string, any> = Object.create(null);\n\n\tconstructor(\n\t\trenderer: IRenderer,\n\t\toriginalTag: any,\n\t\ttag: any,\n\t\tattrs: any,\n\t\tparent?: BaseProxy<any>,\n\t\tdelivered?: Record<any, any>,\n\t) {\n\t\tsuper(renderer, originalTag, tag, attrs, parent, delivered);\n\n\t\tupdateData(attrs, this.data);\n\t\tconst events = new EventEmitter<TEntity>();\n\t\tconst entity = this.createEntity(events);\n\t\tevents.target = entity;\n\t\tthis.entity = entity;\n\t\tthis.events = events;\n\t\tconst ref = attrs['n:ref'];\n\t\tif (typeof ref === 'function') {\n\t\t\tthis.__ref = ref;\n\t\t\tref(undefined, undefined, entity, true);\n\t\t}\n\t}\n\n\t/** 创建 */\n\tprotected abstract createEntity(events: EventEmitter<any>): TEntity;\n\n\n\t/** 更新属性及子代 */\n\tupdate(attrs: Record<string, any>, children: any[]): void {\n\t\tupdateData(attrs, this.data);\n\t\tconst ref = attrs['n:ref'];\n\t\tconst oldRef = this.__ref;\n\t\tif (ref !== oldRef) {\n\t\t\tif (typeof ref === 'function') {\n\t\t\t\tref(this.__exposed);\n\t\t\t} else if (oldRef) {\n\t\t\t\tthis.__ref = undefined;\n\t\t\t}\n\t\t}\n\t\tsuper.update(attrs, children);\n\t}\n\tdestroy(): boolean {\n\t\tif (!super.destroy()) { return false; }\n\t\tconst ref = this.__ref;\n\t\tif (typeof ref !== 'function') { return true; }\n\t\tref(undefined, this.__exposed, this.entity, false);\n\t\treturn true;\n\t}\n}\n","import {\n\tTreeNodeList,\n\tNativeElementNode,\n\tMountedNode,\n\tElementComponent,\n\tMountOptions,\n\tElementEntity,\n} from '../../type';\nimport BaseProxy from './BaseProxy';\nimport convert, { destroy } from '../convert';\nimport draw, { getNodes, unmount } from '../draw';\nimport RefProxy from './RefProxy';\nimport { createMountedNode } from '../id';\nimport { componentValueSymbol } from '../../symbols';\nimport { defineProperty } from '../../install/monitorable';\nimport { isProduction } from '../../constant';\nimport EventEmitter from '../../EventEmitter';\nimport ContainerProxy from './ContainerProxy';\nimport ComponentProxy from './ComponentProxy';\n\nexport default class ElementProxy<\n\tT extends string | ElementComponent<any, any>\n> extends RefProxy<NativeElementNode, T, ElementEntity<NativeElementNode>> {\n\t/** 所属容器 */\n\treadonly container: ContainerProxy<any>;\n\t/** 渲染组件根部，如果自身是 ComponentProxy 则为自身 */\n\treadonly componentRoot?: ComponentProxy<any, any, any, any>;\n\n\tprops: object;\n\tprivate __nodes: TreeNodeList;\n\tnode?: NativeElementNode;\n\tcontent: (MountedNode | MountedNode[])[] = [];\n\tprivate __elementTagData: string | any;\n\tconstructor(\n\t\toriginalTag: any,\n\t\ttag: T,\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t) {\n\t\tsuper(parent.renderer, originalTag, tag, props, parent);\n\t\tthis.container = parent.container;\n\t\tthis.componentRoot = parent.componentRoot;\n\t\tif (!isProduction) { defineProperty(this, 'content', []); }\n\n\t\tthis.props = props;\n\t\t// 事件处理\n\t\tthis.events.updateInProps(props);\n\t\tthis.__nodes = convert(this, children);\n\t\tif (typeof tag === 'string') {\n\t\t\tthis.__elementTagData = tag;\n\t\t} else {\n\t\t\tthis.__elementTagData = (tag as any)[componentValueSymbol];\n\t\t}\n\t}\n\trequestDraw(): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tthis.container.markDraw(this);\n\t}\n\tcallHook(id: string): void {\n\t}\n\tcreateEntity(events: EventEmitter<any>): ElementEntity<NativeElementNode> {\n\t\tconst cfg: { [K in keyof ElementEntity<any>]-?:\n\t\t\t{ configurable: true, value: ElementEntity<any>[K], writable?: boolean }\n\t\t\t| { configurable: true, get(): ElementEntity<any>[K] }\n\t\t} = {\n\t\t\tdata: { configurable: true, value: this.data },\n\t\t\texposed: { configurable: true, get: () => this.exposed },\n\t\t\ton: { configurable: true, value: events.on },\n\t\t\temit: { configurable: true, value: events.emit },\n\t\t};\n\t\tconst entity: ElementEntity<any> = Object.create(null, cfg);\n\t\treturn entity;\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tthis.props = props;\n\t\t// 事件处理\n\t\tthis.events.updateInProps(props);\n\t\tthis.__nodes = convert(this, children, this.__nodes);\n\t\tthis.requestDraw();\n\t}\n\n\t_destroy(): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.destroyed = true;\n\t\tdestroy(this.__nodes);\n\t}\n\t_mount(mountOptions: MountOptions): MountOptions | void {\n\t\tif (this.node) { return; }\n\t\tconst { renderer, __elementTagData: tag, props, __nodes } = this;\n\t\tconst node = renderer.createElement(tag, props, mountOptions);\n\t\tif (!node) { return; }\n\t\tthis.node = node;\n\t\tthis.setExposed(node);\n\t\tconst subMountOptions = renderer.getMountOptions(\n\t\t\tnode,\n\t\t\tmountOptions,\n\t\t) || mountOptions;\n\t\tif (__nodes) {\n\t\t\tconst content = draw(renderer, subMountOptions, __nodes);\n\t\t\tthis.content = content;\n\t\t\tfor (const it of getNodes(content)) {\n\t\t\t\trenderer.insertNode(node, it);\n\t\t\t}\n\t\t}\n\t\tthis.tree = [createMountedNode({ node })];\n\t\trenderer.updateProps(\n\t\t\tnode,\n\t\t\ttag,\n\t\t\tprops,\n\t\t\tthis.events.emit,\n\t\t\tsubMountOptions,\n\t\t);\n\t\treturn subMountOptions;\n\t}\n\t_redrawChildren(mountOptions: MountOptions): void {\n\t\tconst { renderer, __nodes, content, node } = this;\n\t\tif (!node) { return; }\n\t\tif (!__nodes.length && content.length) {\n\t\t\tunmount(renderer, content);\n\t\t\tthis.content = [];\n\t\t} else if (__nodes.length && content.length) {\n\t\t\tthis.content = draw(renderer, mountOptions, __nodes, content);\n\t\t} else if (__nodes.length && !content.length) {\n\t\t\tconst newTree = draw(renderer, mountOptions, __nodes);\n\t\t\tthis.content = newTree;\n\t\t\tfor (const it of getNodes(newTree)) {\n\t\t\t\trenderer.insertNode(node, it);\n\t\t\t}\n\t\t}\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tthis._redrawChildren(mountOptions);\n\t\tconst { renderer, __elementTagData: tag, node, props } = this;\n\t\tif (!node) { return; }\n\t\trenderer.updateProps(\n\t\t\tnode,\n\t\t\ttag,\n\t\t\tprops || {},\n\t\t\tthis.events.emit,\n\t\t\tmountOptions,\n\t\t);\n\t}\n\t_unmount(): void {\n\t\tconst { renderer, tree, node } = this;\n\t\tif (!node) { return; }\n\t\trenderer.removeNode(node);\n\t\tunmount(renderer, tree);\n\t}\n}\n","import {\n\tMountOptions,\n\tTreeNodeList,\n\tShellComponent,\n\tDeliverComponent,\n\tShellContext,\n\tSlots,\n\tMountedNode,\n\tMonitored,\n\tShellEntity,\n} from '../../type';\nimport BaseProxy from './BaseProxy';\nimport draw, { unmount } from '../draw';\nimport RefProxy from './RefProxy';\nimport { isElement, Fragment } from '../../auxiliary';\nimport convert, { destroy } from '../convert';\nimport { monitor } from '../../install/monitorable';\nimport { wait } from '../../extends/refresh';\nimport { init, NormalizeAuxiliaryObject } from '../normalize';\nimport { isProduction } from '../../constant';\nimport { runShell } from '../../extends/current';\nimport { initContext } from '../../extends/context';\nimport getDelivered from '../getDelivered';\nimport EventEmitter from '../../EventEmitter';\nimport { createSlotApi, getSlots, setSlots } from '../slot';\nimport ContainerProxy from './ContainerProxy';\nimport ComponentProxy from './ComponentProxy';\n\n\nfunction getNodeArray(result: any): any[] {\n\tif (Array.isArray(result)) { return result; }\n\tif (!isElement(result)) { return [result]; }\n\tif (result.tag !== Fragment) { return [result]; }\n\treturn result.children;\n}\n\n// TODO\nexport default class ShellProxy<\n\tT extends ShellComponent<any, any>\n> extends RefProxy<any, T, ShellEntity> {\n\tget content(): (MountedNode | MountedNode[])[] { return this.tree; }\n\n\tprops: any;\n\tchildNodes: any[];\n\tsrc?: any;\n\n\t/** 组件槽 */\n\treadonly slots: Slots = Object.create(null);\n\tlastSlots: Record<string | symbol, any[]> | undefined;\n\t/** 结果渲染函数 */\n\tprivate __render: Monitored<any[], []>;\n\n\t/** 所属容器 */\n\treadonly container: ContainerProxy<any>;\n\t/** 渲染组件根部，如果自身是 ComponentProxy 则为自身 */\n\treadonly componentRoot?: ComponentProxy<any, any, any, any>;\n\n\n\trequestDraw(): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tthis.container.markDraw(this);\n\t}\n\tcallHook(id: string): void {\n\t}\n\n\tcreateEntity(events: EventEmitter<any>): ShellEntity {\n\t\tconst cfg: { [K in keyof ShellEntity]-?:\n\t\t\t{ configurable: true, value: ShellEntity[K], writable?: boolean }\n\t\t\t| { configurable: true, get(): ShellEntity[K] }\n\t\t} = {\n\t\t\tdata: { configurable: true, value: this.data },\n\t\t\texposed: { configurable: true, value: undefined },\n\t\t\ton: { configurable: true, value: events.on },\n\t\t\temit: { configurable: true, value: events.emit },\n\t\t};\n\t\tconst entity: ShellEntity = Object.create(null, cfg);\n\t\treturn entity;\n\t}\n\tconstructor(\n\t\toriginalTag: any,\n\t\ttag: T,\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t) {\n\t\tsuper(\n\t\t\tparent.renderer,\n\t\t\toriginalTag,\n\t\t\ttag,\n\t\t\tprops,\n\t\t\tparent,\n\t\t);\n\t\tthis.container = parent.container;\n\t\tthis.componentRoot = parent.componentRoot;\n\t\tthis.props = props;\n\t\tthis.childNodes = children;\n\t\tconst {slots} = this;\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tconst _this = this;\n\t\tconst {delivered} = this;\n\n\t\tconst refresh = (f?: () => void): void => { this.refresh(f); };\n\n\t\tconst event = this.events;\n\n\t\tconst context: ShellContext<any> = initContext({\n\t\t\tisShell: true,\n\t\t\tdelivered<T>(deliver: DeliverComponent<T>): T {\n\t\t\t\treturn getDelivered(delivered, deliver);\n\t\t\t},\n\t\t\tslot: createSlotApi(slots),\n\t\t\trefresh,\n\t\t\tget childNodes() {\n\t\t\t\treturn _this.childNodes;\n\t\t\t},\n\t\t\temit: event.emit,\n\t\t});\n\t\tconst normalizeAuxiliaryObject: NormalizeAuxiliaryObject = {\n\t\t\trenderer: this.renderer,\n\t\t\trefresh,\n\t\t\tslotRenderFnList: new WeakMap(),\n\t\t\tdelivered: this.delivered,\n\t\t\t// TODO\n\t\t\tsimpleParent: undefined,\n\t\t};\n\t\tthis.__render = monitor(\n\t\t\tchanged => changed && this.refresh(),\n\t\t\t() => {\n\t\t\t\tconst props = {...this.props};\n\t\t\t\tevent.updateInProps(props);\n\t\t\t\tconst result = isProduction\n\t\t\t\t\t? tag(props, context)\n\t\t\t\t\t: runShell(\n\t\t\t\t\t\tl => this.labels = l,\n\t\t\t\t\t\t() => tag(props, context),\n\t\t\t\t\t);\n\t\t\t\treturn init(\n\t\t\t\t\tnormalizeAuxiliaryObject,\n\t\t\t\t\tgetNodeArray(result),\n\t\t\t\t\tslots,\n\t\t\t\t\t[],\n\t\t\t\t\tfalse,\n\t\t\t\t\tfalse,\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\t\tthis.created = true;\n\t\tthis.refresh();\n\t\tthis._nodes = convert(this, this.__render());\n\t}\n\n\t/** 是否为刷新中 */\n\tprivate __refreshing = false;\n\t/** 是否需要继续刷新 */\n\tprivate __needRefresh = false;\n\t/** 延时刷新计数 */\n\tprivate __delayedRefresh = 0;\n\n\t/** 渲染结果 */\n\tprotected _nodes: TreeNodeList = [];\n\n\trefresh(): void;\n\trefresh<T>(f: () => T): T;\n\trefresh<T>(f?: () =>  T): T | void;\n\trefresh<T>(f?: () =>  T): T | void {\n\t\tif (typeof f === 'function') {\n\t\t\ttry {\n\t\t\t\tthis.__delayedRefresh++;\n\t\t\t\treturn f();\n\t\t\t} finally {\n\t\t\t\tthis.__delayedRefresh--;\n\t\t\t\tif (this.__delayedRefresh <= 0) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.destroyed) { return; }\n\t\tthis.__needRefresh = true;\n\t\tif (!this.created) { return; }\n\n\t\tif (this.__refreshing) { return; }\n\t\tthis.__refreshing = true;\n\n\t\tlet nodes: any[] | undefined;\n\t\twhile (this.__needRefresh && !wait(this)) {\n\t\t\tthis.__needRefresh = false;\n\t\t\tnodes = this.__render();\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis.__refreshing = false;\n\t\tif (!nodes) { return; }\n\t\tthis._nodes = convert(this, nodes, this._nodes);\n\t\tif (wait(this)) { return; }\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis.requestDraw();\n\t}\n\n\t_update(props: object, children: any[]): void {\n\t\tthis.props = props;\n\n\t\tconst slots = Object.create(null);\n\t\tgetSlots(this.renderer, children, slots);\n\t\tsetSlots(slots, this.slots, this.lastSlots);\n\t\tthis.lastSlots = slots;\n\t\tthis.childNodes = children;\n\t\tthis.refresh();\n\t}\n\t_destroy(): void {\n\t\tthis.__render.stop();\n\t\tdestroy(this._nodes);\n\t}\n\t_mount(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(\n\t\t\tthis.renderer,\n\t\t\tmountOptions,\n\t\t\tthis._nodes,\n\t\t);\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(\n\t\t\tthis.renderer,\n\t\t\tmountOptions,\n\t\t\tthis._nodes,\n\t\t\tthis.tree,\n\t\t);\n\t}\n\t_unmount(): void {\n\t\tunmount(this.renderer, this.tree);\n\t}\n}\n","import { Element, TreeNode, ValueElement, TreeNodeList } from '../../type';\nimport { isElement } from '../../auxiliary';\n\n/** 强制转换为 Element */\nexport function toElement(t: any): null | Element | ValueElement {\n\tif (t === false || t === null || t === undefined) {\n\t\treturn null;\n\t}\n\tif (isElement(t)) {\n\t\treturn t;\n\t}\n\treturn { key: t, props: {value: t}, children: [] };\n}\n\nexport function destroy(\n\ttree: TreeNode | TreeNode[] | null | TreeNodeList,\n): void {\n\tif (!tree) { return; }\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(t => destroy(t));\n\t\treturn;\n\t}\n\tconst { proxy } = tree;\n\tif (proxy) {\n\t\treturn proxy.destroy();\n\t}\n}\n","import {\n\tMountOptions,\n\tTreeNodeList,\n\tMountedNode,\n} from '../../type';\nimport BaseProxy from './BaseProxy';\nimport convert, { destroy } from '../convert';\nimport draw, { unmount } from '../draw';\nimport NodeProxy from './NodeProxy';\nimport { ScopeSlot } from '../../auxiliary';\n\nexport default class SlotProxy extends NodeProxy<typeof ScopeSlot> {\n\t__nodes: TreeNodeList;\n\tget content(): (MountedNode | MountedNode[])[] { return this.tree; }\n\n\tconstructor(\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t\tisDefault?: boolean,\n\t) {\n\t\tsuper(\n\t\t\tScopeSlot,\n\t\t\tScopeSlot,\n\t\t\t{},\n\t\t\t[],\n\t\t\tparent,\n\t\t);\n\t\tthis.__nodes = convert(this, children);\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tthis.__nodes = convert(this, children, this.__nodes);\n\t\tthis.requestDraw();\n\t}\n\n\t_destroy(): void {\n\t\tdestroy(this.__nodes);\n\t}\n\t_mount(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(this.renderer, mountOptions, this.__nodes);\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(this.renderer, mountOptions, this.__nodes, this.tree);\n\t}\n\t_unmount(): void {\n\t\tunmount(this.renderer, this.tree);\n\t}\n}\n","import {\n\tComponentEntity,\n\tEntityConstructor,\n\tStandardComponent,\n} from '../type';\nimport { safeify } from '../install/monitorable';\n\nconst constructors: EntityConstructor[] = [];\nexport function initEntity<\n\tC extends StandardComponent<any, any, any>,\n\tParent extends ComponentEntity<any, any> | undefined | never,\n>(\n\tentity: ComponentEntity<C, Parent>,\n): ComponentEntity<C, Parent> {\n\tfor (const constructor of constructors) {\n\t\tconstructor(entity);\n\t}\n\treturn entity;\n}\nexport function addEntityConstructor(\n\tconstructor: EntityConstructor,\n): void {\n\tconstructors.push(safeify(constructor));\n}\n","import {\n\tStandardComponent,\n\tSlots,\n\tTreeNodeList,\n\tComponentEntity,\n\tHook,\n\tEmit,\n\tOn,\n\tRenderComponent,\n} from '../../type';\nimport {\n\tcomponentsSymbol,\n\tobjectTypeSymbol,\n\tobjectTypeSymbolHookEntity,\n\tpropsSymbol,\n} from '../../symbols';\nimport { encase, postpone, createObject } from '../../install/monitorable';\nimport refresh, { wait } from '../../extends/refresh';\nimport convert, { destroy } from '../convert';\nimport { getSlots, setSlots } from '../slot';\n\nimport BaseProxy from './BaseProxy';\nimport { initEntity } from '../../extends/entity';\nimport { callHook, setHook } from '../../hook';\nimport EventEmitter from '../../EventEmitter';\nimport ContainerProxy from './ContainerProxy';\nimport RefProxy from './RefProxy';\n\nexport interface IRender {\n\trender(): any[];\n\tnodes: any[];\n\tstopRender(): void;\n}\n\nfunction createEntity(\n\tobj: ComponentProxy<any, any, any, any>,\n\tevents: EventEmitter<any>,\n): ComponentEntity<any> {\n\tconst cfg: { [K in Exclude<keyof ComponentEntity<any>, '$_label'>]-?:\n\t\t{ configurable: true, value: ComponentEntity<any>[K], writable?: boolean }\n\t\t| { configurable: true, get(): ComponentEntity<any>[K] }\n\t} = {\n\t\t[objectTypeSymbol]: { configurable: true, value: objectTypeSymbolHookEntity },\n\t\tdata: { configurable: true, value: obj.data },\n\t\texposed: { configurable: true, get: () => obj.exposed },\n\t\tparent: { configurable: true, value: obj.parentComponentProxy?.entity },\n\t\tcomponent: { configurable: true, value: obj.tag },\n\t\tcreated: { configurable: true, get: () => obj.created },\n\t\tdestroyed: { configurable: true, get: () => obj.destroyed },\n\t\tmounted: { configurable: true, get: () => obj.mounted },\n\t\tunmounted: { configurable: true, get: () => obj.unmounted },\n\t\t$_hooks: { configurable: true, value: Object.create(null) },\n\t\t$_useHookValues: { configurable: true, value: [] },\n\t\tcallHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(h: string) { callHook(h, entity); },\n\t\t},\n\t\tsetHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(id: string, hook: Hook<any>) { return setHook(id, hook, entity); },\n\t\t},\n\t\trefresh: { configurable: true, value: obj.refresh.bind(obj) },\n\t\ton: { configurable: true, value: events.on },\n\t\temit: { configurable: true, value: events.emit },\n\t};\n\tconst entity: ComponentEntity<any> = Object.create(null, cfg);\n\treturn initEntity(entity);\n}\n\nconst disabledKey = new Set([\n\t':', '@', '#', '*',\n\t'!', '%', '^', '~',\n\t'&', '?', '+', '.',\n\t'(', ')', '[', ']', '{', '}', '<', '>',\n]);\nfunction filter(k: string | number | symbol): boolean {\n\tif (typeof k !== 'string') { return true; }\n\tif (disabledKey.has(k[0])) { return false; }\n\tif (k.substr(0, 2) === 'n:') { return false; }\n\tif (k.substr(0, 3) === 'on:') { return false; }\n\treturn true;\n}\n\nfunction update<TProps extends object>(\n\tproxy: ComponentProxy<TProps, any, any, any>,\n\tprops: any,\n\tchildren: any[],\n): void {\n\tconst {props: propsObj, isNative} = proxy;\n\tconst newKeys = new Set(Object.keys(props).filter(filter));\n\tproxy.propsDefined.forEach(k => newKeys.add(k));\n\tfor (const k of Object.keys(propsObj)) {\n\t\tif (filter(k) && !newKeys.has(k)) {\n\t\t\tdelete propsObj[k as keyof TProps];\n\t\t}\n\t}\n\tfor (const k of newKeys) { propsObj[k as keyof TProps] = props[k]; }\n\n\tproxy.events.updateInProps(props);\n\tconst slots = Object.create(null);\n\tconst childNodes = getSlots(proxy.renderer, children, slots, isNative);\n\tsetSlots(slots, proxy.slots, proxy.lastSlots);\n\tproxy.lastSlots = slots;\n\tif (!isNative) { return; }\n\tproxy.nativeNodes = convert(proxy, childNodes, proxy.nativeNodes);\n\tif (!proxy.mounted) { return; }\n\tproxy.requestDraw();\n}\n\n\nexport default abstract class ComponentProxy<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tC extends StandardComponent<TProps, TExpose, TEmit>\n\t| RenderComponent<TProps, TExpose, TEmit>,\n> extends RefProxy<TExpose, C, ComponentEntity<C>> {\n\n\tisNative: boolean = false;\n\t/** 所属容器 */\n\treadonly container: ContainerProxy<any>;\n\t/** 渲染组件根部，如果自身是 ComponentProxy 则为自身 */\n\treadonly componentRoot?: ComponentProxy<any, any, any, any>;\n\n\t/** 子组件 */\n\treadonly children: Set<ComponentProxy<any, any, any, any>> = new Set();\n\n\treadonly emit: Emit<Record<string, any>>;\n\treadonly on: On<TExpose | undefined, Record<string, any>>;\n\n\treadonly components: Record<string, StandardComponent<any, any, any>>\n\t= Object.create(null);\n\n\t/** 组件属性 */\n\treadonly props: TProps;\n\t/** 组件属性定义 */\n\treadonly propsDefined: (keyof TProps & string)[];\n\t/** 组件槽 */\n\treadonly slots: Slots = Object.create(null);\n\tlastSlots: Record<string | symbol, any[]> | undefined;\n\n\t/** 原生子代 */\n\tnativeNodes: TreeNodeList | undefined;\n\n\t/** 父组件代理 */\n\treadonly parentComponentProxy?: ComponentProxy<any, any, any, any>;\n\n\tcallHook(id: string): void { callHook(id, this.entity); }\n\n\n\t/** 结果渲染函数 */\n\tprotected _render: () => any[];\n\t/** 结果渲染函数 */\n\tprotected readonly _stopRender: () => void;\n\n\tprotected abstract _init(): void;\n\tprotected abstract _initRender(): IRender;\n\n\t/** 结果渲染函数 */\n\tconstructor(\n\t\toriginalTag: any,\n\t\tcomponent: C,\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t) {\n\t\tsuper(parent.renderer, originalTag, component, props, parent);\n\t\tthis.container = parent.container;\n\t\tthis.componentRoot = this;\n\t\tthis.parentComponentProxy = parent.componentRoot;\n\t\tconst {events} = this;\n\t\tthis.emit = events.emit;\n\t\tthis.on = events.on;\n\n\t\tObject.assign(this.components, component[componentsSymbol]);\n\t\t// 属性定义及属性\n\t\tconst propsDefined = component[propsSymbol];\n\t\tif (Array.isArray(propsDefined)) {\n\t\t\tthis.propsDefined = propsDefined as (keyof TProps & string)[];\n\t\t\tthis.props = createObject(propsDefined, null);\n\t\t} else {\n\t\t\tthis.propsDefined = [];\n\t\t\tthis.props = encase(Object.create(null));\n\t\t}\n\t\tthis._init();\n\t\t// 初始化钩子\n\t\tthis.callHook('beforeCreate');\n\t\t// 更新属性\n\t\tthis._update(props, children);\n\t\t// 获取渲染函数及初始渲染\n\t\tconst { render, nodes, stopRender } = this._initRender();\n\t\tthis._render = render;\n\t\tthis._stopRender = stopRender;\n\t\tthis._nodes = convert(this, nodes);\n\t\t// 初始化钩子\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t\tif (this.needRefresh) { this.refresh(); }\n\t}\n\tcreateEntity(events: EventEmitter<any>): ComponentEntity<C> {\n\t\treturn createEntity(this, events);\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\trefresh(() => postpone(() => update(this, props, children)));\n\t}\n\t_destroy(): void {\n\t\tthis._stopRender();\n\t\tdestroy(this._nodes);\n\t}\n\n\tchildNodes: any[] = [];\n\t/** 是否为刷新中 */\n\tprivate __refreshing = false;\n\t/** 是否需要继续刷新 */\n\tprivate __needRefresh = false;\n\tget needRefresh(): boolean { return this.__needRefresh; }\n\t/** 延时刷新计数 */\n\tprivate __delayedRefresh = 0;\n\n\t/** 渲染结果 */\n\tprotected _nodes: TreeNodeList = [];\n\n\trefresh(): void;\n\trefresh<T>(f: () => T): T;\n\trefresh<T>(f?: () =>  T): T | void;\n\trefresh<T>(f?: () =>  T): T | void {\n\t\tif (typeof f === 'function') {\n\t\t\ttry {\n\t\t\t\tthis.__delayedRefresh++;\n\t\t\t\treturn f();\n\t\t\t} finally {\n\t\t\t\tthis.__delayedRefresh--;\n\t\t\t\tif (this.__delayedRefresh <= 0) { this.refresh(); }\n\t\t\t}\n\t\t}\n\t\tif (this.destroyed) { return; }\n\t\tthis.__needRefresh = true;\n\t\tif (!this.created) { return; }\n\n\t\tif (this.__refreshing) { return; }\n\t\tthis.__refreshing = true;\n\n\t\tlet nodes: any[] | undefined;\n\t\tfor (;;) {\n\t\t\tif (wait(this)) { break; }\n\t\t\tif (this.__delayedRefresh) { break; }\n\t\t\tif (!this.__needRefresh) { break; }\n\t\t\tthis.__needRefresh = false;\n\t\t\tnodes = this._render();\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis.__refreshing = false;\n\t\tif (wait(this)) { return; }\n\t\tif (this.__delayedRefresh) { return; }\n\t\tif (!nodes) { return; }\n\n\t\tthis._nodes = convert(this, nodes, this._nodes);\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis.requestDraw();\n\t}\n\t/** 刷新 */\n\trequestDraw(): void {\n\t\tthis.container.markDraw(this);\n\t}\n}\n","import {\n\tRenderComponent,\n\tTreeNodeList,\n\tDeliverComponent,\n\tLabel,\n\tMountOptions,\n\tMountedNode,\n} from '../../type';\nimport {\n\tcomponentsSymbol,\n\tcomponentValueSymbol,\n} from '../../symbols';\nimport { isProduction } from '../../constant';\nimport { monitor } from '../../install/monitorable';\nimport { isElement, Fragment, createTemplateElement } from '../../auxiliary';\nimport { runCurrent } from '../../extends/current';\nimport { initContext } from '../../extends/context';\n\nimport { destroy } from '../convert';\nimport draw, { unmount } from '../draw';\nimport {createSlotApi } from '../slot';\nimport getDelivered from '../getDelivered';\n\nimport ComponentProxy, { IRender } from './ComponentProxy';\nimport { init, NormalizeAuxiliaryObject } from '../normalize';\n\nfunction getNodeArray(result: any): any[] {\n\tif (Array.isArray(result)) { return result; }\n\tif (!isElement(result)) { return [result]; }\n\tif (result.tag !== Fragment) { return [result]; }\n\treturn result.children;\n}\nfunction initRender(proxy: RenderComponentProxy< any, any, any, any>): IRender {\n\tconst { tag, props, entity } = proxy;\n\tconst context = initContext({\n\t\tisShell: false,\n\t\tslot: createSlotApi(proxy.slots),\n\t\texpose: t => proxy.setExposed(t),\n\t\tget created() { return proxy.created; },\n\t\tget parent() { return proxy.parentComponentProxy?.entity; },\n\t\tget children() { return [...proxy.children].map(t => t.exposed); },\n\t\tget childNodes() { return proxy.childNodes; },\n\t\tget emit() { return proxy.emit; },\n\t\tdelivered<T>(deliver: DeliverComponent<T>): T{\n\t\t\treturn getDelivered(proxy.delivered, deliver);\n\t\t},\n\t\trefresh(f) { proxy.refresh(f); },\n\t}, entity);\n\tconst renderFn = tag[componentValueSymbol];\n\n\tconst renderNode = typeof renderFn !== 'function'\n\t\t? () => createTemplateElement(...proxy.childNodes)\n\t\t: () => runCurrent(\n\t\t\tentity,\n\t\t\tisProduction ? undefined : (l?: Label[]) => proxy.labels = l,\n\t\t\t() => renderFn(props || {}, context),\n\t\t);\n\n\tconst normalizeAuxiliaryObject: NormalizeAuxiliaryObject = {\n\t\trenderer: proxy.renderer,\n\t\trefresh: f => proxy.refresh(f),\n\t\tslotRenderFnList: new WeakMap<Function, Function>(),\n\t\tdelivered: proxy.delivered,\n\t\tsimpleParent: proxy.entity,\n\t};\n\tconst components = proxy.tag[componentsSymbol];\n\tconst componentsList = components ? [components] : [];\n\tconst render = monitor(\n\t\tc => c && proxy.refresh(),\n\t\t() => init(\n\t\t\tnormalizeAuxiliaryObject,\n\t\t\tgetNodeArray(renderNode()),\n\t\t\tproxy.slots,\n\t\t\tcomponentsList,\n\t\t\tfalse,\n\t\t\tfalse,\n\t\t),\n\t);\n\treturn {\n\t\tnodes: render(),\n\t\trender,\n\t\tstopRender: () => render.stop(),\n\t};\n\n}\nexport default class RenderComponentProxy<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tC extends RenderComponent<TProps, TExpose, TEmit>,\n> extends ComponentProxy<TProps, TExpose, TEmit, C> {\n\tget content(): (MountedNode | MountedNode[])[] { return this.tree; }\n\n\t/** 原生子代 */\n\tnativeNodes: TreeNodeList | undefined;\n\n\tprotected _init(): void {}\n\tprotected _initRender(): IRender {\n\t\treturn initRender(this);\n\t}\n\n\t_destroy(): void {\n\t\tthis._stopRender();\n\t\tdestroy(this._nodes);\n\t}\n\n\tchildNodes: any[] = [];\n\n\t/** 刷新 */\n\trequestDraw(): void {\n\t\tthis.container.markDraw(this);\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tconst {renderer, _nodes} = this;\n\t\tthis.tree = draw(renderer, mountOptions, _nodes, this.tree);\n\t}\n\t_mount(mountOptions: MountOptions): void {\n\t\tconst { renderer, _nodes } = this;\n\t\tthis.tree = draw(renderer, mountOptions, _nodes);\n\t}\n\t_unmount(): void {\n\t\tconst {renderer} = this;\n\t\tunmount(renderer, this.tree);\n\t}\n}\n","import {\n\tStandardComponent,\n\tNode,\n\tNativeShadowNode,\n\tMountedNode,\n\tDeliverComponent,\n\tMountOptions,\n\tComponent,\n\tNativeComponentNode,\n\tLabel,\n} from '../../type';\nimport {\n\tcomponentsSymbol,\n\tcomponentValueSymbol,\n} from '../../symbols';\nimport { isProduction } from '../../constant';\nimport { exec, monitor, defineProperty } from '../../install/monitorable';\nimport { isElement, isRenderElement } from '../../auxiliary';\nimport { runCurrent } from '../../extends/current';\nimport { initContext } from '../../extends/context';\nimport { isNativeComponent, isRenderComponent } from '../../is';\n\nimport { destroy } from '../convert';\nimport draw, { unmount, getNodes } from '../draw';\nimport normalize from '../normalize';\nimport { createSlotApi } from '../slot';\nimport getDelivered from '../getDelivered';\nimport { createMountedNode } from '../id';\n\nimport ComponentProxy, { IRender } from './ComponentProxy';\n\n\nfunction createResponsiveRender(\n\tproxy: ComponentProxy<any, any, any, any>,\n\tfunc: Function,\n\tcomponents?: Record<string, Component<any>> | null,\n): IRender {\n\t// 响应式\n\tconst slotRenderFns = new WeakMap<Function, Function>();\n\tconst render = monitor(\n\t\tc => c && proxy.refresh(),\n\t\t() => normalize(\n\t\t\tproxy,\n\t\t\tslotRenderFns,\n\t\t\tf => proxy.refresh(f),\n\t\t\t(func as () => Node)(),\n\t\t\tcomponents,\n\t\t),\n\t);\n\treturn {\n\t\tnodes: render(),\n\t\trender,\n\t\tstopRender: () => render.stop(),\n\t};\n}\n\nfunction initRender(proxy: StandardComponentProxy< any, any, any, any>): IRender {\n\n\tconst { tag, props, entity } = proxy;\n\tconst context = initContext({\n\t\tisShell: false,\n\t\tslot: createSlotApi(proxy.slots),\n\t\texpose: t => proxy.setExposed(t),\n\t\tget created() { return proxy.created; },\n\t\tget parent() { return proxy.parentComponentProxy?.entity; },\n\t\tget children() { return [...proxy.children].map(t => t.exposed); },\n\t\tget childNodes() { return proxy.childNodes; },\n\t\tget emit() { return proxy.emit; },\n\t\tdelivered<T>(deliver: DeliverComponent<T>): T{\n\t\t\treturn getDelivered(proxy.delivered, deliver);\n\t\t},\n\t\trefresh(f) { proxy.refresh(f); },\n\t}, entity);\n\tconst refresh = (changed: boolean): void => {\n\t\tif (!changed) { return; }\n\t\tproxy.refresh();\n\t};\n\tconst setLabel = isProduction\n\t\t? undefined\n\t\t: (l?: Label[]) => proxy.labels = l;\n\t// 初始化执行\n\tconst result = exec(\n\t\trefresh,\n\t\t{ resultOnly: true },\n\t\t() => runCurrent(entity, setLabel, () => tag(props, context)),\n\t);\n\tif (typeof result === 'function') {\n\t\treturn createResponsiveRender(proxy, result);\n\t}\n\tif (isRenderElement(result)) {\n\t\tconst { children } = result;\n\t\tif (children?.length === 1 && typeof children[0] === 'function') {\n\t\t\treturn createResponsiveRender(proxy, children[0]);\n\t\t}\n\t}\n\n\tif (isElement(result) && isRenderComponent(result.tag)) {\n\t\tconst {tag} = result;\n\t\tconst render = tag[componentValueSymbol];\n\t\tif (typeof render === 'function') {\n\t\t\treturn createResponsiveRender(\n\t\t\t\tproxy,\n\t\t\t\t(): Node => render(result.props || {}, context),\n\t\t\t\tresult.tag[componentsSymbol] || null,\n\t\t\t);\n\t\t}\n\t}\n\n\n\tconst normalizeRefresh = (f?: () => void): void => { proxy.refresh(f); };\n\tconst slotRenderFns = new WeakMap<Function, Function>();\n\n\tconst render = monitor(\n\t\trefresh,\n\t\t() => normalize(proxy, slotRenderFns, normalizeRefresh, runCurrent(\n\t\t\tentity,\n\t\t\tsetLabel,\n\t\t\t() => tag(props, context),\n\t\t)),\n\t);\n\treturn {\n\t\tnodes: exec(\n\t\t\trefresh,\n\t\t\t() => normalize(proxy, slotRenderFns, normalizeRefresh, result),\n\t\t\t{ resultOnly: true },\n\t\t),\n\t\trender,\n\t\tstopRender: () => render.stop(),\n\t};\n}\nexport default class StandardComponentProxy<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tC extends StandardComponent<TProps, TExpose, TEmit>,\n> extends ComponentProxy<TProps, TExpose, TEmit, C> {\n\tcontent: (MountedNode | MountedNode[])[] = [];\n\t/** 原生组件 */\n\tnative: NativeComponentNode | undefined;\n\n\tshadowTree: (MountedNode | MountedNode[])[] = [];\n\tnativeTree: (MountedNode | MountedNode[])[] = [];\n\tprivate _shadow: NativeShadowNode | undefined;\n\n\tprotected _init(): void {\n\t\tif (!isProduction) { defineProperty(this, 'content', []); }\n\n\t\tif (!isNativeComponent(this.tag)) { return; }\n\t\tconst value = this.renderer.createComponent?.();\n\t\tif (!value) { return; }\n\t\t[this.native, this._shadow] = value;\n\t}\n\tprotected _initRender(): IRender {\n\t\treturn initRender(this);\n\t}\n\n\t_destroy(): void {\n\t\tthis._stopRender();\n\t\tdestroy(this._nodes);\n\t}\n\n\tchildNodes: any[] = [];\n\n\n\t/** 刷新 */\n\trequestDraw(): void {\n\t\tthis.container.markDraw(this);\n\t}\n\tprivate __nativeTreeNountOptions: MountOptions | undefined;\n\t_mount(mountOptions: MountOptions): MountOptions | void {\n\t\tconst { nativeNodes, renderer, _shadow, native, _nodes } = this;\n\t\tif (!native || !nativeNodes || !_shadow) {\n\t\t\tthis.tree = this.content = draw(renderer, mountOptions, _nodes);\n\t\t\treturn;\n\t\t}\n\t\tthis.tree = [createMountedNode({node:native })];\n\t\tconst subMountOptions = renderer.getMountOptions(\n\t\t\t_shadow,\n\t\t\tmountOptions,\n\t\t) || mountOptions;\n\t\tthis.content = draw(renderer, subMountOptions, _nodes);\n\t\tfor (const it of getNodes(this.content)) {\n\t\t\trenderer.insertNode(_shadow, it);\n\t\t}\n\n\t\tconst nativeTreeNountOptions = renderer.getMountOptions(\n\t\t\tnative,\n\t\t\tmountOptions,\n\t\t) || mountOptions;\n\t\tthis.nativeTree = draw(renderer, nativeTreeNountOptions, nativeNodes);\n\t\tfor (const it of getNodes(this.nativeTree)) {\n\t\t\trenderer.insertNode(native, it);\n\t\t}\n\t\tthis.__nativeTreeNountOptions = nativeTreeNountOptions;\n\t\treturn subMountOptions;\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tconst {nativeNodes, renderer, __nativeTreeNountOptions, _nodes} = this;\n\t\tthis.content = draw(renderer, mountOptions, _nodes, this.content);\n\t\tif (!nativeNodes || !__nativeTreeNountOptions) {\n\t\t\tthis.tree = this.content;\n\t\t\treturn;\n\t\t}\n\t\tthis.nativeTree = draw(\n\t\t\trenderer,\n\t\t\t__nativeTreeNountOptions,\n\t\t\tnativeNodes,\n\t\t\tthis.nativeTree,\n\t\t);\n\t}\n\t_unmount(): void {\n\t\tconst {renderer, nativeTree} = this;\n\t\tunmount(renderer, this.tree);\n\t\tif (!nativeTree) { return; }\n\t\tunmount(renderer, nativeTree);\n\t}\n}\n","import { Recognizer, Component } from '../type';\n\nconst recognizers: Recognizer[] = [];\nexport function recognize(any: any): Component<any> | null {\n\tfor (const recognizer of recognizers) {\n\t\tconst res = recognizer(any);\n\t\tif (typeof res === 'function') { return res; }\n\t}\n\treturn typeof any === 'function' ? any : null;\n}\nexport default function addRecognizer(recognizer: Recognizer): void {\n\trecognizers.push(recognizer);\n}\n","import {\n\tNode,\n\tTreeNode,\n\tElement,\n\tValueElement,\n\tTreeNodeList,\n} from '../../type';\nimport ContainerProxy from '../proxy/ContainerProxy';\nimport BaseProxy from '../proxy/BaseProxy';\nimport DeliverProxy from '../proxy/DeliverProxy';\nimport ValueProxy from '../proxy/ValueProxy';\nimport GroupProxy from '../proxy/GroupProxy';\nimport ElementProxy from '../proxy/ElementProxy';\nimport ShellProxy from '../proxy/ShellProxy';\nimport { toElement } from './utils';\nimport { Container, Fragment, ScopeSlot } from '../../auxiliary';\nimport {\n\tisDeliverComponent,\n\tisSimpleComponent,\n\tisContainerComponent,\n\tisShellComponent,\n\tisRenderComponent,\n\tisElementComponent,\n} from '../../is';\nimport SlotProxy from '../proxy/SlotProxy';\nimport RenderComponentProxy from '../proxy/RenderComponentProxy';\nimport StandardComponentProxy from '../proxy/StandardComponentProxy';\nimport { recognize } from '../../extends/recognizer';\n\nfunction createProxy(\n\tproxy: BaseProxy<any>,\n\t{tag, props, children, isDefault }: Element,\n): BaseProxy<any> {\n\tif (tag === Container) {\n\t\treturn new ContainerProxy(tag, null, props, children, proxy);\n\t}\n\tif (tag === ScopeSlot) {\n\t\treturn new SlotProxy(children, proxy, isDefault);\n\t}\n\tif (tag === Fragment) {\n\t\treturn new GroupProxy(tag, children, proxy);\n\t}\n\tif (typeof tag === 'string') {\n\t\tif (tag.substr(0, 5) === 'core:') {\n\t\t\treturn new GroupProxy(tag, children, proxy);\n\t\t}\n\t\treturn new ElementProxy(tag, tag, props || {}, children, proxy);\n\t}\n\tconst componentTag = recognize(tag);\n\tif (typeof componentTag !== 'function') {\n\t\treturn new GroupProxy(tag, children, proxy);\n\t}\n\tif (isShellComponent(componentTag)) {\n\t\treturn new ShellProxy(tag, componentTag, props || {}, children, proxy);\n\t}\n\tif (isDeliverComponent(componentTag)) {\n\t\treturn new DeliverProxy(tag, componentTag, props || {}, children, proxy);\n\t}\n\tif (isContainerComponent(componentTag)) {\n\t\treturn new ContainerProxy(tag, componentTag, props, children, proxy);\n\t}\n\tif (isElementComponent(componentTag)) {\n\t\treturn new ElementProxy(tag, componentTag, props || {}, children, proxy);\n\t}\n\tif (isSimpleComponent(componentTag)) {\n\t\t// TODO: label\n\t\treturn new GroupProxy(tag, children, proxy);\n\t}\n\tif (isRenderComponent(componentTag)) {\n\t\t// TODO\n\t\treturn new RenderComponentProxy(tag, componentTag, props || {}, children, proxy);\n\t}\n\treturn new StandardComponentProxy(tag, componentTag, props || {}, children, proxy);\n}\n\nexport function createItem(\n\tproxy: BaseProxy<any>,\n\tsource: Node | ValueElement,\n): TreeNode | null {\n\tif (!source) { return null; }\n\tif (!source.tag) {\n\t\tconst { key, props } = source;\n\t\treturn { key, props, proxy: new ValueProxy(\n\t\t\tsource.props || {},\n\t\t\tproxy,\n\t\t) };\n\t}\n\tconst { tag, key, props } = source;\n\treturn { tag, key, props, proxy: createProxy(proxy, source) };\n}\n\nexport function createAll(\n\tproxy: BaseProxy<any>,\n\tsource: any,\n): TreeNodeList {\n\tif (!Array.isArray(source)) { source = [source]; }\n\tif (!source.length) { return []; }\n\treturn (source as any[]).map(item => {\n\t\tif (!Array.isArray(item)) {\n\t\t\treturn createItem(proxy, toElement(item));\n\t\t}\n\n\t\treturn item.flat(Infinity)\n\t\t\t.map(it => createItem(proxy, toElement(it)))\n\t\t\t.filter(Boolean) as TreeNode[];\n\t});\n}\n","export interface RecursiveArray<T> extends Array<RecursiveItem<T>>{}\nexport type RecursiveItem<T> = T | RecursiveItem<T>[];\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield *recursive2iterable(it);\n\t}\n}\n","import { Node, TreeNode, ValueElement, TreeNodeList } from '../../type';\nimport { recursive2iterable } from '../recursive';\nimport BaseProxy from '../proxy/BaseProxy';\nimport { toElement, destroy } from './utils';\nimport { createItem } from './create';\n\n/**\n * 更新树节点\n * @param proxy Neep 对象\n * @param source 用于替换的源\n * @param tree 已有树\n */\nfunction updateList(\n\tproxy: BaseProxy<any>,\n\tsource: any[],\n\ttree: TreeNode | null | TreeNode[],\n): TreeNode[] {\n\tif (!tree) { tree = []; }\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: TreeNode[] = [];\n\tfor (const src of recursive2iterable(source)) {\n\t\tconst node = toElement(src);\n\t\tif (!node) { continue; }\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === node.tag && it.key === node.key);\n\t\tif (index >= 0) {\n\t\t\tconst newNode = updateItem(\n\t\t\t\tproxy,\n\t\t\t\tnode,\n\t\t\t\ttree[index],\n\t\t\t);\n\t\t\tif (newNode) {\n\t\t\t\tnewList.push(newNode);\n\t\t\t}\n\t\t\ttree.splice(index, 1);\n\t\t} else {\n\t\t\tconst newNode = createItem(proxy, node);\n\t\t\tif (newNode) {\n\t\t\t\tnewList.push(newNode);\n\t\t\t}\n\t\t}\n\t}\n\tdestroy(tree);\n\treturn newList;\n}\n\n/**\n * 更新树节点\n * @param tree 已有树\n * @param source 用于替换的源\n * @param proxy Neep 对象\n */\nfunction updateItem(\n\tproxy: BaseProxy<any>,\n\tsource: Node | ValueElement,\n\ttree?: TreeNode | null | TreeNode[],\n): TreeNode | null {\n\tif (!tree) {\n\t\treturn createItem(proxy, source);\n\t}\n\tif (!source) {\n\t\tdestroy(tree);\n\t\treturn null;\n\t}\n\tif (Array.isArray(tree)) {\n\t\tif (!tree.length) {\n\t\t\treturn createItem(proxy, source);\n\t\t}\n\t\tconst index = tree.findIndex(it => it.tag === source.tag);\n\t\tif (index < 0) {\n\t\t\tdestroy(tree);\n\t\t\treturn createItem(proxy, source);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tdestroy(all);\n\t}\n\tif (source.tag !== tree.tag) {\n\t\tdestroy(tree);\n\t\treturn createItem(proxy, source);\n\t}\n\tif (tree.proxy) {\n\t\tconst { proxy } = tree;\n\t\tconst { props = {}, key } = source;\n\t\tproxy.update(source.props || {}, source.children || []);\n\t\treturn { tag: tree.tag, props, key, proxy };\n\t}\n\tdestroy(tree);\n\treturn createItem(proxy, source);\n}\n\n\nexport function *updateAll(\n\tproxy: BaseProxy<any>,\n\tsource: any,\n\ttree: TreeNodeList,\n): Iterable<TreeNode | null | TreeNode[]> {\n\tif (!Array.isArray(source)) { source = [source]; }\n\tlet index = 0;\n\tlet length = Math.min(source.length || 1, tree.length);\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tyield updateList(proxy, src, tree[index]);\n\t\t} else {\n\t\t\tyield updateItem(proxy, toElement(src), tree[index]);\n\t\t}\n\t}\n\tlength = Math.max(source.length, source.length);\n\tif (tree.length > index) {\n\t\t// 销毁多余项\n\t\tfor (; index < length; index++) {\n\t\t\tdestroy(tree[index]);\n\t\t}\n\t}\n\tif (source.length > index) {\n\t\t// 创建多余项\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = toElement(source[index]);\n\t\t\tif (Array.isArray(src)) {\n\t\t\t\tyield src.flat(Infinity)\n\t\t\t\t\t.map(it => createItem(proxy, it))\n\t\t\t\t\t.filter(Boolean) as TreeNode[];\n\t\t\t} else {\n\t\t\t\tyield createItem(proxy, src);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { TreeNodeList } from '../../type';\nimport BaseProxy from '../proxy/BaseProxy';\nimport { createAll } from './create';\nimport { updateAll } from './update';\nimport refresh from '../../extends/refresh';\nimport { postpone } from '../../install/monitorable';\n\nexport { destroy } from './utils';\n\n/**\n * 更新树\n * @param source 用于替换的源\n * @param proxy Neep 对象\n * @param tree 已有树\n */\nfunction convert(\n\tproxy: BaseProxy<any>,\n\tsource: any[],\n\ttree?: TreeNodeList,\n): TreeNodeList {\n\treturn refresh(() => postpone(() => {\n\t\tif (!tree) {\n\t\t\treturn createAll(proxy, source);\n\t\t}\n\t\treturn [...updateAll(proxy, source, tree)];\n\t}));\n}\n\n\nexport default convert;\n","import { ContainerProxy } from '../type';\nimport {printError } from '../install/monitorable';\nimport { nextFrame } from '../install/renderer';\n\nlet awaitDraw = new Set<ContainerProxy<any>>();\n\nconst rendererDraw = new Set<(() => void)>();\nconst baseTick: [number, () => void][] = [];\nconst middleTick: [number, () => void][] = [];\nconst endTick: [number, () => void][] = [];\n\nfunction execTickList(list: [number, () => void][]): void {\n\tconst execList = [...list].sort(([a], [b]) => b - a);\n\tlist.length = 0;\n\ttry {\n\t\texecList.forEach(([, f]) => f());\n\t} catch (e) {\n\t\tprintError(e);\n\t}\n}\nfunction execContainerList(): void {\n\tconst list = [...awaitDraw];\n\tawaitDraw.clear();\n\tlist.map(c => c.drawAll());\n}\nfunction execRendererDrawList(): void {\n\tconst rendererDrawList = [...rendererDraw];\n\trendererDraw.clear();\n\tfor (const f of rendererDrawList) {\n\t\ttry {\n\t\t\tf();\n\t\t} catch (e) {\n\t\t\tprintError(e);\n\t\t}\n\t}\n}\n\nlet requested = false;\nfunction request(): void {\n\tif (requested) { return; }\n\trequested = true;\n\tnextFrame(() => {\n\t\trequested = false;\n\t\texecTickList(baseTick);\n\t\texecContainerList();\n\t\texecTickList(middleTick);\n\t\texecRendererDrawList();\n\t\texecTickList(endTick);\n\t});\n}\n\nexport default function nextTick(\n\tfn: () => void,\n\tlevel: number = 0,\n\ttype?: 'middle' | 'end',\n): void {\n\tconst list = type === 'middle' ? middleTick\n\t\t: type === 'end' ? endTick : baseTick;\n\tlist.push([level, fn]);\n\trequest();\n}\n\nexport function markDraw(c: ContainerProxy<any>): void {\n\tawaitDraw.add(c);\n\trequest();\n}\n\nexport function addRendererDraw(fn: () => void): void {\n\trendererDraw.add(fn);\n\trequest();\n}\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport {\n\tNativeNode,\n\tNativeContainerNode,\n\tMountedNode,\n\tContainerComponent,\n\tMountOptions,\n\tContainerEntity,\n\tHook,\n} from '../../type';\nimport {\n\trendererSymbol,\n\tcomponentValueSymbol,\n\tobjectTypeSymbolHookEntity,\n\tobjectTypeSymbol,\n} from '../../symbols';\nimport { getRender } from '../../install';\nimport { defineProperty } from '../../install/monitorable';\nimport { createMountedNode } from '../id';\nimport convert, { destroy } from '../convert';\nimport draw, { unmount, getNodes } from '../draw';\nimport BaseProxy, { setCompleteList } from './BaseProxy';\nimport ComponentProxy from './ComponentProxy';\nimport { isProduction } from '../../constant';\nimport { createPlaceholder } from '../draw/create';\nimport EventEmitter from '../../EventEmitter';\nimport { markDraw } from '../../extends/nextTick';\nimport { callHook, setHook } from '../../hook';\nimport RefProxy from './RefProxy';\n\nfunction createEntity<P extends object>(\n\tobj: ContainerProxy<P>,\n\tevents: EventEmitter<ContainerEntity<any>>,\n): ContainerEntity<any> {\n\tconst cfg: { [K in keyof ContainerEntity<any>]-?:\n\t\t{ configurable: true, value: ContainerEntity<any>[K], writable?: boolean }\n\t\t| { configurable: true, get(): ContainerEntity<any>[K] }\n\t} = {\n\t\t[objectTypeSymbol]: { configurable: true, value: objectTypeSymbolHookEntity },\n\t\tdata: { configurable: true, value: obj.data },\n\t\texposed: { configurable: true, get: () => obj.exposed },\n\t\t// component: { configurable: true, value: obj.tag },\n\t\tcreated: { configurable: true, get: () => obj.created },\n\t\tdestroyed: { configurable: true, get: () => obj.destroyed },\n\t\tmounted: { configurable: true, get: () => obj.mounted },\n\t\tunmounted: { configurable: true, get: () => obj.unmounted },\n\t\t$_hooks: { configurable: true, value: Object.create(null) },\n\t\tcallHook: { configurable: true, value(h: string) { callHook(h, entity); } },\n\t\tsetHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(id: string, hook: Hook<any>) { return setHook(id, hook, entity); },\n\t\t},\n\t\ton: { configurable: true, value: events.on },\n\t\temit: { configurable: true, value: events.emit },\n\t};\n\tconst entity: ContainerEntity<any> = Object.create(null, cfg);\n\treturn entity;\n}\n\nexport default class ContainerProxy<\n\tP extends object\n> extends RefProxy<any, ContainerComponent<P> | null, ContainerEntity<any>> {\n\t/** 所属容器 */\n\treadonly container: ContainerProxy<any>;\n\t/** 渲染组件根部，如果自身是 ComponentProxy 则为自身 */\n\treadonly componentRoot?: ComponentProxy<any, any, any, any>;\n\n\tsetmountedRoot(target?: any, next?: any): void {\n\t\tif (this.parentProxy) { return; }\n\t\tconst container = this.__container;\n\t\tif (!container) { return; }\n\t\tconst {renderer} = this;\n\t\tconst [r, n] = renderer.getContainer(container, target, next);\n\t\tif (!r) { return; }\n\t\tfor (const it of getNodes(this.tree)) {\n\t\t\trenderer.insertNode(r, it, n);\n\t\t}\n\t}\n\n\tprivate readonly __containerData: any;\n\t/** 组件树结构 */\n\tcontent: (MountedNode | MountedNode[])[] = [];\n\n\treadonly rootContainer: ContainerProxy<any> = this;\n\tconstructor(\n\t\toriginalTag: any,\n\t\tcomponent: ContainerComponent<P> | null = null,\n\t\tprops: Record<string, any> = {},\n\t\tchildren: any[],\n\t\tparent?: BaseProxy<any>,\n\t) {\n\t\tsuper(\n\t\t\tcomponent\n\t\t\t\t? getRender(component[rendererSymbol], parent?.renderer)\n\t\t\t\t: getRender(parent?.renderer),\n\t\t\toriginalTag,\n\t\t\tcomponent,\n\t\t\tprops,\n\t\t\tparent,\n\t\t);\n\t\tthis.container = this;\n\t\tthis.componentRoot = parent?.componentRoot;\n\n\t\tif (component) {\n\t\t\tthis.__containerData = component[componentValueSymbol];\n\t\t}\n\t\tif (!isProduction) { defineProperty(this, 'content', []); }\n\t\t// 事件处理\n\t\tthis.events.updateInProps(props);\n\t\tif (parent) {\n\t\t\tthis.rootContainer = parent.container.rootContainer;\n\t\t}\n\t\tthis.__nodes = convert(this, children);\n\t\tthis.created = true;\n\t}\n\n\tcreateEntity(events: EventEmitter<any>): ContainerEntity<any> {\n\t\treturn createEntity(this, events);\n\t}\n\tprivate __nodes: any[] = [];\n\tsetChildren(children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.__nodes = convert(this, children, this.__nodes);\n\t\tthis.requestDraw();\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: Record<string, any>, children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.__nodes = convert(this, children, this.__nodes);\n\t\t// 事件处理\n\t\tthis.events.updateInProps(props);\n\t\tthis.requestDraw();\n\t}\n\t_destroy(): void { destroy(this.__nodes); }\n\tcallHook(id: string): void { callHook(id, this.entity); }\n\n\trequestDraw(): void { this.markDraw(this); }\n\tprivate __container: NativeContainerNode | null = null;\n\tprivate __placeholder: MountedNode | undefined;\n\tprivate __placeholderNode: NativeNode | undefined;\n\tprivate __targetNode: NativeContainerNode | null = null;\n\tprivate __insertNode: NativeNode | null = null;\n\tprivate __nextNode: NativeNode | null = null;\n\t_mount(opt: MountOptions): MountOptions | undefined {\n\t\tconst { parentProxy, renderer } = this;\n\t\tconst parentRenderer = parentProxy?.renderer || renderer;\n\n\t\tconst {\n\t\t\tcontainer,\n\t\t\ttarget: targetNode,\n\t\t\tinsert,\n\t\t\tnext,\n\t\t\texposed,\n\t\t} = renderer.mountContainer(\n\t\t\tthis.__containerData,\n\t\t\tthis.attrs,\n\t\t\tthis.events.emit,\n\t\t\tparentProxy?.renderer,\n\t\t);\n\t\tconsole.log(exposed);\n\t\tthis.setExposed(exposed);\n\t\tconst subOpt = renderer.getMountOptions(container, opt) || opt;\n\n\t\tconst placeholder = createPlaceholder(parentRenderer);\n\t\tthis.__placeholder = placeholder;\n\t\tconst placeholderNode = placeholder.node!;\n\t\tthis.__placeholderNode = placeholderNode;\n\t\tthis.__container = container;\n\t\tconst content = draw(renderer, subOpt, this.__nodes);\n\t\tthis.content = content;\n\t\tthis.__insertNode = insert;\n\t\tthis.__nextNode = next;\n\t\tif (!targetNode && parentRenderer === renderer) {\n\t\t\tthis.tree = insert\n\t\t\t\t? [...content, createMountedNode({ node: insert }), placeholder]\n\t\t\t\t: [...content, placeholder];\n\t\t\treturn subOpt;\n\t\t}\n\t\tconst target = targetNode || container;\n\t\tthis.__targetNode = target;\n\t\tfor (const it of getNodes(content)) {\n\t\t\trenderer.insertNode(target, it, next);\n\t\t}\n\t\tthis.tree = insert\n\t\t\t? [createMountedNode({ node: insert }), placeholder]\n\t\t\t: [placeholder];\n\t\treturn subOpt;\n\t}\n\t_redrawSelf(): void {\n\t\tconst { __targetNode, __insertNode, __nextNode } = this;\n\t\tconst { attrs, parentProxy, renderer } = this;\n\t\tconst placeholder = this.__placeholder!;\n\t\tconst placeholderNode = this.__placeholderNode!;\n\t\tconst container = this.__container!;\n\t\tconst parentRenderer = parentProxy?.renderer || renderer;\n\n\t\tconst {target: targetNode, insert, next} = renderer.updateContainer(\n\t\t\tcontainer,\n\t\t\t__targetNode,\n\t\t\t__insertNode,\n\t\t\t__nextNode,\n\t\t\tthis.__containerData,\n\t\t\tattrs,\n\t\t\tthis.events.emit,\n\t\t\tparentProxy?.renderer,\n\t\t);\n\t\tthis.__insertNode = insert;\n\t\tthis.__nextNode = next;\n\t\tconst parentNode = parentRenderer.getParent(placeholderNode);\n\t\tif (insert !== __insertNode) {\n\t\t\tif (__insertNode) { renderer.removeNode(__insertNode); }\n\t\t\tif (insert && parentNode) {\n\t\t\t\trenderer.insertNode(parentNode, insert, placeholderNode);\n\t\t\t}\n\t\t}\n\t\tif (!targetNode && parentRenderer === renderer) {\n\t\t\tconst { content } = this;\n\t\t\tif (__targetNode && parentNode) {\n\t\t\t\tconst nextNode = insert || placeholderNode;\n\t\t\t\tfor (const it of getNodes(content)) {\n\t\t\t\t\tparentRenderer.insertNode(parentNode, it, nextNode);\n\t\t\t\t}\n\t\t\t\tthis.__targetNode = null;\n\t\t\t}\n\t\t\tthis.tree = insert\n\t\t\t\t? [...content, createMountedNode({ node: insert }), placeholder]\n\t\t\t\t: [...content, placeholder];\n\t\t} else {\n\t\t\tconst target = targetNode || container;\n\t\t\tthis.__targetNode = target;\n\t\t\tif (target !== __targetNode || next !== __nextNode) {\n\t\t\t\tfor (const it of getNodes(this.content)) {\n\t\t\t\t\trenderer.insertNode(target, it, next);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tree = insert\n\t\t\t\t? [createMountedNode({ node: insert }), placeholder]\n\t\t\t\t: [placeholder];\n\t\t}\n\t\trenderer.recoveryContainer(\n\t\t\tcontainer,\n\t\t\t__targetNode,\n\t\t\t__insertNode,\n\t\t\t__nextNode,\n\t\t\ttargetNode,\n\t\t\tinsert,\n\t\t\tnext,\n\t\t\tthis.__containerData,\n\t\t\tattrs,\n\t\t\tparentProxy?.renderer,\n\t\t);\n\t}\n\t_redrawChildren(opts: MountOptions): void {\n\t\tconst content = draw(this.renderer, opts, this.__nodes, this.content);\n\t\tthis.content = content;\n\t\tif (!this.__targetNode) { return; }\n\t\tconst placeholder = this.__placeholder!;\n\t\tconst insertNode = this.__insertNode;\n\t\tthis.tree = insertNode\n\t\t\t? [...content, createMountedNode({ node: insertNode }), placeholder]\n\t\t\t: [...content, placeholder];\n\t}\n\t_redraw(opt: MountOptions): void {\n\t\tthis._redrawChildren(opt);\n\t\tthis._redrawSelf();\n\t}\n\t_unmount(): void {\n\t\tconst { parentProxy, renderer, __insertNode } = this;\n\t\tconst parentRenderer = parentProxy?.renderer || renderer;\n\t\tunmount(this.renderer, this.content);\n\t\tif (__insertNode) { parentRenderer.removeNode(__insertNode); }\n\t\tparentRenderer.removeNode(this.__placeholderNode!);\n\t\trenderer.unmountContainer(\n\t\t\tthis.__container!,\n\t\t\tthis.__targetNode,\n\t\t\t__insertNode,\n\t\t\tthis.__nextNode,\n\t\t\tthis.__containerData,\n\t\t\tthis.attrs,\n\t\t\tparentProxy?.renderer,\n\t\t);\n\t}\n\n\t/** 等待重画的项目 */\n\tprivate __awaitDraw = new Set<BaseProxy<any>>();\n\t/** 标记需要绘制的元素 */\n\tmarkDraw(proxy: BaseProxy<any>): void {\n\t\tif (this.parentProxy?.renderer === this.renderer) {\n\t\t\tthis.parentProxy.container.markDraw(proxy);\n\t\t\treturn;\n\t\t}\n\t\tif (proxy === this && this.parentProxy) {\n\t\t\tthis.parentProxy.container.markDraw(this);\n\t\t} else {\n\t\t\tthis.__awaitDraw.add(proxy);\n\t\t}\n\t\tthis.rootContainer.markDrawContainer(this);\n\t}\n\tdrawContainer(): void {\n\t\tif (this.destroyed || !this.__container) { return; }\n\t\tconst { __awaitDraw } = this;\n\t\tconst list = [...__awaitDraw];\n\t\t__awaitDraw.clear();\n\t\tlist.map(c => c.redraw());\n\t}\n\tprivate __containers = new Set<ContainerProxy<any>>();\n\tmarkDrawContainer(container: ContainerProxy<any>): void {\n\t\tthis.__containers.add(container);\n\t\tmarkDraw(this);\n\t}\n\tdrawAll(): void {\n\t\tconst containers = this.__containers;\n\t\tif (!containers.size) { return; }\n\t\tconst list = [...containers];\n\t\tcontainers.clear();\n\t\tconst completeList: (() => void)[] = [];\n\t\tsetCompleteList(completeList);\n\t\tlist.forEach(c => c.drawContainer());\n\t\tcompleteList.forEach(r => r());\n\t}\n}\n","import {\n\tElement,\n\tStandardComponent,\n\tRootEntity,\n\tContainerComponent,\n\tComponent,\n\tValue,\n} from './type';\nimport { isElement, createElement } from './auxiliary';\nimport { isProduction } from './constant';\nimport { devtools, getRender } from './install';\nimport ContainerProxy from './entity/proxy/ContainerProxy';\nimport { isContainerComponent } from './is';\nimport { monitor, value } from './install/monitorable';\nimport { init, NormalizeAuxiliaryObject } from './entity/normalize';\nimport { wait } from './extends/refresh';\nimport { rendererSymbol } from './symbols';\n\nfunction createContainerEntity(\n\te: Element | Component<any> | undefined,\n\tp: Record<string, any>,\n): [ContainerProxy<any>, Value<any[]>] {\n\tif (e === undefined) {\n\t\treturn createRender(null, p);\n\t}\n\tif (isContainerComponent(e)) {\n\t\treturn createRender(e, p);\n\t}\n\tif (!isElement(e)) {\n\t\treturn createRender(null, p, [createElement(e)]);\n\t}\n\tif (isContainerComponent(e.tag)) {\n\t\tconst params = {...e.props, ...p};\n\t\treturn createRender(e.tag, params);\n\t}\n\treturn createRender(null, p, [e]);\n}\n\nfunction createRender(\n\ttag: ContainerComponent<any, any> | null,\n\tprops: Record<string, any>,\n\tchildNodes: any[] = [],\n): [ContainerProxy<any>, Value<any[]>] {\n\tconst children = value(childNodes);\n\n\tconst normalizeAuxiliaryObject: NormalizeAuxiliaryObject = {\n\t\trenderer: tag ? getRender(tag[rendererSymbol]) :  getRender(),\n\t\trefresh,\n\t\tslotRenderFnList: new WeakMap(),\n\t\tdelivered: Object.create(null),\n\t\t// TODO\n\t\tsimpleParent: undefined,\n\t};\n\n\tlet __needRefresh = false;\n\tlet __refreshing = false;\n\n\tlet container: ContainerProxy<any> | undefined;\n\tfunction refresh(): void {\n\t\tif (!container) {\n\t\t\t__needRefresh = true;\n\t\t\treturn;\n\t\t}\n\t\tif (container.destroyed) { return; }\n\t\t__needRefresh = true;\n\t\tif (!container.created) { return; }\n\n\t\tif (__refreshing) { return; }\n\t\t__refreshing = true;\n\n\t\tlet nodes: any[] | undefined;\n\t\tfor (;;) {\n\t\t\tif (wait(refreshObj)) { break; }\n\t\t\tif (!__needRefresh) { break; }\n\t\t\t__needRefresh = false;\n\t\t\tnodes = _render();\n\t\t\tif (container.destroyed) { return; }\n\t\t}\n\t\t__refreshing = false;\n\t\tif (wait(refreshObj)) { return; }\n\t\tif (!nodes) { return; }\n\n\t\tif (!container.mounted) { return; }\n\t\tif (container.destroyed) { return; }\n\t\tif (container.unmounted) { return; }\n\t\tcontainer.setChildren(nodes);\n\t}\n\tconst refreshObj = { refresh };\n\tconst slots = Object.create(null);\n\tconst _render = monitor(\n\t\tc => c && refresh(),\n\t\t() => init(\n\t\t\tnormalizeAuxiliaryObject,\n\t\t\tchildren.value,\n\t\t\tslots,\n\t\t\t[],\n\t\t\tfalse,\n\t\t\tfalse,\n\t\t),\n\t);\n\tcontainer = new ContainerProxy(tag, tag, props, _render());\n\tif (__needRefresh) { refresh(); }\n\treturn [container, children];\n}\n\nfunction render(\n\te?: Element | Component<any>,\n\tp: Record<string, any> = {},\n): RootEntity<any> {\n\tconst [container, children] =  createContainerEntity(e, p);\n\tconst entity: RootEntity<any> = Object.create(container.entity, {\n\t\tupdate: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(c?: Element | StandardComponent<any, any, any>) {\n\t\t\t\tif (container.destroyed) { return entity; }\n\t\t\t\tchildren(c === undefined ? []\n\t\t\t\t\t: isElement(c) ? [c] : [createElement(c)]);\n\t\t\t\treturn entity;\n\t\t\t},\n\t\t},\n\t\tmount: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(target?: any, next?: any) {\n\t\t\t\tif (container.destroyed) { return entity; }\n\t\t\t\tif (container.mounted) { return entity; }\n\t\t\t\tcontainer.mount({});\n\t\t\t\tcontainer.setmountedRoot(target, next);\n\t\t\t\treturn entity;\n\t\t\t},\n\t\t},\n\t\tunmount: {\n\t\t\tconfigurable: true,\n\t\t\tvalue() {\n\t\t\t\tif (!container.mounted) { return; }\n\t\t\t\tif (container.unmounted) { return; }\n\t\t\t\tif (!container.destroyed) { container.destroy(); }\n\t\t\t\tcontainer.unmount();\n\t\t\t\treturn entity;\n\t\t\t},\n\t\t},\n\t});\n\tif (!isProduction) {\n\t\tdevtools.renderHook(entity, container);\n\t}\n\treturn entity;\n}\n\nexport default render;\n","import {\n\tComponentFunc,\n\tStandardComponent,\n\tRenderComponent,\n\tSimpleComponent,\n\tContainerComponent,\n\tDeliverComponent,\n\tIRenderer,\n\tNode,\n\tComponentContext,\n\tNativeComponent,\n\tComponent,\n\tSimpleComponentFunc,\n\tShellComponentFunc,\n\tShellComponent,\n\tElement,\n\tElementComponent,\n\tSelfComponent,\n} from './type';\nimport {\n\tnameSymbol,\n\tcomponentsSymbol,\n\tobjectTypeSymbol,\n\tobjectTypeSymbolSimpleComponent,\n\tobjectTypeSymbolNativeComponent,\n\tobjectTypeSymbolRenderComponent,\n\tobjectTypeSymbolDeliverComponent,\n\tobjectTypeSymbolContainerComponent,\n\trendererSymbol,\n\tdeliverKeySymbol,\n\tdeliverDefaultSymbol,\n\tobjectTypeSymbolShellComponent,\n\tpropsSymbol,\n\tcomponentValueSymbol,\n\tobjectTypeSymbolElementComponent,\n} from './symbols';\nimport { createElement, createElementBase } from './auxiliary';\nimport { isRenderComponent } from './is';\n\n\ntype Render<\n\tTObject extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n> =\n\t((params: TObject, context: ComponentContext<TExpose, TEmit>) => Node)\n\t| RenderComponent<TObject, TExpose, TEmit>;\n\ninterface Options<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tTObject extends object,\n> {\n\tname?: string;\n\tcomponents?: Record<string, Component<any>>;\n\trender?: Render<TObject, TExpose, TEmit>;\n\tprops?: (keyof TProps)[];\n}\n\nfunction setObjectType<\n\tT extends Function & { [objectTypeSymbol]: any; }\n>(\n\tcomponent: T,\n\ttype: T extends Function & { [objectTypeSymbol]: infer S; } ? S : never,\n): T {\n\tReflect.defineProperty(component, objectTypeSymbol, { value: type });\n\treturn component;\n}\n\nfunction setName<\n\tT extends Function & { [nameSymbol]?: string; }\n>(component: T, name?: string): T {\n\tif (!name || typeof name !== 'string') { return component; }\n\tReflect.defineProperty(component, nameSymbol, { value: name });\n\treturn component;\n}\nfunction setValue<\n\tV, T extends Function & { [componentValueSymbol]: V; }\n>(component: T, value: V): T {\n\tReflect.defineProperty(component, componentValueSymbol, { value });\n\treturn component;\n}\nfunction setComponents<\n\tV, T extends Function & { [componentsSymbol]?: V; }\n>(component: T, components: V): T {\n\tif (!components || typeof components !== 'object') { return component; }\n\tReflect.defineProperty(component, componentsSymbol, { value: components });\n\treturn component;\n}\n\nfunction createSelfComponent<C extends SelfComponent<any>>(): C {\n\tconst component = function component(params: any): Element<C> {\n\t\treturn createElementBase(component, params) as Element<C>;\n\t} as  C;\n\treturn component;\n}\n\nexport function createDeliverComponent<T>(def: T): DeliverComponent<T>;\nexport function createDeliverComponent<T>(def?: T): DeliverComponent<T | undefined>;\nexport function createDeliverComponent<T, D>(def: D): DeliverComponent<T | D>;\nexport function createDeliverComponent<T>(def: T): DeliverComponent<T> {\n\tconst component = createSelfComponent<DeliverComponent<T>>();\n\tsetObjectType(component, objectTypeSymbolDeliverComponent);\n\tReflect.defineProperty(component, deliverKeySymbol, { value: Symbol() });\n\tReflect.defineProperty(component, deliverDefaultSymbol, { value: def });\n\treturn component;\n}\n\nexport function createRenderComponent<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>\n>(\n\tf: ComponentFunc<TProps, TExpose, TEmit>,\n\t{name, components}: {\n\t\tname?: string;\n\t\tcomponents?: Record<string, Component<any>>;\n\t} = {},\n): RenderComponent<TProps, TExpose, TEmit> {\n\tconst component = createSelfComponent<RenderComponent<TProps, TExpose, TEmit>>();\n\tsetObjectType(component, objectTypeSymbolRenderComponent);\n\tsetName(component, name);\n\tsetValue(component, f);\n\tsetComponents(component, components);\n\treturn component;\n}\nexport function createContainerComponent<P extends object, T = any>(\n\tvalue: T,\n\t{name, renderer}: { name?: string, renderer?: string | IRenderer} = {},\n): ContainerComponent<P, T> {\n\tconst component = createSelfComponent<ContainerComponent<P, T>>();\n\tsetObjectType(component, objectTypeSymbolContainerComponent);\n\tsetName(component, name);\n\tsetValue(component, value);\n\tif (typeof renderer === 'string' || typeof renderer === 'object') {\n\t\tReflect.defineProperty(component, rendererSymbol, { value: renderer });\n\t}\n\treturn component;\n}\nexport function createElementComponent<P extends object, T>(\n\tvalue: T,\n\t{ name }: { name?: string } = {},\n): ElementComponent<P, T> {\n\tconst component = createSelfComponent<ElementComponent<P, T>>();\n\tsetObjectType(component, objectTypeSymbolElementComponent);\n\tsetName(component, name);\n\tsetValue(component, value);\n\treturn component;\n}\n\nexport function createStandardComponent<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>\n>(\n\tf: ComponentFunc<TProps, TExpose, TEmit>,\n\toptions?: Options<TProps, TExpose, TEmit, never> & { render?: undefined },\n): StandardComponent<TProps, TExpose, TEmit>;\n\nexport function createStandardComponent<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tTObject extends object,\n>(\n\tf: (props: TProps, context: ComponentContext<TExpose, TEmit>) => TObject,\n\toptions: Options<TProps, TExpose, TEmit, TObject> & { render: Render<TObject, TExpose, TEmit>; },\n): StandardComponent<TProps, TExpose, TEmit>;\n\nexport function createStandardComponent<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tTObject extends object,\n>(\n\tf: (props: TProps, context: ComponentContext<TExpose, TEmit>) => TObject | Node,\n\t{name, components, render, props}: Options<TProps, TExpose, TEmit, TObject> = {},\n): StandardComponent<TProps, TExpose, TEmit> {\n\tconst component = createComponentFunc(f, render);\n\tsetName(component, name);\n\tsetComponents(component, components);\n\tif (Array.isArray(props)) {\n\t\tReflect.defineProperty(component, propsSymbol, { value: [...props] });\n\t}\n\treturn component;\n}\n\nfunction createComponentFunc<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tTObject extends object,\n>(\n\tf: (props: TProps, context: ComponentContext<TExpose, TEmit>) => TObject | Node,\n\trender?: Render<TObject, TExpose, TEmit>,\n): StandardComponent<TProps, TExpose, TEmit> {\n\tif (typeof render !== 'function') {\n\t\treturn f as StandardComponent<TProps, TExpose, TEmit>;\n\t}\n\tconst renderComponent = isRenderComponent(render)\n\t\t? render\n\t\t: createRenderComponent(render);\n\treturn function StandardComponent(props, context): Node {\n\t\treturn createElement(renderComponent, f(props, context) as TObject);\n\t};\n}\n\n\nexport function createNativeComponent<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>\n>(\n\tf: ComponentFunc<TProps, TExpose, TEmit>,\n\toptions: Options<TProps, TExpose, TEmit, never> & { render?: undefined },\n): NativeComponent<TProps, TExpose, TEmit>;\nexport function createNativeComponent<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tTObject extends object,\n>(\n\tf: (props: TProps, context: ComponentContext<TExpose, TEmit>) => TObject,\n\toptions: Options<TProps, TExpose, TEmit, TObject> & { render: Render<TObject, TExpose, TEmit>; },\n): NativeComponent<TProps, TExpose, TEmit>;\n\nexport function createNativeComponent<\n\tTProps extends object,\n\tTExpose extends object,\n\tTEmit extends Record<string, any>,\n\tTObject extends object,\n>(\n\tf: (props: TProps, context: ComponentContext<TExpose, TEmit>) => TObject | Node,\n\t{name, components, render, props}: Options<TProps, TExpose, TEmit, TObject> = {},\n): NativeComponent<TProps, TExpose, TEmit> {\n\tconst component = createComponentFunc(f, render) as NativeComponent<TProps, TExpose, TEmit>;\n\tsetObjectType(component, objectTypeSymbolNativeComponent);\n\tsetName(component, name);\n\tsetComponents(component, components);\n\tif (Array.isArray(props)) {\n\t\tReflect.defineProperty(component, propsSymbol, { value: [...props] });\n\t}\n\treturn component;\n}\n\n\nexport function createSimpleComponent<\n\tTProps extends object,\n\tTEmit extends Record<string, any>\n>(\n\tf: SimpleComponentFunc<TProps, TEmit>,\n\t{name, components}: {\n\t\tname?: string;\n\t\tcomponents?: Record<string, Component<any>>;\n\t} = {},\n): SimpleComponent<TProps, TEmit> {\n\tconst component = f as SimpleComponent<TProps, TEmit>;\n\tsetObjectType(component, objectTypeSymbolSimpleComponent);\n\tsetName(component, name);\n\tsetComponents(component, components);\n\treturn component;\n}\nexport function createShellComponent<\n\tTProps extends object,\n\tTEmit extends Record<string, any>\n>(\n\tf: ShellComponentFunc<TProps, TEmit>,\n\t{name}: { name?: string; } = {},\n): ShellComponent<TProps, TEmit> {\n\tconst component = f as ShellComponent<TProps, TEmit>;\n\tsetObjectType(component, objectTypeSymbolShellComponent);\n\tsetName(component, name);\n\treturn component;\n}\n\nexport {\n\tcreateStandardComponent as createComponent,\n};\n","import {\n\tComponent,\n\tSimpleComponent,\n} from '../type';\nimport { value } from '../install/monitorable';\nimport {\n\tcreateElement,\n} from '../auxiliary';\nimport {\n\tcreateSimpleComponent,\n} from '../create';\n\nconst LOADING = 0;\ntype LOADING = typeof LOADING;\nconst FAILING = -1;\ntype FAILING = typeof FAILING;\nconst COMPLETE = 1;\ntype COMPLETE = typeof COMPLETE;\n\nexport default function lazy<\n\tP extends object,\n\tC extends Component<P>\n>(\n\tcomponent: () => Promise<C | { default: C }>,\n\tPlaceholder?: Component<{ loading: boolean }>,\n): SimpleComponent<P, any> {\n\tconst reslut = value<LOADING | FAILING | COMPLETE>(LOADING);\n\tlet isLoad = false;\n\tconst ComponentValue = value<undefined | C>(undefined);\n\tasync function load(): Promise<void> {\n\t\tif (isLoad) { return; }\n\t\tisLoad = true;\n\t\tif (reslut()) { return; }\n\t\treslut(COMPLETE);\n\t\ttry {\n\t\t\tconst c = await component();\n\t\t\tif (typeof c === 'function') {\n\t\t\t\tComponentValue(c);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!c) {\n\t\t\t\treslut(FAILING);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof c.default === 'function') {\n\t\t\t\tComponentValue(c.default);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treslut(FAILING);\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\treslut(FAILING);\n\t\t}\n\t}\n\treturn createSimpleComponent((props, { childNodes }) => {\n\t\tconst com = ComponentValue();\n\t\tif (com) { return createElement(com, props, ...childNodes); }\n\t\tload();\n\t\tif (!Placeholder) { return null; }\n\t\treturn createElement(Placeholder, { loading: reslut() === LOADING});\n\t}, {name: 'Lazy'});\n}\n","import {\n\tMountOptions,\n\tTreeNodeList,\n\tSlots,\n\tMountedNode,\n\tMonitored,\n} from '../../type';\nimport BaseProxy from './BaseProxy';\nimport draw, { unmount } from '../draw';\nimport NodeProxy from './NodeProxy';\nimport { isElement, Fragment, Render } from '../../auxiliary';\nimport convert, { destroy } from '../convert';\nimport { monitor } from '../../install/monitorable';\nimport { wait } from '../../extends/refresh';\nimport { init, NormalizeAuxiliaryObject } from '../normalize';\n\n\nfunction getNodeArray(result: any): any[] {\n\tif (Array.isArray(result)) { return result; }\n\tif (!isElement(result)) { return [result]; }\n\tif (result.tag !== Fragment) { return [result]; }\n\treturn result.children;\n}\n\n\nexport default class RenderProxy extends NodeProxy<typeof Render> {\n\tget content(): (MountedNode | MountedNode[])[] { return this.tree; }\n\n\tchildNodes: any[];\n\n\t/** 结果渲染函数 */\n\tprivate __render: Monitored<any[], []>;\n\tconstructor(\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: BaseProxy<any>,\n\t) {\n\t\tsuper(Render, Render, props, children, parent);\n\t\tthis.childNodes = children;\n\n\t\tconst refresh = (f?: () => void): void => { this.refresh(f); };\n\n\t\tconst normalizeAuxiliaryObject: NormalizeAuxiliaryObject = {\n\t\t\trenderer: this.renderer,\n\t\t\trefresh,\n\t\t\tslotRenderFnList: new WeakMap(),\n\t\t\tdelivered: this.delivered,\n\t\t\t// TODO\n\t\t\tsimpleParent: undefined,\n\t\t};\n\t\tconst slots: Slots = Object.create(null);\n\t\tconst initChildNodes = (result: any): any => init(\n\t\t\tnormalizeAuxiliaryObject,\n\t\t\tgetNodeArray(result),\n\t\t\tslots,\n\t\t\t[],\n\t\t\tfalse,\n\t\t\ttrue,\n\t\t);\n\t\tthis.__render = monitor(\n\t\t\tchanged => changed && this.refresh(),\n\t\t\t() => {\n\t\t\t\tconst {childNodes} = this;\n\t\t\t\tif (childNodes.length !== 1) {\n\t\t\t\t\treturn initChildNodes(childNodes);\n\t\t\t\t}\n\t\t\t\tconst [f] = childNodes;\n\t\t\t\tif (typeof f !== 'function') {\n\t\t\t\t\treturn initChildNodes(childNodes);\n\t\t\t\t}\n\t\t\t\treturn initChildNodes(f());\n\t\t\t},\n\t\t);\n\t\tthis.created = true;\n\t\tthis.refresh();\n\t}\n\n\t/** 是否为刷新中 */\n\tprivate __refreshing = false;\n\t/** 是否需要继续刷新 */\n\tprivate __needRefresh = false;\n\t/** 延时刷新计数 */\n\tprivate __delayedRefresh = 0;\n\n\t/** 渲染结果 */\n\tprotected _nodes: TreeNodeList = [];\n\n\trefresh(): void;\n\trefresh<T>(f: () => T): T;\n\trefresh<T>(f?: () =>  T): T | void;\n\trefresh<T>(f?: () =>  T): T | void {\n\t\tif (typeof f === 'function') {\n\t\t\ttry {\n\t\t\t\tthis.__delayedRefresh++;\n\t\t\t\treturn f();\n\t\t\t} finally {\n\t\t\t\tthis.__delayedRefresh--;\n\t\t\t\tif (this.__delayedRefresh <= 0) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.destroyed) { return; }\n\t\tthis.__needRefresh = true;\n\t\tif (!this.created) { return; }\n\n\t\tif (this.__refreshing) { return; }\n\t\tthis.__refreshing = true;\n\n\t\tlet nodes: any[] | undefined;\n\t\twhile (this.__needRefresh && !wait(this)) {\n\t\t\tthis.__needRefresh = false;\n\t\t\tnodes = this.__render();\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis.__refreshing = false;\n\t\tif (!nodes) { return; }\n\t\tthis._nodes = convert(this, nodes, this._nodes);\n\t\tif (wait(this)) { return; }\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis.requestDraw();\n\t}\n\n\t_update(props: object, children: any[]): void {\n\t\tthis.childNodes = children;\n\t\tthis.refresh();\n\t}\n\t_destroy(): void {\n\t\tthis.__render.stop();\n\t\tdestroy(this._nodes);\n\t}\n\t_mount(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(\n\t\t\tthis.renderer,\n\t\t\tmountOptions,\n\t\t\tthis._nodes,\n\t\t);\n\t}\n\t_redraw(mountOptions: MountOptions): void {\n\t\tthis.tree = draw(\n\t\t\tthis.renderer,\n\t\t\tmountOptions,\n\t\t\tthis._nodes,\n\t\t\tthis.tree,\n\t\t);\n\t}\n\t_unmount(): void {\n\t\tunmount(this.renderer, this.tree);\n\t}\n}\n","import DeliverProxy from '../entity/proxy/DeliverProxy';\nimport ElementProxy from '../entity/proxy/ElementProxy';\nimport GroupProxy from '../entity/proxy/GroupProxy';\nimport ShellProxy from '../entity/proxy/ShellProxy';\nimport SlotProxy from '../entity/proxy/SlotProxy';\nimport ValueProxy from '../entity/proxy/ValueProxy';\nimport RenderProxy from '../entity/proxy/RenderProxy';\n\nimport NodeProxy from '../entity/proxy/NodeProxy';\n\nimport ContainerProxy from '../entity/proxy/ContainerProxy';\n\nimport StandardComponentProxy from '../entity/proxy/StandardComponentProxy';\nimport RenderComponentProxy from '../entity/proxy/RenderComponentProxy';\nimport ComponentProxy from '../entity/proxy/ComponentProxy';\n\nimport RefProxy from '../entity/proxy/RefProxy';\nimport BaseProxy from '../entity/proxy/BaseProxy';\n\nexport function isProxy(v: any, type?: ''): v is RefProxy<any, any, any>;\nexport function isProxy(v: any, type?: ''): v is BaseProxy<any>;\n\nexport function isProxy(v: any, type: 'component'): v is ComponentProxy<any, any, any, any>;\nexport function isProxy(v: any, type: 'standardComponent'): v is StandardComponentProxy<any, any, any, any>;\nexport function isProxy(v: any, type: 'renderComponent'): v is RenderComponentProxy<any, any, any, any>;\nexport function isProxy(v: any, type: 'container'): v is ContainerProxy<any>;\n\nexport function isProxy(v: any, type: 'node'): v is NodeProxy<any>;\nexport function isProxy(v: any, type: 'deliver'): v is DeliverProxy<any>;\nexport function isProxy(v: any, type: 'element'): v is ElementProxy<any>;\nexport function isProxy(v: any, type: 'group'): v is GroupProxy<any>;\nexport function isProxy(v: any, type: 'shell'): v is ShellProxy<any>;\nexport function isProxy(v: any, type: 'value'): v is ValueProxy;\nexport function isProxy(v: any, type: 'render'): v is RenderProxy;\nexport function isProxy(v: any, type: 'slot'): v is SlotProxy;\n\nexport function isProxy(v: any, type?: string): boolean {\n\tswitch (type) {\n\t\tcase 'standardComponent': return v instanceof StandardComponentProxy;\n\t\tcase 'renderComponent': return v instanceof RenderComponentProxy;\n\t\tcase 'component': return v instanceof ComponentProxy;\n\n\t\tcase 'container': return v instanceof ContainerProxy;\n\n\t\tcase 'deliver': return v instanceof DeliverProxy;\n\t\tcase 'element': return v instanceof ElementProxy;\n\t\tcase 'group': return v instanceof GroupProxy;\n\t\tcase 'shell': return v instanceof ShellProxy;\n\t\tcase 'value': return v instanceof ValueProxy;\n\t\tcase 'render': return v instanceof RenderProxy;\n\t\tcase 'slot': return v instanceof SlotProxy;\n\t\tcase 'node': return v instanceof NodeProxy;\n\t\tcase 'ref': return v instanceof RefProxy;\n\t}\n\treturn v instanceof BaseProxy;\n}\n","import { install as NeepInstall } from '@neep/core';\n\nexport {\n\tisValue,\n\tcreateContainerComponent,\n\tcreateElement,\n} from '@neep/core';\n\nexport default function installNeep(\n\trenderer: import('@neep/core').IRenderer,\n): void {\n\tNeepInstall({renderer});\n}\n","import { isValue } from '../../install/neep';\n\nexport type Id = string;\n\nfunction getId(v: any): Id | undefined {\n\tif (typeof v === 'string') { return v; }\n\tif (typeof v === 'number') { return String(v); }\n\treturn undefined;\n}\n\nconst PropsMap = new WeakMap<Element, Id | undefined>();\nexport default function updateId(\n\tprops: {[k: string]: any},\n\tel: Element,\n): void {\n\tconst old = PropsMap.get(el);\n\tconst id = getId(isValue(props.id) ? props.id() : props.id);\n\tPropsMap.set(el, id);\n\tif (id !== old) {\n\t\tif (typeof id === 'string') {\n\t\t\tel.id = id;\n\t\t} else {\n\t\t\tel.removeAttribute('id');\n\t\t}\n\t}\n}\n","import Neep from '@neep/core';\nimport { isValue } from '../../install/neep';\n\nexport type RecursiveItem<T> = T | RecursiveItem<T>[] | Neep.Value<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (isValue(list)) {\n\t\tyield *recursive2iterable(list());\n\t\treturn;\n\n\t}\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield *recursive2iterable(it);\n\t}\n}\n\nexport type Class = Set<string>;\nfunction getClass(\n\tlist: RecursiveItem<(string | {[k: string]: any})>,\n): Class | undefined {\n\tconst set = new Set<string>();\n\tfor (const v of recursive2iterable(list)) {\n\t\tif (!v) { continue; }\n\t\tif (typeof v === 'string') {\n\t\t\tfor (let k of v.split(' ').filter(Boolean)) {\n\t\t\t\tset.add(k);\n\t\t\t}\n\t\t} else if (typeof v === 'object') {\n\t\t\tfor (const k in v) {\n\t\t\t\tconst add = v[k];\n\t\t\t\tfor (let it of k.split(' ').filter(Boolean)) {\n\t\t\t\t\tset[add ? 'add' : 'delete'](it);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (!set.size) { return undefined; }\n\treturn set;\n}\nfunction update(\n\tel: Element,\n\tclasses?: Class,\n\toClasses?: Class,\n): void {\n\tif (classes && oClasses) {\n\t\tconst list = el.getAttribute('class') || '';\n\t\tconst classList = new Set(list.split(' ').filter(Boolean));\n\t\toClasses.forEach(c => classList.delete(c));\n\t\tclasses.forEach(c => classList.add(c));\n\t\tel.setAttribute('class', [...classList].join(' '));\n\t} else if (classes) {\n\t\tel.setAttribute('class', [...classes].join(' '));\n\t} else if (oClasses) {\n\t\tel.removeAttribute('class');\n\t}\n}\n\nconst PropsMap = new WeakMap<Element, Class | undefined>();\nexport default function updateClass(\n\tprops: {[k: string]: any},\n\tel: Element,\n): void {\n\tconst old = PropsMap.get(el);\n\tconst classes = getClass(isValue(props.class) ? props.class() : props.class);\n\tupdate(el, classes, old);\n\tPropsMap.set(el, classes);\n}\n","import { isValue } from '../../install/neep';\n\nexport type Style = string | Record<string, [string, 'important' | undefined]>;\n\nconst unit: Record<string, string> = {\n\t'width': 'px',\n\t'height': 'px',\n\t'top': 'px',\n\t'right': 'px',\n\t'bottom': 'px',\n\t'left': 'px',\n\t'border': 'px',\n\t'border-top': 'px',\n\t'border-right': 'px',\n\t'border-left': 'px',\n\t'border-bottom': 'px',\n\t'border-width': 'px',\n\t'border-top-width': 'px',\n\t'border-right-width': 'px',\n\t'border-left-width': 'px',\n\t'border-bottom-width': 'px',\n\t'border-radius': 'px',\n\t'border-top-left-radius': 'px',\n\t'border-top-right-radius': 'px',\n\t'border-bottom-left-radius': 'px',\n\t'border-bottom-right-radius': 'px',\n\t'padding': 'px',\n\t'padding-top': 'px',\n\t'padding-right': 'px',\n\t'padding-left': 'px',\n\t'padding-bottom': 'px',\n\t'margin': 'px',\n\t'margin-top': 'px',\n\t'margin-right': 'px',\n\t'margin-left': 'px',\n\t'margin-bottom': 'px',\n};\nfunction getStyle(\n\tstyle: any,\n): Style | undefined {\n\tif (isValue(style)) { style = style(); }\n\tif (typeof style === 'string') { return style; }\n\tif (!style) { return undefined; }\n\tif (typeof style !== 'object') { return undefined; }\n\tconst css: Record<string, [string, 'important' | undefined]> =\n\t\tObject.create(null);\n\tfor (let k in style) {\n\t\tlet value = style[k];\n\t\tif (isValue(value)) { value = value(); }\n\t\tconst key = k.substr(0, 2) === '--' ? k\n\t\t\t: k.replace(/[A-Z]/g, '-$1')\n\t\t\t\t.replace(/-+/g, '-')\n\t\t\t\t.toLowerCase();\n\t\tif (typeof value === 'number') {\n\t\t\tconst str = value && k in unit\n\t\t\t\t? `${ value }${ unit[k] }`\n\t\t\t\t: `${ value }`;\n\t\t\tcss[key] = [str, undefined];\n\t\t} else if (value && typeof value === 'string') {\n\t\t\tconst v = value.replace(/!important\\s*$/, '');\n\t\t\tcss[key] = [v, v === value ? undefined : 'important'];\n\t\t}\n\t}\n\treturn css;\n}\n\nfunction update(\n\tcss: CSSStyleDeclaration,\n\tstyle?: Style,\n\toStyle?: Style,\n): void {\n\tif (!style) {\n\t\tif (!oStyle) { return; }\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t\treturn;\n\t\t}\n\t\tfor (const k of Object.keys(oStyle)) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t\treturn;\n\t}\n\n\tif (typeof style === 'string') {\n\t\tif (style !== typeof oStyle) {\n\t\t\tcss.cssText = style;\n\t\t}\n\t\treturn;\n\t}\n\tif (!oStyle || typeof oStyle === 'string') {\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t}\n\t\tfor (const k of Object.keys(style)) {\n\t\t\tcss.setProperty(k, ...style[k]);\n\t\t}\n\t\treturn;\n\t}\n\n\tfor (const k of Object.keys(style)) {\n\t\tconst v = style[k];\n\t\tif (\n\t\t\t!oStyle[k]\n\t\t\t|| oStyle[k][0] !== v[0]\n\t\t\t|| oStyle[k][1] !== v[1]\n\t\t) {\n\t\t\tcss.setProperty(k, ...v);\n\t\t}\n\t}\n\tfor (const k of Object.keys(oStyle)) {\n\t\tif (!style[k]) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t}\n}\nconst PropsMap = new WeakMap<Element, Style | undefined>();\nexport default function updateStyle(\n\tprops: {[k: string]: any},\n\tel: Element,\n\tcss: CSSStyleDeclaration,\n\thasStyle?: boolean,\n): Style | undefined {\n\tif (!hasStyle) { return undefined; }\n\tconst old = PropsMap.get(el);\n\n\tconst style = getStyle(\n\t\tisValue(props.style) ? props.style() : props.style,\n\t);\n\tupdate(css, style, old);\n\tPropsMap.set(el, style);\n\treturn style;\n}\n","/* eslint-disable no-fallthrough */\nimport { isValue } from '../../install/neep';\n\nexport type Attrs = Record<string, string | null>;\n\nexport function setAttrs(\n\tel: Element,\n\tattrs: Record<string, string | null>,\n): void {\n\tif (el instanceof HTMLInputElement && 'checked' in attrs) {\n\t\tswitch (el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\t\tif ((attrs.checked !== null) !== el.checked) {\n\t\t\t\t\tel.checked = attrs.checked !== null;\n\t\t\t\t}\n\t\t}\n\t}\n\tif ((\n\t\tel instanceof HTMLSelectElement\n\t\t|| el instanceof HTMLInputElement\n\t\t|| el instanceof HTMLTextAreaElement\n\t) && 'value' in attrs) {\n\t\tconst value = attrs.value || '';\n\t\tif (el.value !== value) {\n\t\t\tel.value = value;\n\t\t}\n\t}\n\tif ((el instanceof HTMLDetailsElement) && 'open' in attrs) {\n\t\tconst value = attrs.open !== null;\n\t\tif (el.open !== value) {\n\t\t\tel.open = value;\n\t\t}\n\t}\n\tif (el instanceof HTMLMediaElement) {\n\t\tif ('muted' in attrs) {\n\t\t\tconst value = attrs.muted !== null;\n\t\t\tif (el.muted !== value) {\n\t\t\t\tel.muted = value;\n\t\t\t}\n\t\t}\n\t\tif ('paused' in attrs) {\n\t\t\tconst value = attrs.paused !== null;\n\t\t\tif (el.paused !== value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tel.pause();\n\t\t\t\t} else {\n\t\t\t\t\tel.play();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ('currentTime' in attrs) {\n\t\t\tconst value = attrs.currentTime;\n\t\t\tif (value && /^\\d+(\\.\\d+)?$/.test(value)) {\n\t\t\t\tconst num = Number(value);\n\t\t\t\tif (el.currentTime !== num) {\n\t\t\t\t\tel.currentTime = num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ('playbackRate' in attrs) {\n\t\t\tconst value = attrs.playbackRate;\n\t\t\tif (value && /^\\d+(\\.\\d+)?$/.test(value)) {\n\t\t\t\tconst num = Number(value);\n\t\t\t\tif (el.playbackRate !== num) {\n\t\t\t\t\tel.playbackRate = num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ('volume' in attrs) {\n\t\t\tconst value = attrs.volume;\n\t\t\tif (value && /^\\d+(\\.\\d+)?$/.test(value)) {\n\t\t\t\tconst num = Number(value);\n\t\t\t\tif (el.volume !== num) {\n\t\t\t\t\tel.volume = num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction stringify(\n\tdata: any,\n\tisOn = false,\n): string | null | undefined {\n\tif (data === undefined || data === null) { return data; }\n\tif (isOn && typeof data === 'function') { return undefined; }\n\tif (typeof data === 'boolean') { return data ? '' : null; }\n\tif (typeof data !== 'object') { return String(data); }\n\tif (data instanceof Date) {\n\t\treturn data.toISOString();\n\t}\n\tif (data instanceof RegExp) {\n\t\treturn data.toString();\n\t}\n\treturn JSON.stringify(data);\n}\nfunction getAttrs(\n\tprops: {[k: string]: any},\n\thasStyle: boolean,\n): Attrs {\n\tconst attrs: Attrs = Object.create(null);\n\tfor (const k in props) {\n\t\tif (/^(n|on|bind|slot)[:-]/.test(k)) { continue; }\n\t\tif (!/^[a-zA-Z:_][a-zA-Z0-9:_-]*$/.test(k)) { continue; }\n\t\tconst name = k\n\t\t\t.toLowerCase();\n\t\tswitch (name) {\n\t\t\tcase 'style':\n\t\t\t\tif (!hasStyle) { break; }\n\t\t\tcase 'ref':\n\t\t\tcase 'is':\n\t\t\tcase 'id':\n\t\t\tcase 'class':\n\t\t\t\tcontinue;\n\t\t}\n\t\tlet data = props[k];\n\t\tif (isValue(data)) { data = data(); }\n\t\tconst value = stringify(data, name.substr(0, 2) === 'on');\n\t\tif (value !== undefined) { attrs[name] = value; }\n\t}\n\treturn attrs;\n}\nfunction update(\n\tel: Element,\n\tattrs: Attrs,\n\told: Attrs,\n): void {\n\tfor (const k of Object.keys(attrs)) {\n\t\tconst v = attrs[k];\n\t\tif (!(k in old) || old[k] !== v) {\n\t\t\tif (v === null) {\n\t\t\t\tel.removeAttribute(k);\n\t\t\t} else {\n\t\t\t\tel.setAttribute(k, v);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const k of Object.keys(old)) {\n\t\tif (!(k in attrs)) {\n\t\t\tel.removeAttribute(k);\n\t\t}\n\t}\n}\n\nconst PropsMap = new WeakMap<Element, Attrs>();\nexport default function updateAttrs(\n\tprops: {[k: string]: any},\n\tel: Element,\n\thasStyle: boolean,\n): void {\n\tconst old = PropsMap.get(el) || {};\n\tconst attrs = getAttrs(props, hasStyle);\n\tupdate(el, attrs, old);\n\tsetAttrs(el, attrs);\n\tPropsMap.set(el, attrs);\n}\n","import Neep from '@neep/core';\nimport { isValue } from '../../install/neep';\n\n\nfunction *getElementModel(el: Element): Iterable<[string, string, (e: Event) => any]> {\n\tif (el instanceof HTMLInputElement) {\n\t\tswitch (el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\t\tyield [\n\t\t\t\t\t'indeterminate', 'change',\n\t\t\t\t\te => (e.currentTarget as HTMLInputElement).indeterminate,\n\t\t\t\t];\n\t\t\t\treturn yield [\n\t\t\t\t\t'checked', 'change',\n\t\t\t\t\te => (e.currentTarget as HTMLInputElement).checked,\n\t\t\t\t];\n\t\t\tcase 'radio':\n\t\t\t\treturn yield [\n\t\t\t\t\t'checked', 'change',\n\t\t\t\t\te => (e.currentTarget as HTMLInputElement).checked,\n\t\t\t\t];\n\t\t}\n\t\treturn yield [\n\t\t\t'value', 'input',\n\t\t\te => (e.currentTarget as HTMLInputElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLTextAreaElement) {\n\t\treturn yield [\n\t\t\t'value', 'input',\n\t\t\te => (e.currentTarget as HTMLTextAreaElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLSelectElement) {\n\t\treturn yield [\n\t\t\t'value', 'change',\n\t\t\te => (e.currentTarget as HTMLSelectElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLDetailsElement) {\n\t\treturn yield [\n\t\t\t'open', 'toggle',\n\t\t\te => (e.currentTarget as HTMLDetailsElement).open,\n\t\t];\n\t}\n\tif (el instanceof HTMLMediaElement) {\n\t\tyield [\n\t\t\t'currentTime', 'timeupdate',\n\t\t\te => (e.currentTarget as HTMLMediaElement).currentTime,\n\t\t];\n\t\tyield [\n\t\t\t'playbackRate', 'ratechange',\n\t\t\te => (e.currentTarget as HTMLMediaElement).playbackRate,\n\t\t];\n\t\tyield [\n\t\t\t'volume', 'volumechange',\n\t\t\te => (e.currentTarget as HTMLMediaElement).volume,\n\t\t];\n\t\tyield [\n\t\t\t'muted', 'volumechange',\n\t\t\te => (e.currentTarget as HTMLMediaElement).muted,\n\t\t];\n\t\tyield [\n\t\t\t'paused', 'playing',\n\t\t\te => (e.currentTarget as HTMLMediaElement).paused,\n\t\t];\n\t\treturn yield [\n\t\t\t'paused', 'pause',\n\t\t\te => (e.currentTarget as HTMLMediaElement).paused,\n\t\t];\n\t}\n\n}\n\ntype ValueEventBindItem = [Neep.Value<any>, () => void];\ntype ValueEventBind = Record<string, ValueEventBindItem>;\nconst ValueEventMap = new WeakMap<Element, ValueEventBind>();\n\nfunction getValueEventBind(el: Element): ValueEventBind {\n\tlet list = ValueEventMap.get(el);\n\tif (list) { return list; }\n\tlist = Object.create(null) as ValueEventBind;\n\tValueEventMap.set(el, list);\n\treturn list;\n}\n\n\nconst bindMap = new WeakMap<Element, Record<string, () => void>>();\nfunction getEventBind(el: Element): Record<string, () => void> {\n\tlet list = bindMap.get(el);\n\tif (list) { return list; }\n\tlist = Object.create(null) as Record<string, () => void>;\n\tbindMap.set(el, list);\n\treturn list;\n}\n\nexport default function updateEvent(\n\tprops: {[k: string]: any},\n\tel: Element,\n\temit: Neep.Emit<Record<string, any>>,\n): void {\n\tconst valueEventMap = getValueEventBind(el);\n\tfor (const [prop, name, t] of getElementModel(el)) {\n\t\tconst value = props[prop];\n\t\tconst item = valueEventMap[prop];\n\t\tif (item && item[0] === value) { continue; }\n\t\tif (item) { item[1](); }\n\t\tif (!isValue(value)) { continue; }\n\t\tconst f = (e: Event): void => { value(t(e)); };\n\t\tel.addEventListener(name, f);\n\t\tvalueEventMap[name] = [value, () => el.removeEventListener(name, f)];\n\t}\n\n\tconst names = new Set(emit.names.map(String));\n\tconst eventBind = getEventBind(el);\n\tfor (const k of Object.keys(eventBind)) {\n\t\tif (names.has(k)) { continue; }\n\t\teventBind[k]();\n\t\tdelete eventBind[k];\n\t}\n\tfor (const k of names) {\n\t\tif (k in eventBind) { continue; }\n\t\tconst f = (p: any): boolean => emit(k, p);\n\t\tel.addEventListener(k, f);\n\t\teventBind[k] = () => {\n\t\t\tel.removeEventListener(k, f);\n\t\t};\n\t}\n}\n","import Neep from '@neep/core';\nimport updateId from './id';\nimport updateClass from './class';\nimport updateStyle from './style';\nimport updateAttrs from './attr';\nimport updateEvent from './event';\n\nexport default function updateProps(\n\trenderer: Neep.IRenderer,\n\tel: Element,\n\tprops: {[k: string]: any},\n\temit: Neep.Emit<Record<string, any>>,\n): Element {\n\tconst css = (el as any).style;\n\tconst hasStyle = css instanceof CSSStyleDeclaration;\n\tupdateId(props, el);\n\tupdateClass(props, el);\n\tupdateAttrs(props, el, hasStyle);\n\tupdateStyle(props, el, css, hasStyle);\n\tupdateEvent(props, el, emit);\n\treturn el;\n}\n","export default function nextFrame(f: () => void): void {\n\twindow.requestAnimationFrame(f);\n}\n","import Neep from '@neep/core';\nimport { isValue } from '../../install/neep';\n\nexport default function getTarget(\n\trenderer: Neep.IRenderer,\n\tcontainer: Element,\n\ttarget: any,\n\tparent?: Neep.IRenderer,\n): Neep.UpdateContainerResult {\n\tif (isValue(target)){ target = target.value; }\n\tif (target === null) {\n\t\treturn {\n\t\t\ttarget: container as any,\n\t\t\tinsert: null,\n\t\t\tnext: null,\n\t\t};\n\t }\n\tif (typeof target === 'string') {\n\t\ttarget = document.querySelector(target);\n\t}\n\tif (target instanceof Element) {\n\t\treturn {\n\t\t\ttarget,\n\t\t\tinsert: null,\n\t\t\tnext: null,\n\t\t} as any;\n\t}\n\treturn {\n\t\ttarget: null,\n\t\tinsert: null,\n\t\tnext: null,\n\t};\n\n}\n","import Neep from '@neep/core';\nimport getTarget from './getTarget';\nimport updateProps from '../updateProps';\nimport createElement from '../createElement';\n\nexport default function mountContainer(\n\trenderer: Neep.IRenderer,\n\telement: Neep.Node,\n\t{target: targetProps, ...props}: Record<string, any>,\n\temit: Neep.Emit<Record<string, any>>,\n\tparent?: Neep.IRenderer,\n): Neep.MountContainerResult {\n\tconst container = createElement('div') as any;\n\tupdateProps(renderer, container, element?.props || props, emit);\n\treturn {\n\t\t...getTarget(renderer, container, targetProps, parent),\n\t\tcontainer,\n\t\texposed: null,\n\t};\n}\n","import Neep from '@neep/core';\n\nexport default function unmountContainer(\n\trenderer: Neep.IRenderer,\n\tcontainer: Element,\n\tnode: Neep.NativeNode | undefined | null,\n): void {\n\tif (node === null) {\n\t\t(container as any as Element).remove();\n\t}\n}\n","import Neep from '@neep/core';\nimport update from '../updateProps';\nimport getTarget from './getTarget';\n\nexport default function updateContainer(\n\trenderer: Neep.IRenderer,\n\tcontainer: Element,\n\telement: Neep.Node,\n\t{target, ...props}: Record<string, any>,\n\temit: Neep.Emit<Record<string, any>>,\n\tparent?: Neep.IRenderer,\n): Neep.UpdateContainerResult {\n\tupdate(renderer, container, element?.props || props, emit);\n\treturn getTarget(renderer, container, target, parent);\n}\n","import Neep from '@neep/core';\n\nexport default function removeNode(\n\trenderer: Neep.IRenderer,\n\tnode: Node,\n): void {\n\tconst p = renderer.getParent(node as any) as any;\n\tif (!p) { return; }\n\tp.removeChild(node);\n}\n","import Neep from '@neep/core';\n\nexport default function getContainer(\n\trenderer: Neep.IRenderer,\n\tcontainer: Element,\n\ttarget: any,\n\tnext: any,\n): [Element | null, Element | null] {\n\tif (typeof target === 'string') {\n\t\ttarget = document.querySelector(target);\n\t}\n\tif (target === null) { return [null, null]; }\n\tif (!(target instanceof Element)) {\n\t\ttarget = document.body;\n\t}\n\tif (typeof next === 'string') {\n\t\tnext = document.querySelector(next);\n\t}\n\tif (!(next instanceof Element) || next.parentElement !== target) {\n\t\tnext = null;\n\t}\n\treturn [target, next];\n}\n","import Neep from '@neep/core';\nimport createComponent from './createComponent';\nimport createElement from './createElement';\nimport createPlaceholder from './createPlaceholder';\nimport createText from './createText';\nimport getParent from './getParent';\nimport insertNode from './insertNode';\nimport updateProps from './updateProps';\nimport nextFrame from './nextFrame';\nimport mountContainer from './container/mountContainer';\nimport unmountContainer from './container/unmountContainer';\nimport updateContainer from './container/updateContainer';\nimport removeNode from './removeNode';\nimport getContainer from './container/getContainer';\n\nconst renderer: Neep.IRenderer = {\n\ttype: 'html',\n\tnextFrame,\n\tisNode(v): v is Neep.NativeNode {\n\t\treturn v instanceof Node;\n\t},\n\tgetContainer(container, target, next) {\n\t\treturn getContainer(this, container as any, target, next) as any;\n\t},\n\tmountContainer(data, props, emit, parent) {\n\t\treturn mountContainer(this, data, props, emit, parent) as any;\n\t},\n\tupdateContainer(container, target, insert, next, data, props, emit, parent) {\n\t\treturn updateContainer(this, container as any, data, props, emit, parent) as any;\n\t},\n\trecoveryContainer() {},\n\tunmountContainer(container, data, props, parent) {\n\t\treturn unmountContainer(this, container as any, data);\n\t},\n\tgetMountOptions(){},\n\n\tcreateElement(data) {\n\t\tif (!data || typeof data !== 'string') { return null;  }\n\t\treturn createElement(data) as any;\n\t},\n\tcreateText(text: string): Neep.NativeTextNode {\n\t\treturn createText(text) as any;\n\t},\n\tcreatePlaceholder(): Neep.NativePlaceholderNode {\n\t\treturn createPlaceholder() as any;\n\t},\n\tcreateComponent(): [Neep.NativeComponentNode, Neep.NativeShadowNode] {\n\t\treturn createComponent(this) as any;\n\t},\n\n\tgetParent(node: Neep.NativeNode): Neep.NativeContainerNode | null {\n\t\treturn getParent(node as any) as Neep.NativeContainerNode | null;\n\t},\n\tnextNode(node: Neep.NativeNode): Neep.NativeNode | null {\n\t\treturn (node as any).nextSibling as Neep.NativeContainerNode | null;\n\t},\n\tupdateProps(node, data, props, emit) {\n\t\tupdateProps(this, node as any, props, emit);\n\t},\n\tinsertNode(\n\t\tparent: Neep.NativeContainerNode,\n\t\tnode: Neep.NativeNode,\n\t\tnext: Neep.NativeNode | null = null,\n\t): void {\n\t\treturn insertNode(parent as any, node as any, next as any);\n\t},\n\tremoveNode(node: Neep.NativeNode): void {\n\t\treturn removeNode(this, node as any);\n\t},\n};\n\nexport default renderer;\n","import Neep from '@neep/core';\nimport {\n\tcreateContainerComponent,\n\tcreateElement,\n} from '../install/neep';\nimport renderer from '../renderer';\n\nexport declare namespace Container {\n\texport interface Props {\n\t\ttarget?: string | HTMLElement,\n\t}\n}\nexport let Container: Neep.ContainerComponent<Container.Props>;\n\nexport default function initContainer(): void {\n\tContainer = createContainerComponent(\n\t\tcreateElement(''),\n\t\t{ renderer, name: '[HTML]' },\n\t);\n}\n","import initContainer from '../init/Container';\n\nexport default function init(): void {\n\tinitContainer();\n}\n","import renderer from '../renderer';\nimport installNeep from './neep';\nimport init from './init';\n\nexport default function install(\n\tNeep: typeof import('@neep/core').default,\n): void {\n}\ninstallNeep(renderer);\ninit();\n","import Neep from '@neep/core';\n\nexport default Neep.createComponent((\n\tprops: {  a?: any, onset?: () => void },\n) => {\n\tconst a = Neep.value(1);\n\tconst b = Neep.value(2);\n\t// eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n\tconst c1 = Neep.computed(() => a + b);\n\tconst c2 = Neep.computed(() => a.value + b.value);\n\tconst c3 = Neep.computed(() => Number(a) + Number(b));\n\tconst c4 = Neep.computed(() => Number(a.value) + Number(b.value));\n\treturn Neep.createRenderElement(() => <Neep.Template>\n\t\t计算\n\t\t<div><input value={a} />+<input value={b} />={c1}</div>\n\t\t<div><input value={a} />+<input value={b} />={c2}</div>\n\t\t<div><input value={a} />+<input value={b} />={c3}</div>\n\t\t<div><input value={a} />+<input value={b} />={c4}</div>\n\t</Neep.Template>);\n\n}, {name: 'Compute'});\n","/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport Neep from '@neep/core';\n\nexport default Neep.createComponent(() => {\n\tconst a = Neep.useValue();\n\tconst b = Neep.useValue();\n\tconst c1 = Neep.useValue(() => Neep.computed(() => a + b));\n\tconst c2 = Neep.useValue(() => Neep.computed(() => a.value + b.value));\n\tconst c3 = Neep.useValue(() => Neep.computed(() => Number(a) + Number(b)));\n\tconst c4 = Neep.useValue(() => Neep.computed(() => Number(a.value) + Number(b.value)));\n\treturn <Neep.Template>\n\t\t计算\n\t\t<div><input value={a} />+<input value={b} />={c1}</div>\n\t\t<div><input value={a} />+<input value={b} />={c2}</div>\n\t\t<div><input value={a} />+<input value={b} />={c3}</div>\n\t\t<div><input value={a} />+<input value={b} />={c4}</div>\n\t</Neep.Template>;\n}, {name: 'Compute2'});\n","import Neep from '@neep/core';\n\nexport default Neep.createComponent((\n\tprops: {  a?: any, onset?: () => void },\n) => {\n\tconst inputValue = Neep.value('');\n\tconst checked = Neep.value(false);\n\tconst ref = (x: any): void => console.log('Ref', 'B', x);\n\treturn Neep.createRenderElement(() => <Neep.Template>\n\t\t同步的输入框及显示\n\t\t<div><input ref={ref} type=\"checkbox\" checked={checked} /><input value={inputValue} style=\"width: 100%\" /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div ref={ref}>[{checked}]{inputValue}</div>\n\t</Neep.Template>);\n}, { name: 'Sync'});\n","import Neep from '@neep/core';\n\nexport default Neep.createComponent(() => {\n\tconst inputValue = Neep.useValue();\n\tconst checked = Neep.useValue();\n\n\treturn <Neep.Template>\n\t\t同步的输入框及显示\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style=\"width: 100%\" /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div>[{checked}]{inputValue}</div>\n\t</Neep.Template>;\n}, { name: 'Sync2'});\n","import Neep from '@neep/core';\n\nexport const DeliverValue = Neep.createDeliverComponent(Neep.value(0));\nexport const DeliverNumber = Neep.createDeliverComponent(0);\n","import Neep from '@neep/core';\nimport Compute from './Compute';\nimport Compute2 from './Compute2';\nimport Sync from './Sync';\nimport Sync2 from './Sync2';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nexport default Neep.createComponent((\n\tprops: {  a?: any, onset?: () => void },\n\t{ slot, delivered, emit },\n) => {\n\tNeep.hook('beforeCreate', () => console.log('Hook', 'B', 'beforeCreate'), true);\n\tNeep.hook('created', () => console.log('Hook', 'B', 'created'), true);\n\tNeep.hook('beforeMount', () => console.log('Hook', 'B', 'beforeMount'), true);\n\tNeep.hook('mounted', () => console.log('Hook', 'B', 'mounted'), true);\n\tNeep.hook('beforeUpdate', () => console.log('Hook', 'B', 'beforeUpdate'), true);\n\tNeep.hook('updated', () => console.log('Hook', 'B', 'updated'), true);\n\tconst a = delivered(DeliverValue);\n\treturn <Neep.Template>\n\t\t<div>B: {a}|{delivered(DeliverNumber)}</div>\n\t\t{slot('name')}\n\t\t<br />\n\t\t{slot()}\n\t\t<button onclick={props.onset}>[onclick]+1</button>\n\t\t<button on-click={props.onset}>[on-click]+1</button>\n\t\t<button {...{'@click': props.onset}}>[@click]+1</button>\n\t\t<button {...{'on:click': props.onset}}>[on:click]+1</button>\n\t\t<button {...{'@click': () => emit('set')}}>[@click=emit]+1</button>\n\t\t<br />\n\t\t<Neep.Slot />\n\t\t<Neep.Slot />\n\t\t<br />\n\t\t<Neep.Slot name=\"666\">666</Neep.Slot>\n\t\t<br />\n\t\t<Neep.Slot name=\"name\">name</Neep.Slot>\n\t\t<hr />\n\t\t<Sync />\n\t\t<hr />\n\t\t<Sync2 />\n\t\t<hr />\n\t\t<Compute />\n\t\t<hr />\n\t\t<Compute2 />\n\t\t<hr />\n\t</Neep.Template>;\n}, { name: 'B'});\n","import Neep from '@neep/core';\nimport B from './components/B';\n\nNeep.register('tb', B);\n","import Neep from '@neep/core';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nexport default Neep.createShellComponent((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes, delivered },\n) => {\n\tNeep.label('{E}', '#F00');\n\tconst a = delivered(DeliverValue);\n\tconst newA = Neep.computed(() => a.value + 1);\n\treturn <DeliverValue value={newA}>\n\t\t<DeliverNumber value={delivered(DeliverNumber) + 1}>\n\t\t\t<div>E: {a}|{delivered(DeliverNumber)}</div>\n\t\t\t<tb {...props} {...{'@set': props.onset}}>\n\t\t\t\t{ childNodes }\n\t\t\t</tb>\n\t\t</DeliverNumber>\n\t</DeliverValue>;\n}, { name: 'E'});\n","import Neep from '@neep/core';\n\nimport E from './E';\n\nexport default Neep.createShellComponent((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes },\n) => {\n\tNeep.label('{D}', '#F00');\n\treturn <E {...props}>\n\t\t{ childNodes }\n\t</E>;\n}, {name: 'D'});\n","import Neep from '@neep/core';\n\nimport D from './D';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nexport default Neep.createShellComponent((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes, delivered },\n) => {\n\tNeep.label('{C}', '#F00');\n\tconst a = delivered(DeliverValue);\n\tconst newA = Neep.computed(() => a.value + 1);\n\treturn <DeliverValue value={newA}>\n\t\t<DeliverNumber value={delivered(DeliverNumber) + 1}>\n\t\t\t<div>C: {a}|{delivered(DeliverNumber)}</div>\n\t\t\t<D {...props}>\n\t\t\t\t{ childNodes }\n\t\t\t</D>\n\t\t</DeliverNumber>\n\t</DeliverValue>;\n}, {name: 'C'});\n","import Neep from '@neep/core';\n\nimport C from './C';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nfunction createItem(bg: string): HTMLDivElement {\n\tconst div = document.createElement('div');\n\tdiv.style.minHeight = '40px';\n\tdiv.style.background = bg;\n\tdocument.body.appendChild(div);\n\treturn div;\n}\nconst divs = [\n\tcreateItem('#F00'),\n\tcreateItem('#FF0'),\n\tcreateItem('#F0F'),\n\tcreateItem('#0F0'),\n\tcreateItem('#0FF'),\n\tcreateItem('#00F'),\n];\n\nexport default Neep.createComponent((\n\tprops: { name?: string },\n) => {\n\tconst divIndex = Neep.value(6);\n\tconst div = Neep.computed(() => divs[divIndex.value]);\n\n\tfunction moveDiv(): void {\n\t\tdivIndex.value = (divIndex.value + 1) % (divs.length + 1);\n\t}\n\n\tNeep.label('{自定义标签文本}', '#F00');\n\tNeep.hook('beforeCreate', () => console.log('Hook', 'A', 'beforeCreate'));\n\tNeep.hook('created', () => console.log('Hook', 'A', 'created'));\n\tNeep.hook('beforeMount', () => console.log('Hook', 'A', 'beforeMount'));\n\tNeep.hook('mounted', () => console.log('Hook', 'A', 'mounted'));\n\tNeep.hook('beforeUpdate', () => console.log('Hook', 'A', 'beforeUpdate'));\n\tNeep.hook('updated', () => console.log('Hook', 'A', 'updated'));\n\tconst v = Neep.value(1);\n\tconst ref = (x: any): void => console.log('Ref', 'B', x);\n\treturn Neep.createRenderElement(() => <DeliverValue value={v}>\n\t\t<DeliverNumber value={v.value}>\n\t\t\t<Neep.Container target={div}>\n\t\t\t\t<button on-click={moveDiv}>移动</button>\n\t\t\t</Neep.Container>\n\t\t\t<tc a=\"1\" onset={() => v.value++ } ref={ref}>\n\t\t\t\t<b ref={ref}>你好</b>\n\t\t\t\t<i ref={ref}>{v}</i>\n\t\t\t\t<u ref={ref} slot=\"name\">{props.name}</u>\n\t\t\t</tc>\n\t\t</DeliverNumber>\n\t</DeliverValue>);\n}, {\n\tname: 'A',\n\tcomponents: {tc: C},\n});\n","import Neep from '@neep/core';\nimport A from './components/A';\n\nexport default Neep.createComponent(() => <A name=\"啊\" />, { name: 'App'});\n","import '@neep/renderer-html';\nimport Neep from '@neep/core';\nimport './register';\nimport App from './App';\nNeep.render(App).mount();\n"],"names":["xmlnsMap","svg","html","mathml","SVGTags","Set","MathMLTags","createElement","tagname","namespace","res","exec","tag","ns","has","toLowerCase","document","createElementNS","createComponent","renderer","node","attachShadow","mode","createPlaceholder","createComment","createText","text","createTextNode","getParent","parentNode","insertNode","parent","next","insertBefore","version","isProduction","process","devtools","renderHook","installDevtools","tools","NeepError","Error","constructor","message","assert","v","nextFrameApi","nextFrame","fn","renderers","Object","create","getRender","type","def","default","installRender","bind","printErrorLog","console","Boolean","printError","String","map","value","installMonitorable","api","install","apis","monitorable","ScopeSlot","Render","Slot","Container","Template","Fragment","createEntitySetRef","set","refValue","_0","_1","entity","state","add","delete","createExposedSetRef","newNode","oldNode","undefined","replace","createEntityRefValue","watch","obj","_2","Reflect","defineProperty","get","enumerable","configurable","createExposedRefValue","ref","isEntity","current","isInit","root","hookList","runs","getUseHookValue","name","lib","init","push","shift","list","execUseHooks","run","runList","runParent","ret","length","setLabels","runShell","setLabel","oldSetLabel","runCurrent","oldEntity","oldIsInit","created","oldRuns","oldRoot","$_useHookValues","oldHookList","checkCurrent","initOnly","hooks","setHook","id","hook","$_hooks","safeify","callHook","cb","stop","isValue","computed","s","useValue","useService","p","byService","rendererSymbol","Symbol","for","nameSymbol","componentsSymbol","propsSymbol","componentValueSymbol","objectTypeSymbol","objectTypeSymbolElement","objectTypeSymbolDeliverComponent","objectTypeSymbolNativeComponent","objectTypeSymbolSimpleComponent","objectTypeSymbolShellComponent","objectTypeSymbolRenderComponent","objectTypeSymbolContainerComponent","objectTypeSymbolElementComponent","objectTypeSymbolHookEntity","objectTypeSymbolRootEntity","deliverKeySymbol","deliverDefaultSymbol","isSimpleComponent","isShellComponent","isNativeComponent","isRenderComponent","isContainerComponent","isElementComponent","isDeliverComponent","isElement","isFragmentElement","isRenderElement","isSimpleElement","attrs","children","attrProps","props","n","keys","substr","createElementBase","key","slot","createRenderElement","render","elements","opt","Array","isArray","concat","simple","includes","equal","a","b","is","i","execed","inserted","isDefault","aprops","bprops","aKeys","bKeys","size","k","createTemplateElement","label","labels","filter","t","ids","Nodes","IdMap","WeakMap","createMountedNode","markChange","recoveryMountedNode","getNode","markRead","completeList","setCompleteList","complete","it","BaseProxy","originalTag","delivered","parentProxy","update","_update","destroy","__executed_destroy","_destroy","destroyed","mount","mountOptions","__mountOptions","result","c","requestDraw","newMountOptions","_mount","mounted","__cancelDrawMonitor","unmount","__executed_unmounted","_unmount","unmounted","redraw","_redraw","NodeProxy","container","componentRoot","markDraw","createItem","source","proxy","createList","createAll","item","getNodes","tree","forEach","e","removeNode","getLastNode","getFirstNode","newTree","oldTree","updateList","newList","mountedMap","Map","src","index","findIndex","old","updateItem","splice","last","nextNode","o","updateAll","Math","min","max","all","draw","DeliverProxy","content","__valueObject","__nodes","convert","delayedRefresh","objectSet","wait","clear","refresh","asyncRefresh","f","async","createEmit","emitter","omitNames","emit","options","cancelable","target","defaultPrevented","eventInfo","prevented","preventDefault","prevent","events","event","omit","names","EventEmitter","_names","eventSet","on","listener","removed","updateInProps","oldPropsEvents","__propsEvents","oldEventNames","entName","getEvents","olfFn","cl","eventMap","__eventMap","oldEventMapNames","getEventsMap","oldEmitEvents","__propsEmitEvents","eventsFn","getEmitFn","__propsEmitEvent","oldNames","getSlots","slots","native","nativeList","ownKeys","isNode","el","setSlot","setSlots","oldChildren","renderSlot","argv","getSlot","isSimple","createSlotApi","slotApi","constructors","initContext","context","addContextConstructor","getDelivered","deliver","isDeliver","components","register","component","findComponent","test","ltag","globalComponents","getComponents","getNodeArray","execSimple","normalizeAuxiliaryObject","slotMap","simpleParent","isShell","childNodes","nodes","getSlotRenderFn","renderFn","slotRenderFnList","newFn","call","simpleSlot","slotRenderFn","args","slotName","getChildren","postpone","normalize","isNative","getText","Date","toISOString","RegExp","ValueProxy","__value","__render","monitor","changed","__needRefresh","__refreshing","needDraw","GroupProxy","updateData","data","oldKeys","dataset","RefProxy","exposed","__exposed","setExposed","__ref","createEntity","oldRef","ElementProxy","__elementTagData","cfg","subMountOptions","getMountOptions","updateProps","_redrawChildren","ShellProxy","_this","l","_nodes","__delayedRefresh","lastSlots","toElement","SlotProxy","initEntity","addEntityConstructor","parentComponentProxy","h","disabledKey","propsObj","newKeys","propsDefined","nativeNodes","ComponentProxy","assign","createObject","encase","_init","stopRender","_initRender","_render","_stopRender","needRefresh","initRender","expose","renderNode","componentsList","RenderComponentProxy","createResponsiveRender","func","slotRenderFns","resultOnly","normalizeRefresh","StandardComponentProxy","_shadow","nativeTreeNountOptions","nativeTree","__nativeTreeNountOptions","recognizers","recognize","any","recognizer","addRecognizer","createProxy","ContainerProxy","componentTag","flat","Infinity","recursive2iterable","awaitDraw","rendererDraw","baseTick","middleTick","endTick","execTickList","execList","sort","execContainerList","drawAll","execRendererDrawList","rendererDrawList","requested","request","nextTick","level","addRendererDraw","setmountedRoot","__container","r","getContainer","__containerData","rootContainer","setChildren","parentRenderer","targetNode","insert","mountContainer","log","subOpt","placeholder","__placeholder","placeholderNode","__placeholderNode","__insertNode","__nextNode","__targetNode","_redrawSelf","updateContainer","recoveryContainer","opts","unmountContainer","__awaitDraw","markDrawContainer","drawContainer","__containers","containers","createContainerEntity","createRender","params","refreshObj","setObjectType","setName","setValue","setComponents","createSelfComponent","createDeliverComponent","createRenderComponent","createContainerComponent","createElementComponent","createStandardComponent","createComponentFunc","renderComponent","StandardComponent","createNativeComponent","createSimpleComponent","createShellComponent","LOADING","FAILING","COMPLETE","lazy","Placeholder","reslut","isLoad","ComponentValue","load","error","com","loading","RenderProxy","initChildNodes","isProxy","installNeep","NeepInstall","getId","PropsMap","updateId","removeAttribute","getClass","split","classes","oClasses","getAttribute","classList","setAttribute","join","updateClass","class","unit","getStyle","style","css","str","oStyle","cssText","removeProperty","setProperty","updateStyle","hasStyle","setAttrs","HTMLInputElement","checked","HTMLSelectElement","HTMLTextAreaElement","HTMLDetailsElement","open","HTMLMediaElement","muted","paused","pause","play","currentTime","num","Number","playbackRate","volume","stringify","isOn","toString","JSON","getAttrs","updateAttrs","getElementModel","currentTarget","indeterminate","ValueEventMap","getValueEventBind","bindMap","getEventBind","updateEvent","valueEventMap","prop","addEventListener","removeEventListener","eventBind","CSSStyleDeclaration","window","requestAnimationFrame","getTarget","querySelector","Element","element","targetProps","remove","removeChild","body","parentElement","Node","nextSibling","initContainer","Neep","c1","c2","c3","c4","inputValue","x","width","DeliverValue","DeliverNumber","onset","B","newA","bg","div","minHeight","background","appendChild","divs","divIndex","moveDiv","tc","C","App"],"mappings":"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"}