{"version":3,"file":"index.js","sources":["../../packages/core/src/install/devtools.ts","../../packages/core/src/Error.ts","../../packages/core/src/install/render.ts","../../node_modules/monitorable/dist/monitorable.esm.js","../../packages/core/src/install/monitorable.ts","../../packages/core/src/install/index.ts","../../packages/core/src/extends/current.ts","../../packages/core/src/extends/context.ts","../../packages/core/src/extends/entity.ts","../../packages/core/src/extends/refresh.ts","../../packages/core/src/EventEmitter.ts","../../packages/core/src/auxiliary/tags.ts","../../packages/core/src/hook.ts","../../packages/core/src/auxiliary/life.ts","../../packages/core/src/symbols.ts","../../packages/core/src/auxiliary/element.ts","../../packages/core/src/extends/label.ts","../../packages/core/src/auxiliary/dev.ts","../../packages/core/src/auxiliary/deliver.ts","../../packages/core/src/entity/id.ts","../../packages/core/src/entity/recursive.ts","../../packages/core/src/entity/draw/utils.ts","../../packages/core/src/entity/draw/create.ts","../../packages/core/src/entity/draw/update.ts","../../packages/core/src/entity/draw/index.ts","../../packages/core/src/entity/slot.ts","../../packages/core/src/register.ts","../../packages/core/src/entity/normalize/replaceNode.ts","../../packages/core/src/entity/normalize/index.ts","../../packages/core/src/entity/EntityObject.ts","../../packages/core/src/entity/ComponentEntity.ts","../../packages/core/src/entity/convert/utils.ts","../../packages/core/src/entity/convert/create.ts","../../packages/core/src/entity/convert/update.ts","../../packages/core/src/entity/convert/index.ts","../../packages/core/src/entity/ContainerEntity.ts","../../packages/core/src/render.ts","../../packages/core/src/create.ts","../../packages/html-renderer/src/install/neep.ts","../../packages/html-renderer/src/update/id.ts","../../packages/html-renderer/src/update/class.ts","../../packages/html-renderer/src/update/style.ts","../../packages/html-renderer/src/update/attr.ts","../../packages/html-renderer/src/update/event.ts","../../packages/html-renderer/src/update/index.ts","../../packages/html-renderer/src/nextFrame.ts","../../packages/html-renderer/src/createElement.ts","../../packages/html-renderer/src/utils.ts","../../packages/html-renderer/src/render.ts","../../packages/html-renderer/src/install/install.ts","../components/Compute.tsx","../components/Compute2.tsx","../components/Sync.tsx","../components/Sync2.tsx","../components/delivers.tsx","../components/B.tsx","../register.ts","../components/E.tsx","../components/D.tsx","../components/C.tsx","../components/A.tsx","../App.tsx","../index.tsx"],"sourcesContent":["import { Devtools } from '../type';\n\nexport const devtools: Devtools = {\n\trenderHook(){},\n};\n\nexport default function installDevtools(\n\ttools?: Partial<Devtools>,\n): void {\n\tif (!tools) { return; }\n\tif (typeof tools !== 'object') { return; }\n\tconst { renderHook } = tools;\n\tif (typeof renderHook === 'function') {\n\t\tdevtools.renderHook = renderHook;\n\t}\n}\n","export default class NeepError extends Error {\n\treadonly tag: string;\n\tconstructor(message: string, tag: string = '') {\n\t\tsuper(tag ? `[${ tag }] ${ message }` : message);\n\t\tthis.tag = tag;\n\t}\n}\nexport function assert(\n\tv: any,\n\tmessage: string,\n\ttag?: string,\n): asserts v {\n\tif (v) { return; }\n\tthrow new NeepError(message, tag);\n}\n","import { IRender } from '../type';\nimport { assert } from '../Error';\n\nlet nextFrameApi: undefined | ((fn: () => void) => void);\nexport function nextFrame(fn: () => void): void {\n\tassert(nextFrameApi, 'The basic renderer is not installed', 'install');\n\tif (nextFrameApi) {\n\t\tnextFrameApi(fn);\n\t}\n}\n\nexport const renders: Record<string, IRender>\n\t= Object.create(null);\n\nexport function getRender(\n\ttype: string | number | IRender = '',\n): IRender {\n\tif (typeof type === 'object') { return type; }\n\treturn renders[type] || renders.default;\n}\n\nexport default function installRender(render?: IRender): void {\n\tif (!render) { return; }\n\trenders[render.type] = render;\n\tif (nextFrameApi) { return; }\n\tif (!renders.default) {\n\t\trenders.default = render;\n\t}\n\tif (!nextFrameApi && render.nextFrame) {\n\t\trenders.default = render;\n\t\tnextFrameApi = render.nextFrame;\n\t}\n\n}\n","\n/*!\n * monitorable v0.1.0-beta.0\n * (c) 2020 Fierflame\n * @license MIT\n */\n\nlet printErrorLog;\n/** 打印错误 */\n\nfunction printError(info) {\n  if (typeof printErrorLog === 'function') {\n    printErrorLog(info);\n    return;\n  }\n\n  console.error(info);\n}\nfunction setPrintError(p) {\n  printErrorLog = typeof p === 'function' ? p : undefined;\n}\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n/** 回调函数安全化处理 */\n\nfunction safeify(fn) {\n  return (...p) => {\n    try {\n      fn(...p);\n    } catch (e) {\n      printError(e);\n    }\n  };\n}\nfunction getIndexes(target, prop) {\n  if (!target) {\n    return undefined;\n  }\n\n  if (typeof target !== 'function' && typeof target !== 'object') {\n    return undefined;\n  }\n\n  if (typeof prop === 'number') {\n    return [target, String(prop)];\n  }\n\n  if (typeof prop === 'symbol') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'string') {\n    return [target, prop];\n  }\n\n  if (typeof prop === 'boolean') {\n    return [target, prop];\n  }\n\n  return undefined;\n}\nfunction getMapValue(map, key, def) {\n  if (map.has(key)) {\n    return map.get(key);\n  }\n\n  const value = def();\n  map.set(key, value);\n  return value;\n}\n\n/** 已被读取的 */\nlet read;\n/**\n * 标记已读状态\n * @param obj  要标记的对象\n * @param prop 要标记的属性\n */\n\nfunction markRead(target, prop) {\n  if (!read) {\n    return;\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n  const propMap = getMapValue(read, target, () => new Map());\n\n  if (propMap.has(prop)) {\n    return;\n  }\n\n  propMap.set(prop, false);\n}\n\n/**\n * 监听函数的执行，并将执行过程中读取的对象值设置到 map 中\n * @param fn 要执行的含糊\n * @param map 用于存储被读取对象的 map\n */\nfunction observeRun(map, fn, options) {\n  const oldRead = read;\n  read = map;\n\n  try {\n    if (!(options === null || options === void 0 ? void 0 : options.postpone)) {\n      return fn();\n    }\n\n    return postpone(fn, options.postpone === 'priority');\n  } finally {\n    read = oldRead;\n  }\n}\nfunction observe(map, fn, options) {\n  if (typeof fn === 'function') {\n    return observeRun(map, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return observeRun(map, options, fn);\n}\nconst watchList = new WeakMap();\n\nfunction execWatch(target, prop) {\n  var _watchList$get;\n\n  const watch = (_watchList$get = watchList.get(target)) === null || _watchList$get === void 0 ? void 0 : _watchList$get.get(prop);\n\n  if (!watch) {\n    return;\n  }\n\n  [...watch].forEach(w => w());\n}\n\nlet waitList;\n\nfunction run(list) {\n  for (const [target, set] of list.entries()) {\n    var _read;\n\n    const propMap = (_read = read) === null || _read === void 0 ? void 0 : _read.get(target);\n\n    for (const prop of set) {\n      execWatch(target, prop);\n\n      if (propMap === null || propMap === void 0 ? void 0 : propMap.has(prop)) {\n        propMap.set(prop, true);\n      }\n    }\n  }\n}\n\nfunction postponeRun(f, priority) {\n  const list = !priority && waitList || new Map();\n  const old = waitList;\n  waitList = list;\n\n  try {\n    return f();\n  } finally {\n    waitList = old;\n\n    if (list !== waitList) {\n      run(list);\n    }\n  }\n}\n\nfunction postpone(fn, priority) {\n  if (typeof fn === 'function') {\n    return postponeRun(fn, priority);\n  }\n\n  if (typeof priority !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return postponeRun(priority, fn);\n}\n\nfunction wait(target, prop) {\n  if (!waitList) {\n    return false;\n  }\n\n  getMapValue(waitList, target, () => new Set()).add(prop);\n  return true;\n}\n/**\n * 标记属性的修改，同时触发监听函数\n * @param target 要标记的对象\n * @param prop   要标记的属性 特别的，false 表示原型，true 表示成员\n */\n\n\nfunction markChange(target, prop) {\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return;\n  }\n\n  [target, prop] = indexes;\n\n  if (wait(target, prop)) {\n    return;\n  }\n\n  execWatch(target, prop);\n}\n/**\n * 观察对象属性的变化\n * @param target 要观察的对象\n * @param prop   要观察的属性名 特别的，false 表示原型，true 表示成员\n * @param fn     属性改变后触发的函数\n */\n\nfunction watchProp(target, prop, cb) {\n  if (typeof cb !== 'function') {\n    return () => {};\n  }\n\n  const indexes = getIndexes(target, prop);\n\n  if (!indexes) {\n    return () => {};\n  }\n\n  [target, prop] = indexes;\n  const key = prop;\n  let map = watchList.get(target);\n\n  if (!map) {\n    map = new Map();\n    watchList.set(target, map);\n  }\n\n  const list = getMapValue(map, key, () => new Set());\n  cb = safeify(cb);\n  list.add(cb);\n  let removed = false;\n  return () => {\n    if (removed) {\n      return;\n    }\n\n    removed = true; // 从当前列表中移除\n\n    list.delete(cb); // 从属性关联中删除\n\n    if (list.size) {\n      return;\n    }\n\n    if (!map) {\n      return;\n    }\n\n    map.delete(key); // 映射列表中删除\n\n    if (map.size) {\n      return;\n    }\n\n    watchList.delete(target);\n  };\n}\n\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable$1(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n\nlet getValue;\n/**\n * 获取被代理对象\n * @param obj  要被代理的对象\n * @param nest 递归代理的层数\n */\n\nfunction encase(value, nest = 0) {\n  if (!encashable$1(value)) {\n    return value;\n  }\n\n  const original = recover(value);\n  const nestLayer = nest === true ? Infinity : nest || 0;\n  const proxy = new Proxy(original, {\n    set(target, prop, value, receiver) {\n      if (nest === false) {\n        return Reflect.set(target, prop, value, receiver);\n      }\n\n      const has = Reflect.has(target, prop);\n      const modified = Reflect.set(target, prop, value, encase(receiver));\n\n      if (!modified) {\n        return modified;\n      }\n\n      if (has !== Reflect.has(target, prop)) {\n        markChange(target, true);\n      }\n\n      return modified;\n    },\n\n    get(target, prop, receiver) {\n      if (getValue === proxy) {\n        if (prop === '__monitorable__recover__') {\n          getValue = original;\n          return;\n        }\n      }\n\n      if (nest === false) {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      markRead(target, prop);\n      const value = Reflect.get(target, prop, encase(receiver));\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    setPrototypeOf(target, proto) {\n      if (nest === false) {\n        return Reflect.setPrototypeOf(target, proto);\n      }\n\n      const oldProto = Reflect.getPrototypeOf(target);\n      const modified = Reflect.setPrototypeOf(target, proto);\n\n      if (modified && oldProto !== proto) {\n        markChange(target, false);\n      }\n\n      return modified;\n    },\n\n    getPrototypeOf(target) {\n      if (nest === false) {\n        return Reflect.getPrototypeOf(target);\n      }\n\n      markRead(target, false);\n      const value = Reflect.getPrototypeOf(target);\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    defineProperty(target, prop, attr) {\n      if (nest === false) {\n        return Reflect.defineProperty(target, prop, attr);\n      }\n\n      let changed = true;\n\n      if ('value' in attr) {\n        const desc = Reflect.getOwnPropertyDescriptor(target, prop);\n\n        if (desc && 'value' in desc && recover(attr.value) === recover(desc.value)) {\n          changed = false;\n        }\n      }\n\n      const modified = Reflect.defineProperty(target, prop, attr);\n\n      if (changed && modified) {\n        markChange(target, prop);\n      }\n\n      return modified;\n    },\n\n    getOwnPropertyDescriptor(target, prop) {\n      if (nest === false) {\n        return Reflect.getOwnPropertyDescriptor(target, prop);\n      }\n\n      markRead(target, prop);\n      return Reflect.getOwnPropertyDescriptor(target, prop);\n    },\n\n    deleteProperty(target, prop) {\n      if (nest === false) {\n        return Reflect.deleteProperty(target, prop);\n      }\n\n      const has = Reflect.has(target, prop);\n      const deleted = Reflect.deleteProperty(target, prop);\n\n      if (has && !Reflect.has(target, prop)) {\n        markChange(target, prop);\n        markChange(target, true);\n      }\n\n      return deleted;\n    },\n\n    ownKeys(target) {\n      if (nest === false) {\n        return Reflect.ownKeys(target);\n      }\n\n      markRead(target, true);\n      return Reflect.ownKeys(target);\n    },\n\n    has(target, prop) {\n      if (nest === false) {\n        return Reflect.has(target, prop);\n      }\n\n      markRead(target, true);\n      return Reflect.has(target, prop);\n    }\n\n  });\n  return proxy;\n}\n/** 获取被代理的原始值 */\n\nfunction recover(v) {\n  if (!v) {\n    return v;\n  }\n\n  if (!encashable$1(v)) {\n    return v;\n  }\n\n  let value = v;\n\n  try {\n    getValue = v;\n    value = v.__monitorable__recover__;\n  } catch (_unused) {}\n\n  value = getValue;\n  getValue = false;\n\n  if (!value) {\n    return v;\n  }\n\n  if (typeof value === 'object') {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    return value;\n  }\n\n  return v;\n}\nfunction equal(a, b) {\n  return recover(a) === recover(b);\n}\n\nfunction run$1(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  const postpone = options === null || options === void 0 ? void 0 : options.postpone;\n  let end = false;\n  /** 取消监听 */\n\n  function cancel() {\n    if (end) {\n      return false;\n    }\n\n    end = true;\n\n    if (!cancelList) {\n      return true;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (end) {\n      return false;\n    }\n\n    if (!thisRead.size) {\n      end = true;\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(recover(obj), p, trigger));\n  }\n\n  function stop() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  }\n  const thisRead = new Map();\n  const result = observe(thisRead, () => fn(stop), {\n    postpone\n  });\n  run(thisRead);\n\n  if (options === null || options === void 0 ? void 0 : options.resultOnly) {\n    return result;\n  }\n\n  return {\n    result,\n    stop\n  };\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction exec(cb, fn, options) {\n  if (typeof cb !== 'function') {\n    throw new Error('cb needs to be a function');\n  }\n\n  if (typeof fn === 'function') {\n    return run$1(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return run$1(cb, options, fn);\n}\n\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\nfunction create(cb, fn, options) {\n  cb = safeify(cb);\n  let cancelList;\n  /** 取消监听 */\n\n  function cancel() {\n    if (!cancelList) {\n      return false;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function run(thisRead) {\n    if (!thisRead.size) {\n      return cb(false);\n    }\n\n    const list = [];\n\n    for (let [obj, props] of thisRead) {\n      for (const [p, m] of props) {\n        if (m) {\n          return cb(true);\n        }\n\n        list.push([obj, p]);\n      }\n    }\n\n    cancelList = list.map(([obj, p]) => watchProp(recover(obj), p, trigger));\n  }\n\n  function exec(...p) {\n    cancel();\n    const thisRead = new Map();\n    const result = observe(thisRead, () => fn(...p), options);\n    run(thisRead);\n    return result;\n  }\n\n  exec.stop = () => {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  };\n\n  return exec;\n}\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\n\n\nfunction monitor(cb, fn, options) {\n  if (typeof fn === 'function') {\n    return create(cb, fn, options);\n  }\n\n  if (typeof options !== 'function') {\n    throw new Error('fn needs to be a function');\n  }\n\n  return create(cb, options, fn);\n}\n\n/** 取消监听的方法 */\n\nconst values = new WeakSet();\nfunction isValue(x) {\n  return values.has(x);\n}\n/** 触发监听 */\n\nfunction valueOf() {\n  const value = this();\n\n  if (value === undefined) {\n    return value;\n  }\n\n  if (value === null) {\n    return value;\n  }\n\n  return value.valueOf();\n}\n\nfunction toString(...p) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value.toString === 'function') {\n    return value.toString(...p);\n  }\n\n  return String(value);\n}\n\nfunction toPrimitive(hint) {\n  const value = this();\n\n  if (value === undefined) {\n    return String(value);\n  }\n\n  if (value === null) {\n    return String(value);\n  }\n\n  if (typeof value[Symbol.toPrimitive] === 'function') {\n    return value[Symbol.toPrimitive](hint);\n  }\n\n  if (hint === 'string') {\n    return String(value);\n  }\n\n  if (hint === 'number') {\n    return Number(value);\n  }\n\n  return value;\n}\n\nfunction createValue(recover, setValue, stop = () => {}, change = () => {}) {\n  function set(v, marked = false) {\n    if (!setValue) {\n      return;\n    }\n\n    try {\n      setValue(v, () => {\n        marked = true;\n      });\n    } finally {\n      if (marked) {\n        trigger();\n      }\n    }\n  }\n\n  function get() {\n    markRead(value, 'value');\n    return recover();\n  }\n\n  const value = (...v) => {\n    if (v.length) {\n      set(v[0], v[1]);\n      return v[0];\n    }\n\n    return get();\n  };\n\n  Reflect.defineProperty(value, 'value', {\n    get,\n    set,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'valueOf', {\n    value: valueOf,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, 'toString', {\n    value: toString,\n    enumerable: true,\n    configurable: true\n  });\n  Reflect.defineProperty(value, Symbol.toPrimitive, {\n    value: toPrimitive,\n    enumerable: true,\n    configurable: true\n  });\n\n  function watch(cb) {\n    if (!callbacks) {\n      return () => {};\n    }\n\n    cb = safeify(cb);\n    callbacks.push(cb);\n    change();\n    let cancelled = false;\n    return () => {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (!callbacks) {\n        return;\n      }\n\n      const index = callbacks.findIndex(a => a === cb);\n\n      if (index < 0) {\n        return;\n      }\n\n      callbacks.splice(index, 1);\n      change();\n    };\n  }\n\n  let callbacks = [];\n  Reflect.defineProperty(value, 'watch', {\n    get() {\n      return watch;\n    },\n\n    set() {},\n\n    configurable: true\n  });\n\n  const trigger = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    markChange(value, 'value');\n\n    for (const cb of [...callbacks]) {\n      cb(value, false);\n    }\n  };\n\n  trigger.has = () => {\n    var _callbacks;\n\n    return Boolean((_callbacks = callbacks) === null || _callbacks === void 0 ? void 0 : _callbacks.length);\n  };\n\n  trigger.stop = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    const list = callbacks;\n    callbacks = undefined;\n\n    for (const cb of [...list]) {\n      cb(value, true);\n    }\n  };\n\n  values.add(value);\n  let stopped = false;\n\n  value.stop = () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n    stop();\n    trigger.stop();\n  };\n\n  return {\n    value,\n    trigger\n  };\n}\n/**\n * 创建引用值\n * @param value 初始值\n * @param options 选项\n */\n\n\nfunction value(def, options) {\n  const proxy = options === true || options && options.proxy;\n  let source;\n  let proxyValue;\n  const {\n    value\n  } = createValue(() => proxyValue, (v, mark) => {\n    if (proxy) {\n      v = recover(v);\n    }\n\n    if (v === source) {\n      return;\n    }\n\n    source = v;\n    proxyValue = proxy ? encase(source) : source;\n    mark();\n  });\n  value(def);\n  return value;\n}\nfunction computed(getter, setter, options) {\n  var _options;\n\n  if (typeof setter !== 'function') {\n    options = setter;\n    setter = undefined;\n  }\n\n  const setValue = setter;\n  const proxy = options === true || options && options.proxy;\n  const postpone = typeof options === 'object' && ((_options = options) === null || _options === void 0 ? void 0 : _options.postpone);\n  let source;\n  let proxyValue;\n  let stopped = false;\n  let computed = false;\n  let trigger;\n  const executable = monitor(changed => {\n    computed = !changed;\n\n    if (changed && trigger) {\n      trigger();\n    }\n  }, getter, {\n    postpone\n  });\n\n  function run() {\n    computed = true;\n\n    try {\n      source = executable();\n\n      if (proxy) {\n        source = recover(source);\n      }\n\n      proxyValue = proxy ? encase(source) : source;\n      return proxyValue;\n    } catch (e) {\n      if (!stopped) {\n        computed = false;\n      }\n\n      throw e;\n    }\n  }\n\n  let value;\n  ({\n    value,\n    trigger\n  } = createValue(() => computed || stopped ? proxyValue : run(), setValue && (v => setValue(proxy ? recover(v) : v)), () => {\n    if (stopped) {\n      return;\n    }\n\n    stopped = true;\n\n    if (computed) {\n      return;\n    }\n\n    run();\n  }));\n  return value;\n}\nfunction merge(cb) {\n  let oldValue;\n  let ran = false;\n  return (v, stopped) => {\n    if (stopped) {\n      return cb(v, stopped);\n    }\n\n    const newValue = recover(v());\n\n    if (newValue === oldValue && ran) {\n      return;\n    }\n\n    ran = true;\n    oldValue = newValue;\n    cb(v, stopped);\n  };\n}\nfunction mix(source) {\n  for (const k of Reflect.ownKeys(source)) {\n    const descriptor = Reflect.getOwnPropertyDescriptor(source, k);\n\n    if (!descriptor) {\n      continue;\n    }\n\n    if (!('value' in descriptor) || 'get' in descriptor || 'set' in descriptor) {\n      continue;\n    }\n\n    const value = descriptor.value;\n\n    if (!isValue(value)) {\n      continue;\n    }\n\n    descriptor.get = () => value.value;\n\n    if (descriptor.writable) {\n      descriptor.set = v => value.value = v;\n    }\n\n    delete descriptor.value;\n    delete descriptor.writable;\n    Reflect.defineProperty(source, k, descriptor);\n  }\n\n  return source;\n}\n\nfunction createValue$1(props, key, def = value(undefined), set) {\n  function setValue(value, setted) {\n    if (!set) {\n      return;\n    }\n\n    set(value, setted);\n  }\n\n  return computed(() => {\n    if (!(key in props)) {\n      return def();\n    }\n\n    const p = props[key];\n    return isValue(p) ? p() : p;\n  }, v => {\n    if (!(key in props)) {\n      def(v);\n      setValue(v, false);\n      return;\n    }\n\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n      setValue(v, true);\n      return;\n    }\n\n    setValue(v, false);\n  });\n}\n\nfunction valueify(props, key, def, set) {\n  if (arguments.length >= 2) {\n    return createValue$1(props, key, def, set);\n  }\n\n  return (k, d, s) => createValue$1(props, k, d, s);\n}\n\nfunction createValue$2(props, key) {\n  return computed(() => {\n    const p = props[key];\n    return isValue(p) ? p() : p;\n  }, v => {\n    const p = props[key];\n\n    if (isValue(p)) {\n      p(v);\n    } else {\n      props[key] = v;\n    }\n  });\n}\n\nfunction asValue(props, key) {\n  if (arguments.length >= 2) {\n    return createValue$2(props, key);\n  }\n\n  return k => createValue$2(props, k);\n}\n\nexport { asValue, computed, encase, encashable, equal, exec, getIndexes, getMapValue, isValue, markChange, markRead, merge, mix, monitor, observe, observeRun, postpone, printError, recover, safeify, setPrintError, value, valueify, watchProp };\n//# sourceMappingURL=monitorable.esm.js.map\n","export {\n\tvalue, computed, isValue, encase, recover, valueify, asValue,\n\tmarkRead, markChange, safeify, exec, monitor, printError, postpone,\n} from 'monitorable';\n\n\nexport default function installMonitorable(\n\tapi?: typeof import('monitorable'),\n): void {\n}\n","import * as monitorableApi from 'monitorable';\nimport { IRender, Devtools } from '../type';\nimport { isProduction } from '../constant';\nimport installDevtools from './devtools';\nimport installRender from './render';\nimport installMonitorable from './monitorable';\n\n\nexport * from './devtools';\nexport * from './render';\nexport * from './monitorable';\n\n\nexport interface InstallOptions {\n\tmonitorable?: typeof monitorableApi;\n\trender?: IRender;\n\tdevtools?: Devtools;\n}\n\n\nexport default function install(apis: InstallOptions): void {\n\tinstallMonitorable(apis.monitorable);\n\tinstallRender(apis.render);\n\tif (!isProduction) {\n\t\tinstallDevtools(apis.devtools);\n\t}\n}\n","import NeepError from '../Error';\nimport { Entity } from '../type';\n\n/** 当前正在执行的对象 */\nexport let current: Entity | undefined;\nexport function setCurrent<T>(\n\tfn: () => T,\n\tentity: Entity,\n): T {\n\tconst oldEntity = current;\n\tcurrent = entity;\n\ttry {\n\t\tcurrent.$_valueIndex = 0;\n\t\tcurrent.$_serviceIndex = 0;\n\t\tconst ret = fn();\n\t\tif (current.$_valueIndex !== current.$_values.length) {\n\t\t\tthrow new NeepError(\n\t\t\t\t'Inconsistent number of useValue executions',\n\t\t\t\t'life',\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tcurrent.$_serviceIndex &&\n\t\t\tcurrent.$_serviceIndex !== current.$_services.length) {\n\t\t\tthrow new NeepError(\n\t\t\t\t'Inconsistent number of useService executions',\n\t\t\t\t'life',\n\t\t\t);\n\t\t}\n\t\treturn ret;\n\t} finally {\n\t\tcurrent = oldEntity;\n\t}\n}\n\nexport function checkCurrent(\n\tname: string,\n\tinitOnly = false,\n): Entity {\n\tif (!current) {\n\t\tthrow new NeepError(\n\t\t\t`Function \\`${ name }\\` can only be called within a cycle.`,\n\t\t\t'life',\n\t\t);\n\t}\n\tif (!initOnly) {\n\t\treturn current;\n\t}\n\tif (!current.created) {\n\t\treturn current;\n\t}\n\tthrow new NeepError(\n\t\t`Function \\`${ name }\\` can only be called at initialization time.`,\n\t\t'life',\n\t);\n}\n","import { Context, ContextConstructor, Entity } from '../type';\nimport { safeify } from '../install';\n\nconst constructors: ContextConstructor[] = [];\nexport function initContext(\n\tcontext: Context,\n\tentity?: Entity,\n): Context {\n\tfor (const constructor of constructors) {\n\t\tconstructor(context, entity);\n\t}\n\treturn context;\n}\nexport function addContextConstructor(\n\tconstructor: ContextConstructor,\n): void {\n\tconstructors.push(safeify(constructor));\n}\n","import { Entity, EntityConstructor } from '../type';\nimport { safeify } from '../install';\n\nconst constructors: EntityConstructor[] = [];\nexport function initEntity(\n\tentity: Entity,\n): Entity {\n\tfor (const constructor of constructors) {\n\t\tconstructor(entity);\n\t}\n\treturn entity;\n}\nexport function addEntityConstructor(\n\tconstructor: EntityConstructor,\n): void {\n\tconstructors.push(safeify(constructor));\n}\n","import EntityObject from '../entity/EntityObject';\n\nlet delayedRefresh = 0;\nconst objectSet = new Set<EntityObject>();\nexport function wait(obj: EntityObject): boolean {\n\tif (delayedRefresh <= 0) { return false; }\n\tobjectSet.add(obj);\n\treturn true;\n}\nfunction run(): void {\n\tif (delayedRefresh > 0) { return; }\n\tconst list = [...objectSet];\n\tobjectSet.clear();\n\tlist.forEach(o => o.refresh());\n}\nasync function asyncRefresh<T>(f: () => PromiseLike<T> | T): Promise<T> {\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn await f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\nexport default function refresh<T>(f: () => T, async?: false): T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync: true,\n): Promise<T>;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T {\n\tif (async) { return asyncRefresh(f); }\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\n","import { markRead, markChange, printError } from './install';\nimport { Emit, On } from './type';\nimport { refresh } from './extends';\n\nfunction getEventName(k: string): string {\n\tif (k[0] === '@') { return k.substr(1); }\n\tif (/^on[:-]/.test(k)) { return k.substr(3); }\n\tif (/^n([:-])on(\\1|:)/.test(k)) { return k.substr(5); }\n\treturn '';\n}\ninterface AddEvent<T extends Record<string, any[]>> {\n\t<N extends keyof T>(\n\t\tentName: N,\n\t\tlistener: (...p: T[N]) => void,\n\t): void\n}\n\nfunction addEventFromCollection(\n\taddEvent: (entName: string, listener: (...p: any) => void) => void,\n\tevents: any,\n): void {\n\tif (!events) { return; }\n\tif (typeof events === 'function') {\n\t\tconst { names } = events as Emit;\n\t\tif (!Array.isArray(names)) { return; }\n\t\tfor (const n of names) {\n\t\t\tif (!n) { continue; }\n\t\t\taddEvent(n, (...p) => events(n, ...p));\n\t\t}\n\t\treturn;\n\t}\n\tif (typeof events !== 'object') { return; }\n\tfor (const k of Object.keys(events)) {\n\t\tconst f = events[k];\n\t\tif (typeof f !== 'function') { continue; }\n\t\taddEvent(k, f);\n\t}\n\n}\n\nexport default class EventEmitter<\n\tT extends Record<string, any[]> = Record<string, any[]>\n> {\n\tstatic update<T extends Record<string, any[]>>(\n\t\temitter: EventEmitter<T>,\n\t\tevents: any,\n\t): (() => void)[] {\n\t\tif (!events) { return []; }\n\t\tconst newHandles: (() => void)[] = [];\n\t\tif (events && typeof events === 'object') {\n\t\t\tfor (const n of Object.keys(events)) {\n\t\t\t\tif (!n) { continue; }\n\t\t\t\tconst fn = events[n];\n\t\t\t\tif (typeof fn !== 'function') { continue; }\n\t\t\t\tnewHandles.push(emitter.on(n, fn));\n\t\t\t}\n\t\t}\n\t\treturn newHandles;\n\t}\n\tstatic updateInProps<T extends Record<string, any[]>>(\n\t\temitter: EventEmitter<T>,\n\t\tprops: any,\n\t\tcustom?: (addEvent: AddEvent<T>) => void,\n\t): (() => void)[] {\n\t\tif (!props) { return []; }\n\n\t\tconst newHandles: (() => void)[] = [];\n\n\t\tfunction addEvent<N extends keyof T>(\n\t\t\tentName: N,\n\t\t\tlistener: (...p: T[N]) => void,\n\t\t): void {\n\t\t\tnewHandles.push(emitter.on(entName, listener));\n\t\t}\n\t\tfor (const k of Object.keys(props)) {\n\t\t\tconst fn = props[k];\n\t\t\tif (typeof fn !== 'function') { continue; }\n\t\t\tconst entName = getEventName(k);\n\t\t\tif (!entName) { continue; }\n\t\t\taddEvent(entName, fn);\n\t\t}\n\t\taddEventFromCollection(addEvent, props['@']);\n\t\taddEventFromCollection(addEvent, props['n:on']);\n\t\taddEventFromCollection(addEvent, props['n-on']);\n\t\tif (typeof custom === 'function') {\n\t\t\tcustom(addEvent);\n\t\t}\n\t\tnewHandles.push(...EventEmitter.update(emitter, props['@']));\n\t\treturn newHandles;\n\t}\n\n\tprivate readonly _names = new Set<keyof T>();\n\tprivate readonly _cancelHandles = new Set<() => void>();\n\tget names(): (keyof T)[] {\n\t\treturn [...this._names];\n\t}\n\treadonly emit: Emit<T>;\n\treadonly on: On<T>;\n\tconstructor() {\n\t\tconst events: Record<keyof T, Set<(...p: any) => boolean>> = Object.create(null);\n\t\tconst names = this._names;\n\n\t\tfunction createEmit(\n\t\t\t...omitNames: (string | number | symbol)[]\n\t\t): Emit<T> {\n\t\t\tfunction emit<N extends keyof T>(name: N, ...p: T[N]): boolean {\n\t\t\t\tconst event = events[name];\n\t\t\t\tif (!event) { return true; }\n\t\t\t\treturn refresh(() => {\n\t\t\t\t\tlet res = true;\n\t\t\t\t\tfor (const fn of [...event]) {\n\t\t\t\t\t\tres = fn(...p) && res;\n\t\t\t\t\t}\n\t\t\t\t\treturn res;\n\t\t\t\t});\n\t\t\t}\n\t\t\temit.omit = (...names: string[]) =>\n\t\t\t\tcreateEmit(...omitNames, ...names);\n\t\t\tReflect.defineProperty(emit, 'names', {\n\t\t\t\tget:() => {\n\t\t\t\t\tmarkRead(createEmit, 'names');\n\t\t\t\t\treturn [...names]\n\t\t\t\t\t\t.filter(t => !omitNames.includes(t));\n\t\t\t\t},\n\t\t\t\tconfigurable: true,\n\t\t\t});\n\t\t\treturn emit as any as Emit<T>;\n\t\t}\n\t\tconst on: On<T> = (name, listener): () => void => {\n\t\t\tfunction fn(...p: Parameters<typeof listener>): boolean {\n\t\t\t\ttry {\n\t\t\t\t\treturn listener(...p) !== false;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tprintError(e);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet event = events[name];\n\t\t\tif (!event?.size) {\n\t\t\t\tevent = new Set();\n\t\t\t\tevents[name] = event;\n\t\t\t\tmarkChange(createEmit, 'names');\n\t\t\t\tnames.add(name);\n\t\t\t}\n\t\t\tevent.add(fn);\n\t\t\tlet removed = false;\n\t\t\treturn () => {\n\t\t\t\tif (removed) { return; }\n\t\t\t\tremoved = true;\n\t\t\t\tevent.delete(fn);\n\t\t\t\tif (event.size) { return; }\n\t\t\t\tmarkChange(createEmit, 'names');\n\t\t\t\tnames.delete(name);\n\t\t\t};\n\t\t};\n\t\tthis.emit = createEmit();\n\t\tthis.on = on;\n\t}\n\tupdateHandles(newHandles: (() => void)[]): (() => void)[] {\n\t\tconst eventCancelHandles = this._cancelHandles;\n\t\tconst oldHandles = [...eventCancelHandles];\n\t\teventCancelHandles.clear();\n\t\tfor (const fn of oldHandles) { fn(); }\n\t\tnewHandles.forEach(f => eventCancelHandles.add(f));\n\t\treturn newHandles;\n\t}\n\tupdate(list: any): (() => void)[] {\n\t\tconst handles = EventEmitter.update(this, list);\n\t\treturn this.updateHandles(handles);\n\t}\n\tupdateInProps(\n\t\tlist: any,\n\t\tcustom?: (addEvent: AddEvent<T>) => void,\n\t): (() => void)[] {\n\t\tconst handles = EventEmitter.updateInProps(this, list, custom);\n\t\treturn this.updateHandles(handles);\n\t}\n}\n","export const ScopeSlot = 'neep:ScopeSlot';\nexport const SlotRender = 'neep:SlotRender';\nexport const Slot = 'neep:slot';\nexport const Value = 'neep:value';\nexport const Container = 'neep:container';\nexport const Template = 'template';\nexport const Fragment = Template;\n","import { safeify } from './install';\nimport { Hook, Hooks, Entity } from './type';\nconst hooks: Record<string, Set<Hook>> = Object.create(null);\n\nexport function setHook<H extends Hooks>(\n\tid: H,\n\thook: Hook,\n\tentity?: Entity,\n): () => void;\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n): () => void;\n\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n): () => void {\n\tlet list = entity?.$_hooks || hooks;\n\tif (!list) { return () => {}; }\n\thook = safeify(hook);\n\tlet set = list[id];\n\tif (!set) {\n\t\tset = new Set();\n\t\tlist[id] = set;\n\t}\n\tset.add(hook);\n\treturn () => set.delete(hook);\n}\n\nexport function callHook<H extends Hooks>(\n\tid: H,\n\texposed: Entity,\n): void;\nexport function callHook(id: string, exposed: Entity): void;\nexport function callHook(id: string, exposed: Entity): void {\n\tif (!exposed) { return; }\n\tfor (const hook of exposed.$_hooks[id] || []) {\n\t\thook(exposed);\n\t}\n\tfor (const hook of hooks[id] || []) {\n\t\thook(exposed);\n\t}\n}\n","/**********************************\n * 组件上下文环境专用 API\n * @description 简单组件不支持\n **********************************/\nimport { Value, WatchCallback } from 'monitorable';\nimport { Hooks, Service } from '../type';\nimport { checkCurrent } from '../extends';\nimport NeepError from '../Error';\nimport { setHook } from '../hook';\nimport { isValue, value, computed } from './state';\n\n\n/**********************************\n * 状态管理类 API\n **********************************/\n/**\n * 监听指定值的变化\n * @description 本质是调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 被监听的值\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: Value<T>,\n\tcb: WatchCallback<T>,\n): () => void;\n/**\n * 监听指定值的变化\n * @description 本质是创建调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 用于计算观测值的函数\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: () => T,\n\tcb: (v: T, stopped: boolean) => void,\n): () => void;\n\nexport function watch<T>(\n\tvalue: Value<T> | (() => T),\n\tcb: (v: Value<T> | T, stopped: boolean) => void,\n): () => void {\n\tconst entity = checkCurrent('watch');\n\tif (typeof value !== 'function') { return () => {}; }\n\tconst stop = isValue(value)\n\t\t? value.watch(cb)\n\t\t: computed(value).watch((v, s) => cb(v(), s));\n\tsetHook('beforeDestroy', () => stop(), entity);\n\treturn stop;\n}\n\nexport function useValue(): Value<any>;\nexport function useValue<T>(fn: () => T): T;\nexport function useValue<T>(fn?: () => T): T | Value<any>;\nexport function useValue<T>(fn?: () => T): T | Value<any> {\n\tconst entity = checkCurrent('useValue');\n\tconst index = entity.$_valueIndex++;\n\tconst values = entity.$_values;\n\tif (!entity.created) {\n\t\tvalues[index] = undefined;\n\t\tconst v = typeof fn === 'function' ? fn() : value(undefined);\n\t\treturn values[index] = v;\n\t}\n\tif (index >= values.length) {\n\t\tthrow new NeepError(\n\t\t\t'Inconsistent number of useValue executions',\n\t\t\t'life',\n\t\t);\n\t}\n\treturn values[index];\n\n}\n\n/**********************************\n * 服务 API\n **********************************/\nexport function useService<T, P extends any[]>(\n\tfn: Service<T, P>,\n\t...p: P\n): T {\n\tconst entity = checkCurrent('useService');\n\tconst index = entity.$_serviceIndex++;\n\tconst services = entity.$_services;\n\tif (!entity.created) {\n\t\tservices[index] = undefined;\n\t\tconst v = fn(entity, ...p);\n\t\tservices[index] = v;\n\t\treturn v;\n\t}\n\tif (index >= services.length) {\n\t\tthrow new NeepError(\n\t\t\t'Inconsistent number of useService executions',\n\t\t\t'life',\n\t\t);\n\t}\n\treturn services[index];\n}\n\nexport function byService<T, P extends any[]>(\n\tfn: Service<T, P>,\n\t...p: P\n): T {\n\tconst entity = checkCurrent('byService');\n\treturn fn(entity, ...p);\n}\n\n\n/**********************************\n * 钩子类 API\n **********************************/\n/**\n * 为当前组件注册钩子\n * @param name 钩子名称\n * @param hook 钩子\n * @param initOnly 是否仅在初始化时有效\n */\nexport function hook<H extends Hooks>(\n\tname: H,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void) {\n\tconst entity = checkCurrent('setHook');\n\tif (initOnly && entity.created) { return undefined; }\n\treturn setHook(name, () => hook(), entity);\n}\n\n/**********************************\n * 配置 API\n **********************************/\n\nfunction setValue<T>(\n\tobj: any,\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tif (\n\t\ttypeof name === 'string'\n\t\t&& ['$', '_'].includes(name[0])\n\t) {\n\t\treturn;\n\t}\n\tif (isValue(value) && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget() { return value(); },\n\t\t\tset(v) { value(v); },\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tif (typeof value === 'function' && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget: value as () => T,\n\t\t\tset: typeof opt === 'function' ? opt : undefined,\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tReflect.defineProperty(obj, name, {\n\t\tget() { return value; },\n\t\tconfigurable: true,\n\t\tenumerable: true,\n\t});\n}\n\n\n/**\n * 将 Value 导出\n * @param name 导出用的名称\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: Value<T>,\n\tmix?: boolean,\n): void;\n/**\n * 将普通值导出\n * @param name\n * @param value\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T,\n): void;\n/**\n * 设置基于 getter 的导出\n * @param name\n * @param getter\n * @param nonModifiable\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tnonModifiable: true,\n): void;\n/**\n * 设置基于 getter/setter 的导出\n * @param name\n * @param getter\n * @param setter\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n): void;\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tsetValue(checkCurrent('expose', true).exposed, name, value, opt);\n}\n","export const typeSymbol = Symbol.for('type');\nexport const nameSymbol = Symbol.for('name');\nexport const renderSymbol = Symbol.for('render');\nexport const componentsSymbol = Symbol.for('components');\nexport const configSymbol = Symbol.for('config');\n\nexport const objectTypeSymbol = Symbol.for('$$$objectType$$$');\nexport const objectTypeSymbolElement = '$$$objectType$$$Element';\nexport const objectTypeSymbolDeliver = '$$$objectType$$$Deliver';\n\nexport const deliverKeySymbol = Symbol.for('$$$deliverKey$$$');\nexport const deliverDefaultSymbol = Symbol.for('$$$deliverDefault$$$');\n","import { Tag, NeepElement, ElementIteratorOptions } from '../type';\nimport {\n\tobjectTypeSymbol,\n\tobjectTypeSymbolElement,\n\ttypeSymbol,\n} from '../symbols';\nimport { Value, Template, ScopeSlot } from './tags';\n\n/**\n * 判读是否为元素\n */\nexport function isElement(v: any): v is NeepElement {\n\tif (!v) { return false; }\n\tif (typeof v !== 'object') { return false; }\n\treturn v[objectTypeSymbol] === objectTypeSymbolElement;\n}\nexport function isSimpleTag(tag: Tag): boolean {\n\tif (!tag) { return false; }\n\tif (typeof tag !== 'function') { return false; }\n\treturn tag[typeSymbol] === 'simple';\n}\nexport function isSimpleElement(v: any): boolean {\n\treturn isElement(v) && isSimpleTag(v.tag);\n}\n\nexport function createElement(\n\ttag: Tag,\n\tattrs?: {[key: string]: any},\n\t...children: any[]\n): NeepElement {\n\tconst props = attrs ? {...attrs} : {};\n\tconst node: NeepElement = {\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\ttag,\n\t\tkey: undefined,\n\t\tprops,\n\t\tchildren,\n\t};\n\tif ('n:key' in props) { node.key = props['n:key']; }\n\telse if ('n-key' in props) { node.key = props['n-key']; }\n\telse if ('key' in props) { node.key = props.key; }\n\tif ('n:slot' in props) { node.slot = props['n:slot']; }\n\telse if ('n-slot' in props) { node.slot = props['n-slot']; }\n\telse if ('slot' in props) { node.slot = props.slot; }\n\tif (typeof props['n:ref'] === 'function') {\n\t\tnode.ref = props['n:ref'];\n\t} else if (typeof props['n-ref'] === 'function') {\n\t\tnode.ref = props['n-ref'];\n\t} else if (typeof props.ref === 'function') {\n\t\tnode.ref = props.ref;\n\t}\n\tif (tag === Value) {\n\t\tnode.value = props.value;\n\t}\n\treturn node;\n}\n\nexport function elements(\n\tnode: any,\n\topt: ElementIteratorOptions = {},\n): any[] {\n\tif (Array.isArray(node)) {\n\t\tconst list: any[][] = [];\n\t\tfor (let n of node) {\n\t\t\tlist.push(elements(n, opt));\n\t\t}\n\t\treturn ([] as any[]).concat(...list);\n\t}\n\tif (!isElement(node)) { return [node]; }\n\tlet { tag } = node;\n\tif (!tag) { return [node]; }\n\n\tif (([Template, ScopeSlot] as Tag[]).includes(tag)) {\n\t\treturn elements(node.children, opt);\n\t}\n\tif (typeof tag !== 'function') { return [node]; }\n\tif (tag[typeSymbol] !== 'simple') { return [node]; }\n\tconst { simple = true } = opt;\n\tif (!simple) { return [node]; }\n\tif (Array.isArray(simple)) {\n\t\tif (simple.includes(tag)) { return [node]; }\n\t} else if (typeof simple === 'function') {\n\t\tif (!simple(tag)) { return [node]; }\n\t}\n\treturn elements(node.children, opt);\n}\n\nfunction equalProps(a: any, b: any): boolean {\n\tif (Object.is(a, b)) { return true; }\n\tif (!a) { return false; }\n\tif (!b) { return false; }\n\tif (typeof a !== 'object') { return false; }\n\tif (typeof b !== 'object') { return false; }\n\tconst aKeys = new Set(Reflect.ownKeys(a));\n\tconst bKeys = Reflect.ownKeys(b);\n\tif (aKeys.size !== bKeys.length) { return false; }\n\tfor (const k of bKeys) {\n\t\tif (!aKeys.has(k)) { return false; }\n\t\tif (a[k] !== b[k]) { return false; }\n\t}\n\treturn true;\n}\nexport function equal(a: any, b: any): boolean {\n\tif (Object.is(a, b)) { return true; }\n\tif (!a) { return false; }\n\tif (!b) { return false; }\n\tif (typeof a !== 'object') { return false; }\n\tif (typeof b !== 'object') { return false; }\n\tif (Array.isArray(a)) {\n\t\tif (!Array.isArray(b)) { return false; }\n\t\tif (a.length !== b.length) { return false; }\n\t\tfor (let i = a.length - 1; i >= 0; i--) {\n\t\t\tif (!equal(a[i], b[i])) { return false; }\n\t\t}\n\t\treturn true;\n\t}\n\tif (Array.isArray(b)) { return false; }\n\tif (!isElement(a)) { return false; }\n\tif (!isElement(b)) { return false; }\n\tif (a.tag !== b.tag) { return false; }\n\tif (a.execed !== b.execed) { return false; }\n\tif (a.inserted !== b.inserted) { return false; }\n\tif (a.ref !== b.ref) { return false; }\n\tif (a.value !== b.value) { return false; }\n\tif (a.key !== b.key) { return false; }\n\tif (a.slot !== b.slot) { return false; }\n\treturn equalProps(a.props, b.props)\n\t\t&& equal(a.children, b.children);\n}\n","let label: [string, string] | undefined;\nexport function setLabel(l: [string, string]): void {\n\tlabel = l;\n}\n\nexport function getLabel(): typeof label {\n\tconst l = label;\n\tlabel = undefined;\n\treturn l;\n}\n","import { isProduction } from '../constant';\nimport { current } from '../extends';\nimport { setLabel } from '../extends/label';\n\nexport function label(text: string, color = ''): void {\n\tif (!isProduction) {\n\t\tif (!current) {\n\t\t\tsetLabel([text, color]);\n\t\t\treturn;\n\t\t}\n\t\tReflect.defineProperty(current.exposed, '$label', {\n\t\t\tvalue: [text, color],\n\t\t\tconfigurable: true,\n\t\t});\n\t}\n}\n","import {\n\tobjectTypeSymbol,\n\tobjectTypeSymbolDeliver,\n\tdeliverKeySymbol,\n\tdeliverDefaultSymbol,\n} from '../symbols';\nimport { NeepNode, Context, Deliver } from '../type';\nimport { assert } from '../Error';\n\n\nexport function createDeliver<T>(def: T): Deliver<T>;\nexport function createDeliver<T>(def?: T): Deliver<T | undefined>;\nexport function createDeliver<T, D>(def: D): Deliver<T | D>;\nexport function createDeliver<T>(def: T): Deliver<T> {\n\tconst symbol = Symbol();\n\n\tfunction Provider (\n\t\t_: { value?: T },\n\t\t{ childNodes }: Context,\n\t): NeepNode[] {\n\t\treturn childNodes;\n\t}\n\tReflect.defineProperty(Provider, objectTypeSymbol, {\n\t\tvalue: objectTypeSymbolDeliver,\n\t});\n\tReflect.defineProperty(Provider, deliverKeySymbol, {\n\t\tvalue: symbol,\n\t});\n\tReflect.defineProperty(Provider, deliverDefaultSymbol, {\n\t\tvalue: def,\n\t});\n\treturn Provider as Deliver<T>;\n}\n\nexport function isDeliver(d: any): d is Deliver<any> {\n\tif (typeof d !== 'function') { return false; }\n\treturn d[objectTypeSymbol] === objectTypeSymbolDeliver;\n}\n\nexport function getDelivered<T>(delivered: any, Deliver: Deliver<T>): T {\n\tassert(isDeliver(Deliver), '');\n\tconst value = delivered[Deliver[deliverKeySymbol]];\n\treturn value === undefined ? Deliver[deliverDefaultSymbol] : value;\n}\n","import { NativeNode, MountedNode } from '../type';\nimport { isProduction } from '../constant';\n\nlet ids = 0;\nconst Nodes: {[key: number]: MountedNode} = {};\nlet IdMap: undefined | Map<NativeNode, number>;\nif (!isProduction) {\n\tIdMap = new Map();\n}\nexport function createMountedNode(\n\tn: Omit<MountedNode, 'id'>,\n\tid?: number,\n): MountedNode {\n\tif (!isProduction) {\n\t\tid = id || ++ids;\n\t\tconst { node } = n;\n\t\tif (node && IdMap) { IdMap.set(node, id); }\n\t\treturn Nodes[id] = {...n, id};\n\t}\n\treturn {...n, id: 0};\n}\n\nexport function recoveryMountedNode(node: MountedNode): void {\n\tif (!isProduction) {\n\t\tdelete Nodes[node.id];\n\t}\n}\n\nexport function getNode(\n\tid: number | NativeNode,\n): MountedNode | undefined {\n\tif (!isProduction) {\n\t\tif (typeof id !== 'number') {\n\t\t\tid = IdMap?.get(id) || -1;\n\t\t}\n\t\treturn Nodes[id];\n\t}\n\treturn undefined;\n}\n","export interface RecursiveArray<T> extends Array<RecursiveItem<T>>{}\nexport type RecursiveItem<T> = T | RecursiveArray<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield *recursive2iterable(it);\n\t}\n}\n","import { IRender, NativeNode, Exposed, Ref, MountedNode } from '../../type';\nimport { recoveryMountedNode } from '../id';\n\nlet refList: (() => void)[] | undefined;\nexport function setRefList(list?: (() => void)[]): void {\n\trefList = list;\n}\nexport function setRef(\n\tref?: Ref,\n\tnode?: Exposed | NativeNode,\n\tisRemove?: boolean,\n): void {\n\tif (typeof ref !== 'function') { return; }\n\tif (!node) { return; }\n\tif (!refList) {\n\t\tref(node, isRemove);\n\t} else {\n\t\trefList.push(() => ref(node, isRemove));\n\t}\n}\n\ntype MountedNodes = MountedNode | MountedNode[]\n| (MountedNode | MountedNode[])[];\n\n\nexport function *getNodes(tree: MountedNodes): Iterable<NativeNode> {\n\tif (Array.isArray(tree)) {\n\t\tfor (const it of tree) {\n\t\t\tyield *getNodes(it);\n\t\t}\n\t\treturn;\n\t}\n\tconst { children, node, component } = tree;\n\tif (node) {\n\t\tyield node;\n\t\treturn;\n\t}\n\tif (component) {\n\t\tyield *getNodes(component.tree);\n\t\treturn;\n\t}\n\tyield *getNodes(children);\n}\n\nexport function unmount(iRender: IRender, tree: MountedNodes): void {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(e => unmount(iRender, e));\n\t\treturn;\n\t}\n\tconst { component, children, node, ref } = tree;\n\trecoveryMountedNode(tree);\n\tif (component) {\n\t\tsetRef(ref, component.exposed, true);\n\t\tcomponent.unmount();\n\t\treturn;\n\t}\n\tif (node) {\n\t\tsetRef(ref, node, true);\n\t\tiRender.removeNode(node);\n\t}\n\tunmount(iRender, children);\n}\n","import { isValue, Container, Value } from '../../auxiliary';\nimport { IRender, NativeNode, MountedNode, TreeNode } from '../../type';\nimport { createMountedNode } from '../id';\nimport { setRef, getNodes } from './utils';\nimport { isDeliver } from '../../auxiliary/deliver';\n\nexport function createValue(\n\tiRender: IRender,\n\tsource: TreeNode,\n\tvalue: any,\n): MountedNode {\n\tlet { ref } = source;\n\tif (iRender.isNode(value)) {\n\t\tsetRef(ref, value);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tvalue,\n\t\t\tnode: value,\n\t\t\tchildren: [],\n\t\t\tcomponent: undefined,\n\t\t});\n\t}\n\tconst type = typeof value;\n\tlet node: NativeNode | undefined;\n\tif (\n\t\ttype === 'bigint'\n\t\t|| type === 'boolean'\n\t\t|| type === 'number'\n\t\t|| type === 'string'\n\t\t|| type === 'symbol'\n\t\t|| value instanceof RegExp\n\t) {\n\t\tnode = iRender.createText(String(value));\n\t} else if (value instanceof Date) {\n\t\tnode = iRender.createText(value.toISOString());\n\t} else if (type === 'object' && value) {\n\t\tnode = iRender.createText(String(value));\n\t\t// TODO: 对象处理\n\t}\n\tif (!node) { node = iRender.createPlaceholder(); }\n\tsetRef(ref, node);\n\treturn createMountedNode({\n\t\t...source,\n\t\tvalue,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t});\n}\n\nexport function createAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (!source.length) {\n\t\treturn [createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode: iRender.createPlaceholder(),\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t})];\n\t}\n\n\treturn source.map(item =>\n\t\tArray.isArray(item)\n\t\t\t? createList(iRender, item)\n\t\t\t: createItem(iRender, item));\n}\n\nexport function createList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n): MountedNode[] {\n\tif (source.length) {\n\t\treturn source.map(it => createItem(iRender, it));\n\t}\n\treturn [createMountedNode({\n\t\ttag: null,\n\t\tnode: iRender.createPlaceholder(),\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t})];\n}\n\nexport function createItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n): MountedNode {\n\tconst { tag, ref, component } = source;\n\tif (!tag) {\n\t\tconst node = iRender.createPlaceholder();\n\t\tsetRef(ref, node);\n\t\treturn createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t});\n\t}\n\n\tif (isDeliver(tag)) {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: createAll(iRender, source.children),\n\t\t});\n\t}\n\n\tconst ltag = typeof tag !== 'string' ? '' : tag.toLowerCase();\n\tif (typeof tag !== 'string' || ltag === Container) {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: createAll(iRender, source.children),\n\t\t\t});\n\t\t}\n\t\tcomponent.mount();\n\t\tsetRef(ref, component.exposed);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent, children: [],\n\t\t});\n\t}\n\tif (ltag === Value) {\n\t\tlet {value} = source;\n\t\tif (isValue(value)) { value = value(); }\n\t\treturn createValue(iRender, source, value);\n\t}\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: createAll(iRender, source.children),\n\t\t});\n\t}\n\tconst node = iRender.createElement(tag);\n\tsetRef(ref, node);\n\tlet children: (MountedNode | MountedNode[])[] = [];\n\tif (source.children?.length) {\n\t\tchildren = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insertNode(node, it);\n\t\t}\n\t}\n\tiRender.updateProps(node, source.props || {});\n\treturn createMountedNode({\n\t\t...source,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren,\n\t});\n}\n","import { isValue, Value, Container } from '../../auxiliary';\nimport { IRender, NativeNode, NativeElement, MountedNode, TreeNode } from '../../type';\nimport { createMountedNode } from '../id';\nimport { createItem, createAll, createValue, createList } from './create';\nimport { getNodes, unmount, setRef } from './utils';\nimport { isDeliver } from '../../auxiliary/deliver';\n\n\ntype MountedNodes = MountedNode | MountedNode[]\n| (MountedNode | MountedNode[])[];\n\nfunction getLastNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) {\n\t\treturn getLastNode(tree[tree.length - 1]);\n\t}\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getLastNode(component.tree); }\n\treturn getLastNode(children);\n}\n\nfunction getFirstNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) { return getFirstNode(tree[0]); }\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getFirstNode(component.tree); }\n\treturn getFirstNode(children[0]);\n}\n\nfunction replace<T extends MountedNode | MountedNode[]>(\n\tiRender: IRender,\n\tnewTree: T,\n\toldTree: MountedNode | MountedNode[],\n): T {\n\tconst next = getFirstNode(oldTree);\n\tif (!next) { return newTree; }\n\tconst parent = iRender.getParent(next);\n\tif (!parent) { return newTree; }\n\tfor (const it of getNodes(newTree)) {\n\t\tiRender.insertNode(parent, it, next);\n\t}\n\tunmount(iRender, oldTree);\n\treturn newTree;\n}\n\nfunction updateList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n\ttree: MountedNode | MountedNode[],\n): MountedNode[] {\n\tif (!source.length) {\n\t\tconst node = createItem(iRender, {tag: null, children: []});\n\t\treturn [replace(iRender, node, tree)];\n\t}\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: MountedNode[] = [];\n\tconst list = [...tree];\n\tconst mountedMap = new Map<MountedNode, MountedNode>();\n\tfor (const src of source) {\n\t\tconst index = list.findIndex(it =>\n\t\t\tit.tag === src.tag && it.key === src.key);\n\t\tif (index >= 0) {\n\t\t\tconst old = list[index];\n\t\t\tconst item = updateItem(iRender, src, old);\n\t\t\tmountedMap.set(old, item);\n\t\t\tnewList.push(item);\n\t\t\tlist.splice(index, 1);\n\t\t} else {\n\t\t\tconst item = createItem(iRender, src);\n\t\t\tnewList.push(item);\n\t\t}\n\t}\n\tif (!mountedMap.size) {\n\t\treturn replace(iRender, newList, list);\n\t}\n\tunmount(iRender, list);\n\ttree = tree.filter(t => mountedMap.has(t));\n\tconst last = getLastNode(tree[tree.length - 1]);\n\tconst parent = iRender.getParent(last);\n\tif (!parent) { return newList; }\n\tlet next = iRender.nextNode(last);\n\t// 调整次序\n\tfor (let i = newList.length - 1; i >= 0; i--) {\n\t\tconst item = newList[i];\n\t\tconst index = tree.findIndex(o => mountedMap.get(o) === item);\n\t\tif (index >= 0) {\n\t\t\tfor (const it of tree.splice(index)) {\n\t\t\t\tmountedMap.delete(it);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insertNode(parent, it, next);\n\t\t\t}\n\t\t}\n\t\tnext = getFirstNode(item) || next;\n\t}\n\treturn newList;\n}\n/**\n * 更新树\n * @param tree 已有树\n * @param source 用于替换的源\n * @param iRender Neep 对象\n */\nexport function updateAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tlet index = 0;\n\tlet length = Math.min(source.length, tree.length);\n\tconst list: (MountedNode | MountedNode[])[] = [];\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tlist.push(updateList(iRender, src, tree[index]));\n\t\t} else {\n\t\t\tlist.push(updateItem(iRender, src, tree[index]));\n\t\t}\n\t}\n\tlength = Math.max(source.length, tree.length);\n\tif (tree.length > index) {\n\t\t// 销毁多余项\n\t\tfor (; index < length; index++) {\n\t\t\tunmount(iRender, tree[index]);\n\t\t}\n\t}\n\tif (source.length > index) {\n\t\t// 创建多余项\n\t\tconst last = getLastNode(list[list.length - 1]);\n\t\tconst parent = iRender.getParent(last);\n\t\tconst next = iRender.nextNode(last);\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = source[index];\n\t\t\tconst item = Array.isArray(src)\n\t\t\t\t? createList(iRender, src)\n\t\t\t\t: createItem(iRender, src);\n\t\t\tlist.push(item);\n\t\t\tif (!parent) { continue; }\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insertNode(parent, it, next);\n\t\t\t}\n\t\t}\n\t}\n\treturn list;\n}\n\n/**\n * 更新树节点\n * @param iRender Neep 对象\n * @param tree 已有树\n * @param source 用于替换的源\n */\nfunction updateItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n\ttree: MountedNode | MountedNode[],\n): MountedNode {\n\tif (Array.isArray(tree)) {\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === source.tag && it.component === source.component);\n\t\tif (index < 0) {\n\t\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tunmount(iRender, all);\n\t}\n\tconst { tag, component } = source;\n\tconst ref = source.ref !== tree.ref && source.ref || undefined;\n\tif (tag !== tree.tag || component !== tree.component) {\n\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t}\n\n\tif (isDeliver(tag)) {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: updateAll(\n\t\t\t\tiRender,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t),\n\t\t}, tree.id);\n\t}\n\tif (!tag) { return tree; }\n\n\tconst ltag = typeof tag !== 'string' ? '' : tag.toLowerCase();\n\tif (typeof tag !== 'string' || ltag === Container) {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: updateAll(\n\t\t\t\t\tiRender,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t),\n\t\t\t}, tree.id);\n\t\t}\n\t\tsetRef(ref, component.exposed);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent,\n\t\t\tchildren: [],\n\t\t}, tree.id);\n\t}\n\tif (ltag === Value) {\n\t\tlet {value} = source;\n\t\tif (isValue(value)) { value = value(); }\n\t\tif (tree.value === value) {\n\t\t\tsetRef(ref, tree.node);\n\t\t\treturn createMountedNode({\n\t\t\t\t...tree,\n\t\t\t\t...source,\n\t\t\t\tvalue,\n\t\t\t\tchildren: [],\n\t\t\t}, tree.id);\n\t\t}\n\t\treturn replace(iRender, createValue(iRender, source, value), tree);\n\t}\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: updateAll(\n\t\t\t\tiRender,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t),\n\t\t}, tree.id);\n\t}\n\tconst { node } = tree;\n\tsetRef(ref, node);\n\tlet children: (MountedNode | MountedNode[])[] = [];\n\tif (!source.children.length && tree.children.length) {\n\t\tunmount(iRender, tree.children);\n\t} else if (source.children.length && tree.children.length) {\n\t\tchildren = updateAll(iRender, source.children, tree.children);\n\t} else if (source.children.length && !tree.children.length) {\n\t\tchildren = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insertNode(node as NativeElement, it);\n\t\t}\n\t}\n\tiRender.updateProps(node as NativeElement, source.props || {});\n\treturn createMountedNode({...tree, ...source, children}, tree.id);\n}\n","import { IRender, MountedNode, TreeNode } from '../../type';\nimport { updateAll } from './update';\nimport { createAll } from './create';\nexport { unmount, getNodes, setRefList } from './utils';\n\nexport default function draw(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree?: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (tree) {\n\t\treturn updateAll(iRender, source, tree);\n\t}\n\treturn createAll(iRender, source);\n}\n","import { NeepElement, SlotFn, Slots, IRender } from '../type';\nimport { isElement, SlotRender, ScopeSlot, equal, Template } from '../auxiliary';\nimport {\n\ttypeSymbol,\n\tobjectTypeSymbol,\n\tobjectTypeSymbolElement,\n} from '../symbols';\nimport { isProduction } from '../constant';\nimport { isValue } from '../install';\n\n/**\n * 获取槽元素\n * @param iRender 渲染函数\n * @param children 子代\n * @param slots 槽列表\n * @param native 是否为原生组件\n * @returns 原生节点\n */\nexport function getSlots(\n\tiRender: IRender,\n\tchildren: any[],\n\tslots: Record<string | symbol, any[]>,\n\tnative = false,\n): any[] {\n\t/** 原始对象 */\n\tconst nativeList: any[] = [];\n\tfor (const it of children) {\n\t\tif (Array.isArray(it)) {\n\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\tnativeList.push(getSlots(iRender, it, list, native));\n\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\tif (k in slots) {\n\t\t\t\t\tslots[k].push(list[k]);\n\t\t\t\t} else {\n\t\t\t\t\tslots[k] = [list[k]];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (isElement(it) && it.slot === undefined) {\n\t\t\tif (\n\t\t\t\ttypeof it.tag === 'function'\n\t\t\t\t&& it.tag[typeSymbol] === 'simple'\n\t\t\t\t&& it.execed\n\t\t\t\t|| it.tag === Template\n\t\t\t) {\n\t\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\t\tnativeList.push(getSlots(iRender, it.children, list, native));\n\t\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\t\tconst node = { ...it, children: list[k] };\n\t\t\t\t\tif (k in slots) {\n\t\t\t\t\t\tslots[k].push(node);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tslots[k] = [node];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tif (native) {\n\t\t\tif (iRender.isNode(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!isElement(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (it.tag !== SlotRender && it.tag !== Template) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tconst slot = isElement(it) && it.slot || 'default';\n\t\tconst el = isElement(it) ? {\n\t\t\t...it, slot: undefined,\n\t\t\tprops: {...it.props, slot: undefined },\n\t\t} : it;\n\t\tif (slot in slots) {\n\t\t\tslots[slot].push(el);\n\t\t} else {\n\t\t\tslots[slot] = [el];\n\t\t}\n\t}\n\treturn nativeList;\n}\nfunction renderSlots(\n\tlist: any[],\n\t...props: any\n): any[] {\n\treturn list.map(it => {\n\t\tif (Array.isArray(it)) {\n\t\t\treturn renderSlots(it, ...props);\n\t\t}\n\t\tif (!isElement(it)) { return it; }\n\t\tif (it.tag !== SlotRender) {\n\t\t\treturn {\n\t\t\t\t...it,\n\t\t\t\tslot: undefined,\n\t\t\t} as NeepElement;\n\t\t}\n\t\tconst { children } = it;\n\t\tif (children?.length !== 1) { return children; }\n\t\tconst [ render ] = children;\n\t\tif (isValue(render) || typeof render !== 'function') { return children; }\n\t\treturn render(...props);\n\t});\n}\nfunction createSlots(\n\tname: string,\n\tlist: any[],\n): SlotFn {\n\tconst slot = (...props: any): NeepElement => ({\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\ttag: ScopeSlot,\n\t\tchildren: renderSlots(list, ...props),\n\t\tinserted: true,\n\t\tlabel: isProduction ? undefined : [`[${ name }]`, '#00F'],\n\t} as NeepElement);\n\tslot.children = list;\n\treturn slot;\n}\n/**\n * 将槽子代设置到槽列表上\n * @param children 槽子代\n * @param slots 槽对象\n */\nexport function setSlots(\n\tchildren: {[key: string]: any[]},\n\tslots: Slots = Object.create(null),\n\toldChildren?: {[key: string]: any[]},\n): Slots {\n\tfor (const k of Reflect.ownKeys(slots)) {\n\t\tif (k in children) { continue; }\n\t\tdelete slots[k as keyof Slots];\n\t}\n\tif (!oldChildren) {\n\t\tfor (const k of Reflect.ownKeys(children) as string[]) {\n\t\t\tslots[k] = createSlots(k, children[k]);\n\t\t}\n\t\treturn slots;\n\t}\n\tfor (const k of Reflect.ownKeys(children) as string[]) {\n\t\tconst list = children[k];\n\t\tif (equal(list, oldChildren[k])) { continue; }\n\t\tslots[k] = createSlots(k, list);\n\t}\n\treturn slots;\n}\n","import { Component } from './type';\n\nexport const components: Record<string, Component> = Object.create(null);\n\nexport function register(name: string, component: Component): void {\n\tcomponents[name] = component;\n}\n","import { NeepElement, Slots, Component, NeepNode } from '../../type';\nimport { isProduction } from '../../constant';\nimport { isElement, ScopeSlot, Slot, SlotRender } from '../../auxiliary';\nimport { components as globalComponents } from '../../register';\nimport { RecursiveItem, RecursiveArray } from '../recursive';\n\n\nfunction findComponent(\n\ttag: any,\n\tcomponents: Record<string, Component>[],\n): Component | string | null {\n\tif (!tag) { return null; }\n\tif (typeof tag !== 'string') { return tag; }\n\tif (tag === 'template') { return tag; }\n\tif (/^neep:.+/i.test(tag)) { return tag; }\n\tfor (const list of components) {\n\t\tconst component = list[tag];\n\t\tif (component) { return component; }\n\t}\n\treturn globalComponents[tag] || tag;\n}\n\nfunction getChildren(children: any[], args: any[]): any {\n\tif (children.length !== 1) { return children; }\n\tconst [fn] = children;\n\tif (typeof fn !== 'function') { return children; }\n\treturn fn(...args);\n}\nfunction replaceNode<T>(\n\tnode: RecursiveArray<T>,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n\tisRoot: boolean,\n): RecursiveArray<T | NeepNode>;\nfunction replaceNode<T>(\n\tnode: RecursiveItem<T>,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n\tisRoot: boolean,\n): RecursiveItem<T | NeepNode>;\n\nfunction replaceNode<T>(\n\tnode: RecursiveItem<T>,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n\tisRoot: boolean,\n): RecursiveItem<T | NeepNode> {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(n =>\n\t\t\treplaceNode( n, slots, components, native, isRoot));\n\t}\n\tif (!isElement(node)) { return node; }\n\tlet { children, props } = node;\n\tlet tag = findComponent(node.tag, components);\n\tif (tag === SlotRender && isRoot) {\n\t\treturn null;\n\t}\n\n\tif (tag === Slot) {\n\t\ttag = native ? 'slot' : ScopeSlot;\n\t}\n\tif (tag !== ScopeSlot ) {\n\t\treturn {\n\t\t\t...node,\n\t\t\ttag,\n\t\t\tchildren: replaceNode(\n\t\t\t\tchildren,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t\tisRoot,\n\t\t\t),\n\t\t} as NeepElement;\n\t}\n\tif (node.tag === ScopeSlot && node.inserted) {\n\t\treturn node;\n\t}\n\tconst args = props?.argv && [props.argv]\n\t\t|| Array.isArray(props?.args) && props?.args.length && props.args\n\t\t|| [{}];\n\tconst slotName = node.props?.name || 'default';\n\tconst slot = slots[slotName];\n\tif (typeof slot === 'function') {\n\t\treturn {\n\t\t\t...node,\n\t\t\t...slot(...args),\n\t\t} as NeepElement;\n\t}\n\n\tconst label: [string, string] | undefined = isProduction\n\t\t? undefined\n\t\t: [`[${ slotName }]`, '#00F'];\n\n\treturn {\n\t\t...node,\n\t\ttag: ScopeSlot,\n\t\tlabel,\n\t\tchildren: replaceNode(\n\t\t\tgetChildren(children, args),\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t\tfalse,\n\t\t),\n\t} as NeepElement;\n}\nexport default replaceNode;\n","import {\n\tNeepElement, Exposed, Delivered,\n\tRender, NeepNode, Slots, Context, IRender, Component, Deliver,\n} from '../../type';\nimport {\n\trenderSymbol,\n\ttypeSymbol,\n\tcomponentsSymbol,\n\tdeliverKeySymbol,\n\tobjectTypeSymbol,\n\tobjectTypeSymbolElement,\n} from '../../symbols';\nimport { isProduction } from '../../constant';\nimport {\n\tisElement, Value, SlotRender, Fragment,\n} from '../../auxiliary';\nimport { getLabel } from '../../extends/label';\nimport ComponentEntity from '../ComponentEntity';\nimport EntityObject from '../EntityObject';\nimport { getSlots, setSlots } from '../slot';\nimport { initContext } from '../../extends/context';\nimport EventEmitter from '../../EventEmitter';\nimport replaceNode from './replaceNode';\nimport { isValue, postpone } from '../../install';\nimport { refresh } from '../../extends';\nimport { RecursiveItem, RecursiveArray } from '../recursive';\nimport { getDelivered, isDeliver } from '../../auxiliary/deliver';\n\n\nfunction getComponents(\n\t...components: (Record<string, Component> | undefined)[]\n): Record<string, Component>[] {\n\treturn components.filter(Boolean) as Record<string, Component>[];\n}\n\nfunction execSimple(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: NeepElement,\n\ttag: Component,\n\tcomponents: Record<string, Component>[],\n\tchildren: any[],\n): NeepElement {\n\tif (node.execed) { return node; }\n\tconst { iRender } = nObject;\n\tconst slotMap = Object.create(null);\n\tgetSlots(iRender, children, slotMap);\n\tconst slots = setSlots(slotMap);\n\tconst event = new EventEmitter();\n\tevent.updateInProps(node.props);\n\tconst props = {...node.props};\n\tconst context: Context = initContext({\n\t\tslots,\n\t\tcreated: false,\n\t\tparent: nObject.exposed,\n\t\tdelivered<T>(deliver: Deliver<T>): T {\n\t\t\treturn getDelivered(delivered, deliver);\n\t\t},\n\t\tchildren: new Set<Exposed>(),\n\t\tchildNodes: children,\n\t\trefresh(f) { nObject.refresh(f); },\n\t\temit: event.emit,\n\t});\n\tif (!isProduction) { getLabel(); }\n\tconst result = tag(props, context);\n\tlet label: [string, string] | undefined;\n\tif (!isProduction) { label = getLabel(); }\n\tconst nodes = init(\n\t\tnObject,\n\t\tdelivered,\n\t\trenderNode(\n\t\t\tnObject.iRender,\n\t\t\tresult,\n\t\t\tcontext,\n\t\t\ttag[renderSymbol],\n\t\t),\n\t\tslots,\n\t\tgetComponents(...components, tag[componentsSymbol]),\n\t\tfalse,\n\t) as NeepNode[];\n\n\n\treturn {\n\t\t...node,\n\t\ttag,\n\t\texeced: true,\n\t\tchildren: Array.isArray(nodes) ? nodes : [nodes],\n\t\tlabel,\n\t};\n}\n\n\nfunction getSlotRenderFn(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tchildren: any[],\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): null | Function {\n\tif (children.length !== 1) {\n\t\treturn null;\n\t}\n\tconst [renderFn] = children;\n\tif (isValue(renderFn) || typeof renderFn !== 'function') {\n\t\treturn null;\n\t}\n\tconst { slotRenderFnList } = nObject;\n\tconst fn = slotRenderFnList.get(renderFn);\n\tif (fn) { return fn; }\n\tconst newFn = function(this: any, ...p: any[]): any {\n\t\treturn init(\n\t\t\tnObject,\n\t\t\tdelivered,\n\t\t\trenderFn.call(this, ...p),\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t);\n\t};\n\tslotRenderFnList.set(renderFn, newFn);\n\treturn newFn;\n}\n\n\nfunction exec<T>(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: RecursiveArray<T>,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): RecursiveArray<T | NeepElement>;\nfunction exec<T>(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: RecursiveItem<T>,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): RecursiveItem<T | NeepElement>;\n\nfunction exec<T>(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: RecursiveItem<T>,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): RecursiveItem<T | NeepElement> {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(n =>\n\t\t\texec(nObject, delivered, n, slots, components, native));\n\t}\n\tif (!isElement(node)) { return node; }\n\tlet { tag, children } = node;\n\tif (isDeliver(tag)) {\n\t\tconst newDelivered = Object.create(delivered);\n\t\tReflect.defineProperty(newDelivered, tag[deliverKeySymbol], {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: node.props ? node.props.value : undefined,\n\t\t});\n\t\treturn {...node, tag, children: children.map(child => exec(\n\t\t\tnObject,\n\t\t\tnewDelivered,\n\t\t\tchild,\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t)) };\n\t}\n\tif (tag === SlotRender) {\n\t\tconst slotRenderFn = getSlotRenderFn(\n\t\t\tnObject,\n\t\t\tdelivered,\n\t\t\tchildren,\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t);\n\t\tif (slotRenderFn) {\n\t\t\treturn {\n\t\t\t\t...node,\n\t\t\t\tchildren: [slotRenderFn],\n\t\t\t} as NeepElement;\n\t\t}\n\t}\n\n\tif (typeof tag !== 'function' || tag[typeSymbol] !== 'simple') {\n\t\treturn { ...node, tag, children: children\n\t\t\t.map(n => exec(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tn,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t)) };\n\t}\n\n\treturn execSimple(\n\t\tnObject,\n\t\tdelivered,\n\t\tnode,\n\t\ttag,\n\t\tcomponents,\n\t\tchildren,\n\t);\n}\n\n\nfunction getItem(node: any): RecursiveItem<NeepNode> {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(getItem);\n\t}\n\tif (isElement(node)) { return node; }\n\tif (node === undefined || node === null) {\n\t\treturn {\n\t\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\t\ttag: null,\n\t\t\tkey: undefined,\n\t\t\tchildren: [],\n\t\t};\n\t}\n\treturn {\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\tkey: undefined,\n\t\ttag: Value,\n\t\tvalue: node,\n\t\tchildren: [],\n\t};\n}\nfunction renderNode(\n\tiRender: IRender,\n\tnode: any,\n\tcontext: Context,\n\trender?: Render,\n): any[] {\n\tif (Array.isArray(node)) {\n\t\treturn node;\n\t}\n\tif (isElement(node)) {\n\t\tif (node.tag === Fragment) {\n\t\t\treturn node.children.map(getItem);\n\t\t}\n\t\treturn [node];\n\t}\n\tif (!node || !render || iRender.isNode(node)) {\n\t\treturn [node];\n\t}\n\tif (typeof node !== 'object') {\n\t\treturn [node];\n\t}\n\tconst list = render(node, context);\n\tif (Array.isArray(list)) {\n\t\treturn list;\n\t}\n\treturn [list];\n}\nexport function init(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tnode: any[],\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative: boolean,\n): RecursiveArray<NeepNode> {\n\treturn refresh(() => postpone(() => exec(\n\t\tnObject,\n\t\tdelivered,\n\t\treplaceNode(\n\t\t\tnode,\n\t\t\tslots,\n\t\t\tcomponents,\n\t\t\tnative,\n\t\t\ttrue,\n\t\t).map(getItem),\n\t\tslots,\n\t\tcomponents,\n\t\tnative,\n\t)));\n}\n\n\nexport default function normalize(\n\tnObject: ComponentEntity,\n\tresult: any,\n): RecursiveArray<NeepNode> {\n\tconst { component } = nObject;\n\treturn init(\n\t\tnObject,\n\t\tnObject.delivered,\n\t\trenderNode(\n\t\t\tnObject.iRender,\n\t\t\tresult,\n\t\t\tnObject.context,\n\t\t\tcomponent[renderSymbol],\n\t\t),\n\t\tnObject.slots,\n\t\tgetComponents(component[componentsSymbol]),\n\t\tBoolean(nObject.native),\n\t);\n}\n","import {\n\tExposed, Delivered,\n\tEntity,\n\tNativeComponent,\n\tHook, Hooks, NeepNode, IRender, Component, MountedNode, TreeNode,\n} from '../type';\nimport { callHook, setHook } from '../hook';\nimport ContainerEntity from './ContainerEntity';\nimport convert from './convert';\nimport { wait } from '../extends/refresh';\nimport { exec } from '../install';\nimport EventEmitter from '../EventEmitter';\nimport { initEntity } from '../extends/entity';\nimport { RecursiveArray } from './recursive';\n\nfunction createExposed(obj: EntityObject): Exposed {\n\tconst cfg: { [K in Exclude<keyof Exposed, '$label'>]-?:\n\t\t{ configurable: true, value: Exposed[K] }\n\t\t| { configurable: true, get(): Exposed[K] }\n\t} = {\n\t\t$parent: { configurable: true, get: () => obj.parent?.exposed },\n\t\t$component: { configurable: true, value: null },\n\t\t$isContainer: { configurable: true, value: false },\n\t\t$created: { configurable: true, get: () => obj.created },\n\t\t$destroyed: { configurable: true, get: () => obj.destroyed },\n\t\t$mounted: { configurable: true, get: () => obj.mounted },\n\t\t$unmounted: { configurable: true, get: () => obj.unmounted },\n\t};\n\tconst exposed: Exposed = Object.create(null, cfg);\n\treturn exposed;\n}\n\nlet completeList: (() => void)[] | undefined;\nexport function setCompleteList(list?: (() => void)[]): void {\n\tcompleteList = list;\n}\nexport function complete(it: () => void): void {\n\tif (!completeList) {\n\t\tit();\n\t} else {\n\t\tcompleteList.push(it);\n\t}\n}\n\nfunction createEntity(obj: EntityObject): Entity {\n\tconst cfg: { [K in keyof Entity]-?:\n\t\t{ configurable: true, value: Entity[K], writable?: boolean }\n\t\t| { configurable: true, get(): Entity[K] }\n\t} = {\n\t\texposed: { configurable: true, get: () => obj.exposed },\n\t\tparent: { configurable: true, get: () => obj.parent?.entity },\n\t\tcomponent: { configurable: true, value: null },\n\t\tisContainer: { configurable: true, value: false },\n\t\tcreated: { configurable: true, get: () => obj.created },\n\t\tdestroyed: { configurable: true, get: () => obj.destroyed },\n\t\tmounted: { configurable: true, get: () => obj.mounted },\n\t\tunmounted: { configurable: true, get: () => obj.unmounted },\n\t\t$_hooks: { configurable: true, value: Object.create(null) },\n\t\t$_valueIndex: { configurable: true, value: 0, writable: true },\n\t\t$_values: { configurable: true, value: [] },\n\t\t$_serviceIndex: { configurable: true, value: 0, writable: true },\n\t\t$_services: { configurable: true, value: [] },\n\t\tcallHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(h: string) { callHook(h, entity); },\n\t\t},\n\t\tsetHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(id: string, hook: Hook) {\n\t\t\t\treturn setHook(id, hook, entity);\n\t\t\t},\n\t\t},\n\t\trefresh: { configurable: true, value: obj.refresh.bind(obj) },\n\t\ton: { configurable: true, value: obj.on },\n\t\temit: { configurable: true, value: obj.emit },\n\t\tconfig: { configurable: true, value: obj.config },\n\t};\n\tconst entity: Entity = Object.create(null, cfg);\n\treturn initEntity(entity);\n}\n\nexport default class EntityObject {\n\treadonly slotRenderFnList = new WeakMap<Function, Function>();\n\treadonly events = new EventEmitter();\n\treadonly emit = this.events.emit;\n\treadonly on = this.events.on;\n\treadonly eventCancelHandles = new Set<() => void>();\n\treadonly iRender: IRender;\n\treadonly components: Record<string, Component> = Object.create(null);\n\treadonly config: Record<string, any> = Object.create(null);\n\t/** 接受到的呈递值 */\n\treadonly parentDelivered: Delivered;\n\t/** 向后代呈递的值 */\n\treadonly delivered: Delivered;\n\t/** 组件暴露值 */\n\treadonly exposed: Exposed = createExposed(this);\n\t/** 组件实体 */\n\treadonly entity: Entity = createEntity(this);\n\t/** 父组件 */\n\tparent?: EntityObject;\n\t/** 原生组件 */\n\tnative: NativeComponent | undefined;\n\t/** 状态 */\n\tcreated: boolean = false;\n\tdestroyed: boolean = false;\n\tmounted: boolean = false;\n\tunmounted: boolean = false;\n\t/**  子组件的暴露值 */\n\treadonly children: Set<Exposed> = new Set();\n\t/** The subtree mounted on the parent node */\n\ttree: (MountedNode | MountedNode[])[] = [];\n\treadonly container: ContainerEntity;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tparent?: EntityObject,\n\t\tdelivered: Delivered = parent?.delivered || Object.create(null),\n\t\tcontainer?: ContainerEntity,\n\t) {\n\t\tthis.iRender = iRender;\n\t\tthis.parentDelivered = delivered;\n\t\tthis.delivered = Object.create(delivered);\n\t\tif (parent) {\n\t\t\tthis.parent = parent;\n\t\t}\n\t\tthis.container = container || this as any as ContainerEntity;\n\t}\n\t/** 结果渲染函数 */\n\tprotected _render: () => RecursiveArray<NeepNode> = () => [];\n\n\tget canRefresh(): boolean {\n\t\tif (wait(this)) { return false; }\n\t\treturn !this._delayedRefresh;\n\t}\n\tprotected get needRefresh(): boolean {\n\t\tif (wait(this)) { return false; }\n\t\tif (this._delayedRefresh) { return false; }\n\t\tconst needRefresh = this._needRefresh;\n\t\tthis._needRefresh = false;\n\t\treturn needRefresh;\n\t}\n\t/** 是否需要继续刷新 */\n\tprotected _needRefresh = false;\n\tprivate _delayedRefresh = 0;\n\t/** 是否为刷新中 */\n\tprivate _refreshing = false;\n\t/** 渲染结果 */\n\tprotected _nodes: (TreeNode | TreeNode[])[] = [];\n\tprotected requestDraw(): void { }\n\tasync asyncRefresh<T>(f: () => PromiseLike<T> | T): Promise<T> {\n\t\ttry {\n\t\t\tthis._delayedRefresh++;\n\t\t\treturn await f();\n\t\t} finally {\n\t\t\tthis._delayedRefresh--;\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\trefresh(): void;\n\trefresh<T>(f: () => T, async?: false): T;\n\trefresh<T>(f: () => PromiseLike<T> | T, async: true): Promise<T>;\n\trefresh<T>(\n\t\tf: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T;\n\trefresh<T>(\n\t\tf?: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T | undefined;\n\trefresh<T>(\n\t\tf?: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T | undefined {\n\t\tif (typeof f === 'function') {\n\t\t\tif (async) { return this.asyncRefresh(f); }\n\t\t\ttry {\n\t\t\t\tthis._delayedRefresh++;\n\t\t\t\treturn f();\n\t\t\t} finally {\n\t\t\t\tthis._delayedRefresh--;\n\t\t\t\tif (this._delayedRefresh <= 0) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.destroyed) { return; }\n\t\tthis._needRefresh = true;\n\t\tif (!this.created) { return; }\n\n\t\tif (this._refreshing) { return; }\n\t\tthis._refreshing = true;\n\n\t\tlet nodes: RecursiveArray<NeepNode> | undefined;\n\t\twhile (this.needRefresh) {\n\t\t\tnodes = this._render();\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis._refreshing = false;\n\t\tif (!this.canRefresh) { return; }\n\t\tif (!nodes) { return; }\n\n\t\tthis._nodes = convert(this, nodes, this._nodes);\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis.requestDraw();\n\t}\n\tcallHook<H extends Hooks>(id: H): void;\n\tcallHook(id: string): void;\n\tcallHook(id: string): void {\n\t\tcallHook(id, this.entity);\n\t}\n\n\tchildNodes: any[] = [];\n\t/** 更新属性及子代 */\n\tprotected _update(props: object, children: any[]): void {\n\t\tthis.childNodes = children;\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: object, children: any[]): void {\n\t\tthis._update(props, children);\n\t}\n\n\n\tprivate __executed_destroy = false;\n\tprivate __executed_mount = false;\n\tprivate __executed_mounted = false;\n\tprotected _destroy(): void { }\n\tdestroy(): void {\n\t\tif (this.__executed_destroy) { return; }\n\t\tthis.__executed_destroy = true;\n\t\tthis.callHook('beforeDestroy');\n\t\tthis._destroy();\n\t\tthis.callHook('destroyed');\n\t\tthis.destroyed = true;\n\t}\n\tprotected _mount(): void { }\n\tmount(): void {\n\t\tif (this.__executed_destroy) { return; }\n\t\tif (this.__executed_mount) { return; }\n\t\tthis.__executed_mount = true;\n\t\tthis.callHook('beforeMount');\n\t\tconst result = exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => {\n\t\t\t\tthis._mount();\n\t\t\t\tthis.mounted = true;\n\t\t\t},\n\t\t);\n\t\tthis._cancelDrawMonitor = result.stop;\n\t\tcomplete(() => this.callHook('mounted'));\n\t}\n\tprotected _unmount(): void { }\n\tunmount(): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.__executed_mounted) { return; }\n\t\tthis.__executed_mounted = true;\n\t\tthis.callHook('beforeUnmount');\n\t\tthis._unmount();\n\t\tthis.callHook('unmounted');\n\t\tthis.unmounted = true;\n\t}\n\t_draw(): void {}\n\t_cancelDrawMonitor?: () => void;\n\tdraw(): void {\n\t\tif (this.__executed_destroy) { return; }\n\t\tif (this._cancelDrawMonitor) {\n\t\t\tthis._cancelDrawMonitor();\n\t\t}\n\t\tthis.callHook('beforeDraw');\n\t\tconst result = exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => this._draw(),\n\t\t);\n\t\tthis._cancelDrawMonitor = result.stop;\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n}\n","import {\n\tComponent,\n\tNeepNode,\n\tSlots,\n\tContext,\n\tDelivered,\n\tNativeShadow,\n\tTreeNode,\n\tMountedNode,\n\tDeliver,\n} from '../type';\nimport {\n\ttypeSymbol,\n\tconfigSymbol,\n\tcomponentsSymbol,\n} from '../symbols';\nimport { exec, monitor, encase, postpone } from '../install';\nimport { setCurrent } from '../extends/current';\nimport convert, { destroy } from './convert';\nimport draw, { unmount, getNodes } from './draw';\nimport normalize from './normalize';\nimport { getSlots, setSlots } from './slot';\nimport EntityObject from './EntityObject';\nimport { initContext } from '../extends/context';\nimport { refresh } from '../extends';\nimport { RecursiveArray } from './recursive';\nimport { Value } from '../auxiliary/tags';\nimport { getDelivered } from '../auxiliary/deliver';\n\n\nconst disabledKey = new Set([\n\t':', '@', '#', '*',\n\t'!', '%', '^', '~',\n\t'&', '=', '+', '.',\n\t'(', ')', '[', ']', '{', '}', '<', '>',\n]);\nfunction filter(k: string | number | symbol): boolean {\n\tif (typeof k !== 'string') { return true; }\n\tif (disabledKey.has(k[0])) { return false; }\n\tif (/^n[:-]/.test(k)) { return false; }\n\tif (/^on[:-]/.test(k)) { return false; }\n\treturn true;\n}\n\nfunction update(\n\tnObject: ComponentEntity<any, any>,\n\tprops: any,\n\tchildren: any[],\n): void {\n\tconst propsObj = nObject.props;\n\tconst newKeys = new Set(Reflect.ownKeys(props).filter(filter));\n\tfor (const k of Reflect.ownKeys(propsObj)) {\n\t\tif (filter(k) && !newKeys.has(k)) {\n\t\t\tdelete propsObj[k];\n\t\t}\n\t}\n\tfor (const k of newKeys) {\n\t\tpropsObj[k] = props[k];\n\t}\n\n\tnObject.events.updateInProps(props);\n\tconst slots = Object.create(null);\n\tconst { native } = nObject;\n\tconst childNodes = getSlots(\n\t\tnObject.iRender,\n\t\tchildren,\n\t\tslots,\n\t\tBoolean(native),\n\t);\n\tsetSlots(slots, nObject.slots, nObject.lastSlots);\n\tnObject.lastSlots = slots;\n\tif (!native) { return; }\n\tnObject.nativeNodes\n\t\t= convert(nObject, childNodes, nObject.nativeNodes);\n\tif (!nObject.mounted) { return; }\n\tnObject.requestDraw();\n}\n\nfunction createContext<\n\tP extends object = object,\n\tR extends object = object\n>(nObject: ComponentEntity<P, R>): Context {\n\treturn initContext({\n\t\tslots: nObject.slots,\n\t\tget created() { return nObject.created; },\n\t\tget parent() { return nObject.parent.exposed; },\n\t\tget children() { return nObject.children; },\n\t\tget childNodes() { return nObject.childNodes; },\n\t\tget emit() { return nObject.emit; },\n\t\tdelivered<T>(deliver: Deliver<T>): T{\n\t\t\treturn getDelivered(nObject.parentDelivered, deliver);\n\t\t},\n\t\trefresh(f) { nObject.refresh(f); },\n\t}, nObject.entity);\n}\n\ninterface RenderInterface {\n\trender(): any;\n\tnodes: RecursiveArray<NeepNode>;\n\tstopRender(): void;\n}\n/** 初始化渲染 */\nfunction initRender<R extends object = object>(\n\tnObject: ComponentEntity<any, R>,\n): RenderInterface {\n\tconst {\n\t\tcomponent,\n\t\tprops,\n\t\tcontext,\n\t\tentity,\n\t} = nObject;\n\tfunction refresh(changed: boolean): void {\n\t\tif (!changed) { return; }\n\t\tnObject.refresh();\n\t}\n\t// 初始化执行\n\tconst result = exec(\n\t\trefresh,\n\t\t() => setCurrent(\n\t\t\t() => component(props, context),\n\t\t\tentity,\n\t\t),\n\t\t{ resultOnly: true },\n\t);\n\tif (typeof result === 'function') {\n\t\t// 响应式\n\t\tconst render = monitor(\n\t\t\trefresh,\n\t\t\t() => normalize(nObject, (result as () => NeepNode)()),\n\t\t);\n\t\treturn {\n\t\t\tnodes: render(),\n\t\t\trender,\n\t\t\tstopRender: () => render.stop(),\n\t\t};\n\t}\n\n\tconst render = monitor(\n\t\trefresh,\n\t\t() => normalize(nObject, setCurrent(\n\t\t\t() => component(props, context),\n\t\t\tentity,\n\t\t)),\n\t);\n\treturn {\n\t\tnodes: exec(\n\t\t\trefresh,\n\t\t\t() => normalize(nObject, result),\n\t\t\t{ resultOnly: true },\n\t\t),\n\t\trender,\n\t\tstopRender: () => render.stop(),\n\t};\n}\n\n\nexport default class ComponentEntity<\n\tP extends object = object,\n\tR extends object = object\n> extends EntityObject {\n\t/** 组件函数 */\n\treadonly component: Component<P, R>;\n\t/** 组件属性 */\n\treadonly props: P = encase(Object.create(null));\n\t/** 组件槽 */\n\treadonly slots: Slots = encase(Object.create(null));\n\tlastSlots: Record<string | symbol, any[]> | undefined;\n\t/** 结果渲染函数 */\n\tprivate readonly _stopRender: () => void;\n\t/** 原生子代 */\n\tnativeNodes: (TreeNode | TreeNode[])[] | undefined;\n\tshadowTree: (MountedNode | MountedNode[])[] = [];\n\tnativeTree: (MountedNode | MountedNode[])[] = [];\n\tprivate readonly _shadow: NativeShadow | undefined;\n\t/** 组件上下文 */\n\treadonly context: Context;\n\treadonly parent: EntityObject;\n\t/** 结果渲染函数 */\n\tconstructor(\n\t\tcomponent: Component<P, R>,\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: EntityObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(parent.iRender, parent, delivered, parent.container);\n\t\tthis.component = component;\n\t\tObject.assign(this.config, component[configSymbol]);\n\t\tObject.assign(this.components, component[componentsSymbol]);\n\t\tReflect.defineProperty(\n\t\t\tthis.exposed,\n\t\t\t'$component',\n\t\t\t{\n\t\t\t\tvalue: component,\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t},\n\t\t);\n\t\t// 原生组件\n\t\t[this.native, this._shadow] =\n\t\t\tcomponent[typeSymbol] === 'native' &&\n\t\t\tthis.iRender.createComponent?.() || [];\n\t\t// 父子关系\n\t\tthis.parent = parent;\n\t\tparent.children.add(this.exposed);\n\t\t// 上下文属性\n\t\tconst context = createContext(this);\n\t\tthis.context = context;\n\t\t// 初始化钩子\n\t\tthis.callHook('beforeCreate');\n\t\t// 更新属性\n\t\tthis.childNodes = children;\n\t\trefresh(() => postpone(() => update(this, props, children)));\n\t\t// 获取渲染函数及初始渲染\n\t\tconst { render, nodes, stopRender } = initRender(this);\n\t\tthis._render = render;\n\t\tthis._stopRender = stopRender;\n\t\tthis._nodes = convert(this, nodes);\n\t\t// 初始化钩子\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t\tif (this._needRefresh) { this.refresh(); }\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\trefresh(() => postpone(() => update(this, props, children)));\n\t}\n\t_destroy(): void {\n\t\tif (this._stopRender) {\n\t\t\tthis._stopRender();\n\t\t}\n\t\tthis.parent.children.delete(this.exposed);\n\t\tdestroy(this._nodes);\n\t}\n\n\t/** 刷新 */\n\trequestDraw(): void {\n\t\tthis.container.markDraw(this);\n\t}\n\t_draw(): void {\n\t\tconst {nativeNodes, iRender, _shadow, native} = this;\n\t\tif (!native || !nativeNodes || !_shadow) {\n\t\t\tthis.tree = draw(\n\t\t\t\tiRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.tree,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tthis.shadowTree = draw(\n\t\t\tiRender,\n\t\t\tthis._nodes,\n\t\t\tthis.shadowTree,\n\t\t);\n\t\tthis.nativeTree = draw(\n\t\t\tiRender,\n\t\t\tnativeNodes,\n\t\t\tthis.nativeTree,\n\t\t);\n\t}\n\t_mount(): void {\n\t\tconst {\n\t\t\tnativeNodes,\n\t\t\tiRender,\n\t\t\t_shadow,\n\t\t\tnative,\n\t\t\t_nodes,\n\t\t} = this;\n\t\tif (!native || !nativeNodes || !_shadow) {\n\t\t\tthis.tree = draw(iRender, _nodes);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree = draw(iRender, [{\n\t\t\ttag: Value,\n\t\t\tkey: native,\n\t\t\tvalue: native,\n\t\t\tchildren: [],\n\t\t}]);\n\t\tthis.shadowTree = draw(iRender, _nodes);\n\t\tfor (const it of getNodes(this.shadowTree)) {\n\t\t\tiRender.insertNode(_shadow, it);\n\t\t}\n\t\tthis.nativeTree = draw(iRender, nativeNodes);\n\t\tfor (const it of getNodes(this.nativeTree)) {\n\t\t\tiRender.insertNode(native, it);\n\t\t}\n\t}\n\t_unmount(): void {\n\t\tconst {iRender, nativeTree} = this;\n\t\tunmount(iRender, this.tree);\n\t\tif (!nativeTree) { return; }\n\t\tunmount(iRender, nativeTree);\n\t}\n}\n","import { NeepElement, TreeNode } from '../../type';\nimport { isElement, Value } from '../../auxiliary';\nimport { objectTypeSymbol, objectTypeSymbolElement } from '../../symbols';\n\n/** 强制转换为 NeepElement */\nexport function toElement(t: any): null | NeepElement {\n\tif (t === false || t === null || t === undefined) {\n\t\treturn null;\n\t}\n\tif (isElement(t)) {\n\t\treturn t;\n\t}\n\treturn {\n\t\t[objectTypeSymbol]: objectTypeSymbolElement,\n\t\ttag: Value,\n\t\tkey: t,\n\t\tvalue: t,\n\t\tchildren: [],\n\t};\n}\n\nexport function destroy(\n\ttree: TreeNode | TreeNode[] | (TreeNode | TreeNode[])[],\n): void {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(t => destroy(t));\n\t\treturn;\n\t}\n\tconst { component } = tree;\n\tif (component) { component.destroy(); }\n}\n","import { NeepNode, TreeNode, Delivered } from '../../type';\nimport { getRender } from '../../install';\nimport { typeSymbol, deliverKeySymbol } from '../../symbols';\nimport { recursive2iterable } from '../recursive';\nimport EntityObject from '../EntityObject';\nimport ComponentEntity from '../ComponentEntity';\nimport ContainerEntity from '../ContainerEntity';\nimport { toElement } from './utils';\nimport { isDeliver } from '../../auxiliary/deliver';\nimport { Container, Value } from '../../auxiliary/tags';\n\nexport function createItem(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: NeepNode,\n): TreeNode {\n\tif (!source) { return {\n\t\ttag: null,\n\t\tkey: undefined,\n\t\tchildren: [],\n\t}; }\n\tconst { tag } = source;\n\tif (!tag) {\n\t\treturn {\n\t\t\ttag: null,\n\t\t\tkey: undefined,\n\t\t\tchildren: [],\n\t\t};\n\t}\n\n\tif (isDeliver(tag)) {\n\t\tconst newDelivered = Object.create(delivered);\n\t\tReflect.defineProperty(newDelivered, tag[deliverKeySymbol], {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: source.props ? source.props.value : undefined,\n\t\t});\n\t\treturn {\n\t\t\t...source,\n\t\t\tdelivered: newDelivered,\n\t\t\tchildren: createAll(\n\t\t\t\tnObject,\n\t\t\t\tnewDelivered,\n\t\t\t\tsource.children,\n\t\t\t),\n\t\t};\n\t}\n\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: createAll(\n\t\t\t\t\tnObject,\n\t\t\t\t\tdelivered,\n\t\t\t\t\tsource.children,\n\t\t\t\t),\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new ComponentEntity(\n\t\t\t\ttag,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t),\n\t\t};\n\t}\n\tconst ltag = tag.toLowerCase();\n\tif (ltag === Container) {\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new ContainerEntity(\n\t\t\t\tiRender,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t),\n\t\t};\n\t}\n\tif (ltag === Value) {\n\t\treturn { ...source, children: [] };\n\t}\n\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\treturn {\n\t\t\t...source,\n\t\t\tchildren: createAll(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tsource.children,\n\t\t\t),\n\t\t};\n\t}\n\treturn {\n\t\t...source,\n\t\tchildren: createAll(nObject, delivered, source.children),\n\t};\n}\n\nexport function createAll(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: any,\n): (TreeNode | TreeNode[])[] {\n\tif (!Array.isArray(source)) { source = [source]; }\n\tif (!source.length) { return []; }\n\treturn (source as any[]).map(item => {\n\t\tif (!Array.isArray(item)) {\n\t\t\treturn createItem(nObject, delivered, toElement(item));\n\t\t}\n\t\treturn [...recursive2iterable(item)]\n\t\t\t.map(it => createItem(nObject, delivered, toElement(it)));\n\t});\n}\n","import { NeepNode, TreeNode, Delivered } from '../../type';\nimport { getRender } from '../../install';\nimport { typeSymbol, deliverKeySymbol } from '../../symbols';\nimport { recursive2iterable } from '../recursive';\nimport EntityObject from '../EntityObject';\nimport { toElement, destroy } from './utils';\nimport { createItem } from './create';\nimport { isDeliver } from '../../auxiliary/deliver';\nimport { Container, Value } from '../../auxiliary';\n\n/**\n * 更新树节点\n * @param nObject Neep 对象\n * @param source 用于替换的源\n * @param tree 已有树\n */\nfunction updateList(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: any[],\n\ttree: TreeNode | TreeNode[],\n): TreeNode[] {\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: TreeNode[] = [];\n\tfor (const src of recursive2iterable(source)) {\n\t\tconst node = toElement(src);\n\t\tif (!node) { continue; }\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === node.tag && it.key === node.key);\n\t\tif (index >= 0) {\n\t\t\tnewList.push(updateItem(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tnode,\n\t\t\t\ttree[index],\n\t\t\t));\n\t\t\ttree.splice(index, 1);\n\t\t} else {\n\t\t\tnewList.push(createItem(nObject, delivered, node));\n\t\t}\n\t}\n\tdestroy(tree);\n\treturn newList;\n}\n\n/**\n * 更新树节点\n * @param tree 已有树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n */\nfunction updateItem(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: NeepNode,\n\ttree?: TreeNode | TreeNode[],\n): TreeNode {\n\tif (!tree) {\n\t\treturn createItem(nObject, delivered, source);\n\t}\n\tif (!source) {\n\t\tdestroy(tree);\n\t\treturn { tag: null, key: undefined, children: [] };\n\t}\n\tif (Array.isArray(tree)) {\n\t\tif (!tree.length) {\n\t\t\treturn createItem(nObject, delivered, source);\n\t\t}\n\t\tconst index = tree.findIndex(it => it.tag === source.tag);\n\t\tif (index < 0) {\n\t\t\tdestroy(tree);\n\t\t\treturn createItem(nObject, delivered, source);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tdestroy(all);\n\t}\n\tconst { tag } = source;\n\tif (tag !== tree.tag) {\n\t\tdestroy(tree);\n\t\treturn createItem(nObject, delivered, source);\n\t}\n\tif (!tag) { return { tag: null, key: undefined, children: [] }; }\n\n\n\tif (isDeliver(tag)) {\n\t\tconst newDelivered = tree.delivered || Object.create(delivered);\n\t\tReflect.defineProperty(newDelivered, tag[deliverKeySymbol], {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: source.props ? source.props.value : undefined,\n\t\t});\n\t\treturn {\n\t\t\t...source,\n\t\t\tdelivered: newDelivered,\n\t\t\tchildren: [...updateAll(\n\t\t\t\tnObject,\n\t\t\t\tnewDelivered,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t)],\n\t\t};\n\t}\n\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: [...updateAll(\n\t\t\t\t\tnObject,\n\t\t\t\t\tdelivered,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t)],\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, delivered, source); }\n\t\tcomponent.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tconst ltag = tag.toLowerCase();\n\tif (ltag === Container) {\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, delivered, source); }\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\tif (iRender !== component.iRender) {\n\t\t\treturn createItem(nObject, delivered, source);\n\t\t}\n\t\tcomponent.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tif (ltag === Value) {\n\t\treturn { ...source, children: [] };\n\t}\n\tif (ltag.substr(0, 5) === 'neep:' || ltag === 'template') {\n\t\treturn {\n\t\t\t...source,\n\t\t\tchildren: [...updateAll(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t)],\n\t\t};\n\t}\n\treturn {\n\t\t...source,\n\t\tchildren: [...updateAll(nObject,\n\t\t\tdelivered,\n\t\t\tsource.children,\n\t\t\ttree.children)],\n\t};\n}\n\n\nexport function *updateAll(\n\tnObject: EntityObject,\n\tdelivered: Delivered,\n\tsource: any,\n\ttree: (TreeNode | TreeNode[])[],\n): Iterable<TreeNode | TreeNode[]> {\n\tif (!Array.isArray(source)) { source = [source]; }\n\n\tlet index = 0;\n\tlet length = Math.min(source.length || 1, tree.length);\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tyield updateList(nObject, delivered, src, tree[index]);\n\t\t} else {\n\t\t\tyield updateItem(nObject, delivered, toElement(src), tree[index]);\n\t\t}\n\t}\n\tlength = Math.max(source.length, source.length);\n\tif (tree.length > index) {\n\t\t// 销毁多余项\n\t\tfor (; index < length; index++) {\n\t\t\tdestroy(tree[index]);\n\t\t}\n\t}\n\tif (source.length > index) {\n\t\t// 创建多余项\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = toElement(source[index]);\n\t\t\tif (Array.isArray(src)) {\n\t\t\t\tyield [...recursive2iterable(src)]\n\t\t\t\t\t.map(it => createItem(nObject, delivered, it));\n\t\t\t} else {\n\t\t\t\tyield createItem(nObject, delivered, src);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { TreeNode } from '../../type';\nimport EntityObject from '../EntityObject';\nimport { createAll } from './create';\nimport { updateAll } from './update';\nimport { refresh } from '../../extends';\nimport { postpone } from 'monitorable';\n\nexport { destroy } from './utils';\n\n/**\n * 更新树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n * @param tree 已有树\n */\nfunction convert(\n\tnObject: EntityObject,\n\tsource: any[],\n\ttree?: (TreeNode | TreeNode[])[],\n): (TreeNode | TreeNode[])[] {\n\treturn refresh(() => postpone(() => {\n\t\tif (!tree) {\n\t\t\treturn createAll(nObject, nObject.delivered, source);\n\t\t}\n\t\treturn [...updateAll(nObject, nObject.delivered, source, tree)];\n\t}));\n}\n\n\nexport default convert;\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport {\n\tIRender,\n\tMountProps,\n\tNativeNode,\n\tNativeContainer,\n\tDelivered,\n\tMountedNode,\n} from '../type';\nimport { Value } from '../auxiliary';\nimport { createMountedNode } from './id';\nimport convert, { destroy } from './convert';\nimport draw, { unmount, getNodes, setRefList } from './draw';\nimport EntityObject, {\n\tsetCompleteList, complete,\n} from './EntityObject';\nimport { nextFrame, exec, monitor } from '../install';\nimport { init } from './normalize';\n\n\nlet awaitDraw = new Set<ContainerEntity>();\nlet requested = false;\nfunction markDraw(c: ContainerEntity): void {\n\tawaitDraw.add(c);\n\tif (requested) { return; }\n\trequested = true;\n\tnextFrame(() => {\n\t\trequested = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tlist.map(c => c.drawAll());\n\t});\n}\n\nexport default class ContainerEntity extends EntityObject {\n\tprops: MountProps;\n\t/** 组件树结构 */\n\tcontent: (MountedNode | MountedNode[])[] = [];\n\t_node: NativeNode | null = null;\n\t_container: NativeContainer | null = null;\n\treadonly rootContainer: ContainerEntity = this;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tprops: MountProps,\n\t\tchildren: any[],\n\t\tparent?: EntityObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(iRender, parent, delivered);\n\t\tthis.props = props;\n\t\tthis.parent = parent;\n\t\tif (parent) {\n\t\t\tthis.rootContainer = parent.container.rootContainer;\n\t\t}\n\t\tthis.callHook('beforeCreate');\n\t\tthis.childNodes = children;\n\n\t\tconst refresh = (changed: boolean): void => {\n\t\t\tif (!changed) { return; }\n\t\t\tthis._drawChildren = true;\n\t\t\tthis.refresh();\n\t\t};\n\t\tconst slots = Object.create(null);\n\n\t\tthis._render = monitor(\n\t\t\trefresh,\n\t\t\t() => init(\n\t\t\t\tthis,\n\t\t\t\tthis.delivered,\n\t\t\t\tthis.childNodes,\n\t\t\t\tslots,\n\t\t\t\t[],\n\t\t\t\tfalse,\n\t\t\t),\n\t\t);\n\t\tthis._nodes = convert(this, this._render());\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t}\n\t_drawChildren = false;\n\t_drawContainer = false;\n\tsetChildren(children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\tthis._drawChildren = true;\n\t\tthis.refresh();\n\t}\n\tsetProps(props: MountProps): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.props = props;\n\t\tthis._drawContainer = true;\n\t\tthis.refresh();\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: MountProps, children: any[]): void {\n\t\tthis.refresh(() => {\n\t\t\tthis.setProps(props);\n\t\t\tthis.setChildren(children);\n\t\t});\n\t}\n\trequestDraw(): void {\n\t\tthis.markDraw(this);\n\t}\n\t_mount(): void {\n\t\tconst { props, parent, iRender } = this;\n\t\tconst content = draw(this.container.iRender, this._nodes);\n\t\tthis.content = content;\n\t\tconst [container, node]\n\t\t\t= iRender.mount(props, parent?.iRender);\n\t\tfor (const it of getNodes(content)) {\n\t\t\tiRender.insertNode(container, it);\n\t\t}\n\t\tthis.tree = [createMountedNode({\n\t\t\ttag: Value,\n\t\t\tkey: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tnode,\n\t\t\tvalue: node,\n\t\t\tchildren: [],\n\t\t})];\n\t\tthis._node = node;\n\t\tthis._container = container;\n\t}\n\t_destroy(): void {\n\t\tdestroy(this.content);\n\t}\n\t_unmount(): void {\n\t\tconst { parent, iRender } = this;\n\t\tif (parent) {\n\t\t\tunmount(parent.iRender, this.tree);\n\t\t}\n\t\tiRender.unmount(\n\t\t\tthis._container!,\n\t\t\tthis._node!,\n\t\t\tBoolean(parent),\n\t\t);\n\t\tunmount(this.iRender, this.content);\n\t}\n\t_cancelDrawContainerMonitor?: () => void;\n\t_cancelDrawChildrenMonitor?: () => void;\n\t_draw(): void {\n\t\tconst {\n\t\t\t_drawChildren: drawChildren,\n\t\t\t_drawContainer: drawContainer,\n\t\t} = this;\n\t\tthis._drawContainer = false;\n\t\tif (this._cancelDrawContainerMonitor) {\n\t\t\tthis._cancelDrawContainerMonitor();\n\t\t}\n\t\tif (drawContainer) {\n\t\t\tconst result = exec(\n\t\t\t\tc => c && [this._drawContainer = true, this.requestDraw()],\n\t\t\t\t() => this.iRender.drawContainer(\n\t\t\t\t\tthis._container!,\n\t\t\t\t\tthis._node!,\n\t\t\t\t\tthis.props,\n\t\t\t\t\tthis.parent?.iRender,\n\t\t\t\t),\n\t\t\t);\n\t\t\t[this._container, this._node] = result.result;\n\t\t\tthis._cancelDrawContainerMonitor = result.stop;\n\t\t}\n\t\tif (this.parent && this.parent.iRender !== this.iRender) {\n\t\t\treturn;\n\t\t}\n\t\tthis._drawChildren = false;\n\t\tif (this._cancelDrawChildrenMonitor) {\n\t\t\tthis._cancelDrawChildrenMonitor();\n\t\t}\n\t\tif (drawChildren) {\n\t\t\tconst result = exec(\n\t\t\t\tc => c && [this._drawChildren = true, this.requestDraw()],\n\t\t\t\t() => this.content = draw(\n\t\t\t\t\tthis.iRender,\n\t\t\t\t\tthis._nodes,\n\t\t\t\t\tthis.content,\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis.content = result.result;\n\t\t\tthis._cancelDrawChildrenMonitor = result.stop;\n\n\t\t}\n\t}\n\t_drawSelf(): void {\n\t\tconst {\n\t\t\t_drawChildren: drawChildren,\n\t\t\t_drawContainer: drawContainer,\n\t\t} = this;\n\t\tthis._needDraw = false;\n\t\tthis._drawChildren = false;\n\t\tthis._drawContainer = false;\n\t\tif (drawContainer) {\n\t\t\tthis.iRender.drawContainer(\n\t\t\t\tthis._container!,\n\t\t\t\tthis._node!,\n\t\t\t\tthis.props,\n\t\t\t\tthis.parent?.iRender,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\t\tif (drawChildren) {\n\t\t\tthis.content = draw(\n\t\t\t\tthis.iRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.content,\n\t\t\t);\n\t\t}\n\t}\n\tdrawSelf(): void {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tthis.callHook('beforeDraw');\n\t\texec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => this._drawSelf(),\n\t\t);\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n\t/** 等待重画的项目 */\n\tprivate _awaitDraw = new Set<EntityObject>();\n\t/** 自身是否需要重绘 */\n\tprivate _needDraw = false;\n\t/** 标记需要绘制的元素 */\n\tmarkDraw(\n\t\tnObject: EntityObject,\n\t\tremove = false,\n\t): void {\n\t\tif (this.parent?.iRender === this.iRender) {\n\t\t\tthis.parent.container.markDraw(nObject, remove);\n\t\t\treturn;\n\t\t}\n\t\tif (nObject === this && this.parent) {\n\t\t\tthis.parent.container.markDraw(this, remove);\n\t\t\tthis._needDraw = !remove;\n\t\t} else if (remove) {\n\t\t\tthis._awaitDraw.delete(nObject);\n\t\t} else {\n\t\t\tthis._awaitDraw.add(nObject);\n\t\t}\n\t\tthis.rootContainer.markDrawContainer(\n\t\t\tthis,\n\t\t\t!this._needDraw && !this._awaitDraw.size\n\t\t\t|| this.destroyed,\n\t\t);\n\t}\n\tdrawContainer(): void {\n\t\tconst {\n\t\t\t_node: node,\n\t\t\t_container: container,\n\t\t\t_awaitDraw: awaitDraw,\n\t\t} = this;\n\t\tif (!node || !container) { return; }\n\t\tthis.callHook('beforeDraw');\n\t\tconst needDraw = this._needDraw;\n\t\tthis._needDraw = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tif (needDraw) { this.drawSelf(); }\n\t\tlist.map(c => c.draw());\n\t\tthis.iRender.drawNode(container, node);\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n\tprivate _containers = new Set<ContainerEntity>();\n\tmarkDrawContainer(\n\t\tcontainer: ContainerEntity,\n\t\tremove = false,\n\t): void {\n\t\tif (remove) {\n\t\t\tthis._containers.delete(container);\n\t\t} else {\n\t\t\tthis._containers.add(container);\n\t\t}\n\t\tmarkDraw(this);\n\t}\n\tdrawAll(): void {\n\t\tconst containers = this._containers;\n\t\tif (!containers.size) { return; }\n\t\tconst list = [...containers];\n\t\tcontainers.clear();\n\t\tthis.callHook('beforeDrawAll');\n\t\tconst refs: (() => void)[] = [];\n\t\tconst completeList: (() => void)[] = [];\n\t\tsetCompleteList(completeList);\n\t\tsetRefList(refs);\n\t\tlist.forEach(c => c.drawContainer());\n\t\tsetRefList();\n\t\trefs.forEach(r => r());\n\t\tcompleteList.forEach(r => r());\n\t\tthis.callHook('drawnAll');\n\t}\n}\n","import {\n\tMountProps,\n\tNeepElement,\n\tComponent,\n\tRootExposed,\n} from './type';\nimport { isElement, createElement } from './auxiliary';\nimport { isProduction } from './constant';\nimport { devtools, getRender } from './install';\nimport ContainerEntity from './entity/ContainerEntity';\n\n\nexport default function render(\n\te?: NeepElement | Component,\n\tp: MountProps = {},\n): RootExposed {\n\tlet params = {...p};\n\tconst container =  new ContainerEntity(\n\t\tgetRender(p.type),\n\t\tparams,\n\t\te === undefined ? [] : isElement(e) ? [e] : [createElement(e)],\n\t);\n\tif (!isProduction) {\n\t\tdevtools.renderHook(container);\n\t}\n\tconst { exposed } = container;\n\tReflect.defineProperty(exposed, '$update', {\n\t\tvalue(c?: NeepElement | Component) {\n\t\t\tcontainer.setChildren(c === undefined ? []\n\t\t\t\t: isElement(c) ? [c] : [createElement(c)]);\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$mount', {\n\t\tvalue(target?: any) {\n\t\t\tif (exposed.$mounted) { return exposed; }\n\t\t\tif (target) {\n\t\t\t\tparams.target = target;\n\t\t\t\tcontainer.setProps(params);\n\t\t\t}\n\t\t\tcontainer.mount();\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$unmount', {\n\t\tvalue() {\n\t\t\tif (!exposed.$mounted) { return; }\n\t\t\tif (exposed.$unmounted) { return; }\n\t\t\tif (exposed.$destroyed) { return container.destroy(); }\n\t\t\tcontainer.unmount();\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tif (params.target) {\n\t\tcontainer.mount();\n\t}\n\treturn exposed as any as RootExposed;\n}\n","import { Component, Render, Marks } from './type';\nimport { nameSymbol, typeSymbol, renderSymbol, componentsSymbol, configSymbol } from './symbols';\n\n/** 组件标记函数 */\nexport interface Mark {\n\t<N extends Component<any, any>>(component: N): N;\n}\n\n/** 创建组件标记函数 */\nfunction Mark<S extends keyof Marks>(\n\tsymbol: S,\n\tvalue: Component[S],\n): Mark {\n\treturn component => {\n\t\tcomponent[symbol] = value as any;\n\t\treturn component;\n\t};\n}\n/** 创建组件标记函数 */\nfunction MarkValue<S extends typeof componentsSymbol | typeof configSymbol>(\n\tsymbol: S,\n\tkey: keyof (NonNullable<Marks[typeof configSymbol]>),\n\tvalue: NonNullable<Marks[typeof componentsSymbol]>[typeof key],\n): Mark {\n\treturn component => {\n\t\tlet obj = component[symbol] as any;\n\t\tif (!obj) {\n\t\t\tobj = Object.create(null);\n\t\t\tcomponent[symbol] = obj;\n\t\t}\n\t\tobj[key] = value;\n\t\treturn component;\n\t};\n}\n\n\n/** 标记组件名称 */\nexport function mName(name: string): Mark;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent: N,\n): N;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(nameSymbol, name); }\n\tcomponent[nameSymbol] = name;\n\treturn component;\n}\n\n/** 标记组件类型 */\nexport function mType(type?: 'native' | 'simple' | 'standard'): Mark;\nexport function mType<N extends Component<any, any>>(\n\ttype: 'native' | 'simple' | 'standard',\n\tcomponent: N,\n): N;\nexport function mType<N extends Component<any, any>>(\n\ttype?: 'native' | 'simple' | 'standard',\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, type); }\n\tcomponent[typeSymbol] = type;\n\treturn component;\n}\n/** 标记为简单组件 */\nexport function mSimple(): Mark;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'simple'); }\n\tcomponent[typeSymbol] = 'simple';\n\treturn component;\n}\n/** 标记为原生组件 */\nexport function mNative(): Mark;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'native'); }\n\tcomponent[typeSymbol] = 'native';\n\treturn component;\n}\n\n/** 标记独立的渲染函数 */\nexport function mRender(fn?: Marks[typeof renderSymbol]): Mark;\nexport function mRender<N extends Component<any, any>>(\n\tfn: Marks[typeof renderSymbol] | undefined,\n\tcomponent: N,\n): N;\nexport function mRender<N extends Component<any, any>>(\n\tfn?: Marks[typeof renderSymbol] | undefined,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(renderSymbol, fn); }\n\tcomponent[renderSymbol] = fn;\n\treturn component;\n}\n\n/** 标记组件配置 */\nexport function mConfig(name: string, config: any): Mark;\nexport function mConfig<N extends Component<any, any>>(\n\tname: string, config: any,\n\tcomponent: N,\n): N;\nexport function mConfig<N extends Component<any, any>>(\n\tname: string, config: any,\n\tcomponent?: N,\n): Mark | N {\n\tconst mark = MarkValue(configSymbol, name, config);\n\tif (!component) { return mark; }\n\treturn mark(component);\n}\n/** 标记组件类型 */\nexport function mComponent(name: string, item: Component): Mark;\nexport function mComponent<N extends Component<any, any>>(\n\tname: string, item: Component,\n\tcomponent: N,\n): N;\nexport function mComponent<N extends Component<any, any>>(\n\tname: string, item: Component,\n\tcomponent?: N,\n): Mark | N {\n\tconst mark = MarkValue(componentsSymbol, name, item);\n\tif (!component) { return mark; }\n\treturn mark(component);\n}\n\nexport function create<P extends object>(\n\tc: Component<P, never>,\n): Component<P, never>;\nexport function create<\n\tP extends object = object,\n\tR extends object = object,\n>(c: Component<P, R>, r: Render<R>): Component<P, R>;\nexport function create<T extends Component<any, any>>(\n\tc: T,\n\tr?: Render,\n): T {\n\tif (typeof r === 'function') {\n\t\tc[renderSymbol] = r;\n\t}\n\treturn c;\n}\n\nexport function mark<N extends Component<any, any>>(\n\tcomponent: N,\n\t...marks: Mark[]\n): N {\n\tfor (const m of marks) { m(component); }\n\treturn component;\n}\n","import { install as NeepInstall } from '@neep/core';\n\nexport { isValue, EventEmitter, Error } from '@neep/core';\nexport default function installNeep(): typeof NeepInstall {\n\treturn NeepInstall;\n}\n","import { isValue } from '../install/neep';\n\nexport type Id = string;\n\nfunction getId(v: any): Id | undefined {\n\tif (typeof v === 'string') { return v; }\n\tif (typeof v === 'number') { return String(v); }\n\treturn undefined;\n}\nexport default function updateId(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Id,\n): string | undefined {\n\tconst id = getId(isValue(props.id) ? props.id() : props.id);\n\tif (id !== old) {\n\t\tif (typeof id === 'string') {\n\t\t\tel.id = props.id;\n\t\t} else {\n\t\t\tel.removeAttribute('id');\n\t\t}\n\t}\n\treturn id;\n}\n","import { isValue } from '../install/neep';\nimport { Value } from 'monitorable';\n\nexport type RecursiveItem<T> = T | RecursiveItem<T>[] | Value<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (isValue(list)) {\n\t\tyield *recursive2iterable(list());\n\t\treturn;\n\n\t}\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield *recursive2iterable(it);\n\t}\n}\n\nexport type Class = Set<string>;\nfunction getClass(\n\tlist: RecursiveItem<(string | {[k: string]: any})>,\n): Class | undefined {\n\tconst set = new Set<string>();\n\tfor (const v of recursive2iterable(list)) {\n\t\tif (!v) { continue; }\n\t\tif (typeof v === 'string') {\n\t\t\tfor (let k of v.split(' ').filter(Boolean)) {\n\t\t\t\tset.add(k);\n\t\t\t}\n\t\t} else if (typeof v === 'object') {\n\t\t\tfor (const k in v) {\n\t\t\t\tconst add = v[k];\n\t\t\t\tfor (let it of k.split(' ').filter(Boolean)) {\n\t\t\t\t\tset[add ? 'add' : 'delete'](it);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (!set.size) { return undefined; }\n\treturn set;\n}\nfunction update(\n\tel: Element,\n\tclasses?: Class,\n\toClasses?: Class,\n): void {\n\tif (classes && oClasses) {\n\t\tconst list = el.getAttribute('class') || '';\n\t\tconst classList = new Set(list.split(' ').filter(Boolean));\n\t\toClasses.forEach(c => classList.delete(c));\n\t\tclasses.forEach(c => classList.add(c));\n\t\tel.setAttribute('class', [...classList].join(' '));\n\t} else if (classes) {\n\t\tel.setAttribute('class', [...classes].join(' '));\n\t} else if (oClasses) {\n\t\tel.removeAttribute('class');\n\t}\n}\nexport default function updateClass(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Class,\n): Class | undefined {\n\tconst classes = getClass(isValue(props.class) ? props.class() : props.class);\n\tupdate(el, classes, old);\n\treturn classes;\n}\n","import { isValue } from '../install/neep';\n\nexport type Style = string | Record<string, [string, 'important' | undefined]>;\n\nconst unit: Record<string, string> = {\n\t'width': 'px',\n\t'height': 'px',\n\t'top': 'px',\n\t'right': 'px',\n\t'bottom': 'px',\n\t'left': 'px',\n\t'border': 'px',\n\t'border-top': 'px',\n\t'border-right': 'px',\n\t'border-left': 'px',\n\t'border-bottom': 'px',\n\t'border-width': 'px',\n\t'border-top-width': 'px',\n\t'border-right-width': 'px',\n\t'border-left-width': 'px',\n\t'border-bottom-width': 'px',\n\t'border-radius': 'px',\n\t'border-top-left-radius': 'px',\n\t'border-top-right-radius': 'px',\n\t'border-bottom-left-radius': 'px',\n\t'border-bottom-right-radius': 'px',\n\t'padding': 'px',\n\t'padding-top': 'px',\n\t'padding-right': 'px',\n\t'padding-left': 'px',\n\t'padding-bottom': 'px',\n\t'margin': 'px',\n\t'margin-top': 'px',\n\t'margin-right': 'px',\n\t'margin-left': 'px',\n\t'margin-bottom': 'px',\n};\nfunction getStyle(\n\tstyle: any,\n): Style | undefined {\n\tif (isValue(style)) { style = style(); }\n\tif (typeof style === 'string') { return style; }\n\tif (!style) { return undefined; }\n\tif (typeof style !== 'object') { return undefined; }\n\tconst css: Record<string, [string, 'important' | undefined]> =\n\t\tObject.create(null);\n\tfor (let k in style) {\n\t\tlet value = style[k];\n\t\tif (isValue(value)) { value = value(); }\n\t\tconst key = k.substr(0, 2) === '--' ? k\n\t\t\t: k.replace(/[A-Z]/g, '-$1')\n\t\t\t\t.replace(/-+/g, '-')\n\t\t\t\t.toLowerCase();\n\t\tif (typeof value === 'number') {\n\t\t\tconst str = value && k in unit\n\t\t\t\t? `${ value }${ unit[k] }`\n\t\t\t\t: `${ value }`;\n\t\t\tcss[key] = [str, undefined];\n\t\t} else if (value && typeof value === 'string') {\n\t\t\tconst v = value.replace(/!important\\s*$/, '');\n\t\t\tcss[key] = [v, v === value ? undefined : 'important'];\n\t\t}\n\t}\n\treturn css;\n}\n\nfunction update(\n\tcss: CSSStyleDeclaration,\n\tstyle?: Style,\n\toStyle?: Style,\n): void {\n\tif (!style) {\n\t\tif (!oStyle) { return; }\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t\treturn;\n\t\t}\n\t\tfor (const k of Object.keys(oStyle)) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t\treturn;\n\t}\n\n\tif (typeof style === 'string') {\n\t\tif (style !== typeof oStyle) {\n\t\t\tcss.cssText = style;\n\t\t}\n\t\treturn;\n\t}\n\tif (!oStyle || typeof oStyle === 'string') {\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t}\n\t\tfor (const k of Object.keys(style)) {\n\t\t\tcss.setProperty(k, ...style[k]);\n\t\t}\n\t\treturn;\n\t}\n\n\tfor (const k of Object.keys(style)) {\n\t\tconst v = style[k];\n\t\tif (\n\t\t\t!oStyle[k]\n\t\t\t|| oStyle[k][0] !== v[0]\n\t\t\t|| oStyle[k][1] !== v[1]\n\t\t) {\n\t\t\tcss.setProperty(k, ...v);\n\t\t}\n\t}\n\tfor (const k of Object.keys(oStyle)) {\n\t\tif (!style[k]) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t}\n}\nexport default function updateStyle(\n\tprops: {[k: string]: any},\n\tcss: CSSStyleDeclaration,\n\told?: Style,\n\thasStyle?: boolean,\n): Style | undefined {\n\tif (!hasStyle) { return undefined; }\n\n\tconst style = getStyle(\n\t\tisValue(props.style) ? props.style() : props.style,\n\t);\n\tupdate(css, style, old);\n\treturn style;\n}\n","/* eslint-disable no-fallthrough */\nimport { isValue } from '../install/neep';\n\nexport type Attrs = Record<string, string | null>;\n\nexport function setAttrs(\n\tel: Element,\n\tattrs: Record<string, string | null>,\n): void {\n\tif (el instanceof HTMLInputElement && 'checked' in attrs) {\n\t\tswitch (el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\t\tif ((attrs.checked !== null) !== el.checked) {\n\t\t\t\t\tel.checked = attrs.checked !== null;\n\t\t\t\t}\n\t\t}\n\t}\n\tif ((\n\t\tel instanceof HTMLSelectElement\n\t\t|| el instanceof HTMLInputElement\n\t\t|| el instanceof HTMLTextAreaElement\n\t) && 'value' in attrs) {\n\t\tconst value = attrs.value || '';\n\t\tif (el.value !== value) {\n\t\t\tel.value = value;\n\t\t}\n\t}\n\tif ((el instanceof HTMLDetailsElement) && 'open' in attrs) {\n\t\tconst value = attrs.open !== null;\n\t\tif (el.open !== value) {\n\t\t\tel.open = value;\n\t\t}\n\t}\n\tif (el instanceof HTMLMediaElement) {\n\t\tif ('muted' in attrs) {\n\t\t\tconst value = attrs.muted !== null;\n\t\t\tif (el.muted !== value) {\n\t\t\t\tel.muted = value;\n\t\t\t}\n\t\t}\n\t\tif ('paused' in attrs) {\n\t\t\tconst value = attrs.paused !== null;\n\t\t\tif (el.paused !== value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tel.pause();\n\t\t\t\t} else {\n\t\t\t\t\tel.play();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ('currentTime' in attrs) {\n\t\t\tconst value = attrs.currentTime;\n\t\t\tif (value && /^\\d+(\\.\\d+)?$/.test(value)) {\n\t\t\t\tconst num = Number(value);\n\t\t\t\tif (el.currentTime !== num) {\n\t\t\t\t\tel.currentTime = num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ('playbackRate' in attrs) {\n\t\t\tconst value = attrs.playbackRate;\n\t\t\tif (value && /^\\d+(\\.\\d+)?$/.test(value)) {\n\t\t\t\tconst num = Number(value);\n\t\t\t\tif (el.playbackRate !== num) {\n\t\t\t\t\tel.playbackRate = num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ('volume' in attrs) {\n\t\t\tconst value = attrs.volume;\n\t\t\tif (value && /^\\d+(\\.\\d+)?$/.test(value)) {\n\t\t\t\tconst num = Number(value);\n\t\t\t\tif (el.volume !== num) {\n\t\t\t\t\tel.volume = num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction stringify(\n\tdata: any,\n\tisOn = false,\n): string | null | undefined {\n\tif (data === undefined || data === null) { return data; }\n\tif (isOn && typeof data === 'function') { return undefined; }\n\tif (typeof data === 'boolean') { return data ? '' : null; }\n\tif (typeof data !== 'object') { return String(data); }\n\tif (data instanceof Date) {\n\t\treturn data.toISOString();\n\t}\n\tif (data instanceof RegExp) {\n\t\treturn data.toString();\n\t}\n\treturn JSON.stringify(data);\n}\nfunction getAttrs(\n\tprops: {[k: string]: any},\n\thasStyle: boolean,\n): Attrs {\n\tconst attrs: Attrs = Object.create(null);\n\tfor (const k in props) {\n\t\tif (/^(n|on|bind|slot)[:-]/.test(k)) { continue; }\n\t\tif (!/^[a-zA-Z:_][a-zA-Z0-9:_-]*$/.test(k)) { continue; }\n\t\tconst name = k\n\t\t\t.toLowerCase();\n\t\tswitch (name) {\n\t\t\tcase 'style':\n\t\t\t\tif (!hasStyle) { break; }\n\t\t\tcase 'ref':\n\t\t\tcase 'is':\n\t\t\tcase 'id':\n\t\t\tcase 'class':\n\t\t\t\tcontinue;\n\t\t}\n\t\tlet data = props[k];\n\t\tif (isValue(data)) { data = data(); }\n\t\tconst value = stringify(data, name.substr(0, 2) === 'on');\n\t\tif (value !== undefined) { attrs[name] = value; }\n\t}\n\treturn attrs;\n}\nfunction update(\n\tel: Element,\n\tattrs: Attrs,\n\told: Attrs,\n): void {\n\tfor (const k of Object.keys(attrs)) {\n\t\tconst v = attrs[k];\n\t\tif (!(k in old) || old[k] !== v) {\n\t\t\tif (v === null) {\n\t\t\t\tel.removeAttribute(k);\n\t\t\t} else {\n\t\t\t\tel.setAttribute(k, v);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const k of Object.keys(old)) {\n\t\tif (!(k in attrs)) {\n\t\t\tel.removeAttribute(k);\n\t\t}\n\t}\n}\n\nexport default function updateAttrs(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told: Attrs,\n\thasStyle: boolean,\n): Attrs {\n\tconst attrs = getAttrs(props, hasStyle);\n\tupdate(el, attrs, old);\n\tsetAttrs(el, attrs);\n\treturn attrs;\n}\n","import { isValue, EventEmitter } from '../install/neep';\n\nexport interface Events extends InstanceType<typeof EventEmitter> {\n\t__eventBind: Record<string, () => void>;\n}\n\nfunction createEventEmitter(): Events {\n\tconst events: Events = new EventEmitter() as Events;\n\tevents.__eventBind = Object.create(null);\n\treturn events;\n}\n\n\nfunction *getElementModel(el: Element): Iterable<[string, string, (e: any) => any]> {\n\tif (el instanceof HTMLInputElement) {\n\t\tswitch (el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\t\tyield [\n\t\t\t\t\t'indeterminate', 'change',\n\t\t\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).indeterminate,\n\t\t\t\t];\n\t\t\t\treturn yield [\n\t\t\t\t\t'checked', 'change',\n\t\t\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).checked,\n\t\t\t\t];\n\t\t\tcase 'radio':\n\t\t\t\treturn yield [\n\t\t\t\t\t'checked', 'change',\n\t\t\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).checked,\n\t\t\t\t];\n\t\t}\n\t\treturn yield [\n\t\t\t'value', 'input',\n\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLTextAreaElement) {\n\t\treturn yield [\n\t\t\t'value', 'input',\n\t\t\t(e: any) => (e.currentTarget as HTMLTextAreaElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLSelectElement) {\n\t\treturn yield [\n\t\t\t'value', 'change',\n\t\t\t(e: any) => (e.currentTarget as HTMLSelectElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLDetailsElement) {\n\t\treturn yield [\n\t\t\t'open', 'toggle',\n\t\t\t(e: any) => (e.currentTarget as HTMLDetailsElement).open,\n\t\t];\n\t}\n\tif (el instanceof HTMLMediaElement) {\n\t\tyield [\n\t\t\t'currentTime', 'timeupdate',\n\t\t\t(e: any) => (e.currentTarget as HTMLMediaElement).currentTime,\n\t\t];\n\t\tyield [\n\t\t\t'playbackRate', 'ratechange',\n\t\t\t(e: any) => (e.currentTarget as HTMLMediaElement).playbackRate,\n\t\t];\n\t\tyield [\n\t\t\t'volume', 'volumechange',\n\t\t\t(e: any) => (e.currentTarget as HTMLMediaElement).volume,\n\t\t];\n\t\tyield [\n\t\t\t'muted', 'volumechange',\n\t\t\t(e: any) => (e.currentTarget as HTMLMediaElement).muted,\n\t\t];\n\t\tyield [\n\t\t\t'paused', 'playing',\n\t\t\t(e: any) => (e.currentTarget as HTMLMediaElement).paused,\n\t\t];\n\t\treturn yield [\n\t\t\t'paused', 'pause',\n\t\t\t(e: any) => (e.currentTarget as HTMLMediaElement).paused,\n\t\t];\n\t}\n\n}\n\nfunction getEventName(k: string): string {\n\tif (k.substr(0, 2) !== 'on') { return ''; }\n\tlet n = k.substr(2);\n\tif (n[0] === ':' || n[0] === '-') { return ''; }\n\treturn n;\n}\n\nexport default function updateEvent(\n\tprops: {[k: string]: any},\n\tel: Element,\n\tevent = createEventEmitter(),\n): Events {\n\tevent.updateInProps(props, addEvent => {\n\t\tfor (const k in props) {\n\t\t\tconst f = props[k];\n\t\t\tif (typeof f !== 'function') { continue; }\n\t\t\tconst name = getEventName(k);\n\t\t\tif (!name) { continue; }\n\t\t\taddEvent(name, f);\n\t\t}\n\t\tfor (const [prop, name, t] of getElementModel(el)) {\n\t\t\tconst value = props[prop];\n\t\t\tif (isValue(value)) {\n\t\t\t\taddEvent(name, e => value(t(e)));\n\t\t\t}\n\t\t}\n\t});\n\n\tconst names = new Set(event.names.map(String));\n\tconst eventBind = event.__eventBind;\n\tfor (const k of Object.keys(eventBind)) {\n\t\tif (names.has(k)) { continue; }\n\t\teventBind[k]();\n\t\tdelete eventBind[k];\n\t}\n\tconst {emit} = event;\n\tfor (const k of names) {\n\t\tif (k in eventBind) { continue; }\n\t\tconst f = (...p: any[]): boolean => emit(k, ...p);\n\t\tel.addEventListener(k, f);\n\t\teventBind[k] = () => {\n\t\t\tel.removeEventListener(k, f);\n\t\t};\n\t}\n\treturn event;\n}\n","import updateId, { Id } from './id';\nimport updateClass, { Class } from './class';\nimport updateStyle, { Style } from './style';\nimport updateAttrs, { Attrs } from './attr';\nimport updateEvent, { Events } from './event';\n\nconst PropsMap = new WeakMap<Element, {\n\tid?: Id;\n\tclasses?: Class;\n\tstyle?: Style;\n\tattrs: Attrs;\n\tevent?: Events;\n}>();\n\nexport default function update(\n\tel: Element,\n\tprops: {[k: string]: any},\n): Element {\n\tconst css = (el as any).style;\n\tconst hasStyle = css instanceof CSSStyleDeclaration;\n\tconst old = PropsMap.get(el) || { attrs: {} };\n\n\tconst id = updateId(props, el, old.id);\n\tconst classes = updateClass(props, el, old.classes);\n\tconst style = updateStyle(props, css, old.style, hasStyle);\n\tconst attrs = updateAttrs(props, el, old.attrs, hasStyle);\n\tconst event = updateEvent(props, el, old.event);\n\tPropsMap.set(el, { id, classes, style, attrs, event });\n\treturn el;\n}\n","let list: (() => void)[] | undefined;\nexport default function nextFrame(f: () => void): void {\n\tif (list) {\n\t\tlist.push(f);\n\t\treturn;\n\t}\n\tlist = [f];\n\twindow.requestAnimationFrame(() => {\n\t\tconst fs = list;\n\t\tlist = undefined;\n\t\tif (!fs) { return; }\n\t\tfs.forEach(f => f());\n\t});\n}\n","const xmlnsMap: Record<string, string> = {\n\tsvg: 'http://www.w3.org/2000/svg',\n\thtml: 'http://www.w3.org/1999/xhtml',\n\tmathml: 'http://www.w3.org/1998/Math/MathML',\n};\nconst SVGTags = new Set([\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'script',\n\t'set',\n\t'stop',\n\t'style',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'title',\n\t'tref',\n\t'tspan',\n\t'use',\n\t'view',\n\t'vkern',\n]);\nconst MathMLTags = new Set([\n\t'maction',\n\t'math',\n\t'menclose',\n\t'merror',\n\t'mfenced',\n\t'mfrac',\n\t'mglyph',\n\t'mi',\n\t'mlabeledtr',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics',\n]);\n\nexport default function createElement(\n\ttagname: string,\n\tnamespace?: string,\n): Element {\n\tconst res = /^([a-z][a-z0-9-]*):([a-z0-9-]+)$/i.exec(tagname);\n\tconst tag = res ? res[2] : tagname;\n\tconst ns = (namespace || res?.[1]\n\t\t|| SVGTags.has(tag.toLowerCase()) && 'svg'\n\t\t|| MathMLTags.has(tag.toLowerCase()) && 'mathml' || '').toLowerCase();\n\tif (!ns) {\n\t\treturn document.createElement(tag);\n\t}\n\treturn document.createElementNS(\n\t\tns in xmlnsMap && xmlnsMap[ns] || ns,\n\t\ttag,\n\t);\n}\n","const tagRegex =\n\t/^[a-z][a-z0-9]*(?:-[a-z0-9]+)?(?::[a-z0-9]+(?:-[a-z0-9]+)?)?$/i;\nexport function isTagName(tag: any): boolean {\n\tif (typeof tag !== 'string') { return false; }\n\treturn tagRegex.test(tag);\n}\n","import {\n\tIRender,\n\tNativeNode,\n\tNativeText,\n\tNativePlaceholder,\n\tNativeComponent,\n\tNativeShadow,\n\tNativeContainer,\n\tNativeElement,\n} from '@neep/core';\nimport update from './update';\nimport nextFrame from './nextFrame';\nimport createElement from './createElement';\nimport { isTagName } from './utils';\nimport { isValue } from './install/neep';\n\nconst render: IRender = {\n\ttype: 'web',\n\tnextFrame,\n\tisNode(v): v is NativeNode {\n\t\treturn v instanceof Node;\n\t},\n\tmount({target, class: className, style, tag}, parent) {\n\t\tif (isValue(target)){\n\t\t\ttarget = target.value;\n\t\t}\n\t\tif (!isTagName(tag)) { tag = 'div'; }\n\n\t\tconst container = render.createElement(tag);\n\t\trender.updateProps(container, { class: className, style });\n\n\t\tif (target === null) {\n\t\t\tif (!parent) {\n\t\t\t\treturn [container, container];\n\t\t\t}\n\t\t\treturn [container, parent.createPlaceholder()];\n\t\t}\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (target instanceof Element) {\n\t\t\ttarget.appendChild(container as any);\n\t\t\tif (parent) {\n\t\t\t\treturn [container, parent.createPlaceholder()] as any;\n\t\t\t}\n\t\t\treturn [container, container];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\tdocument.body.appendChild(container as any);\n\t\t\treturn [container, container] as any;\n\t\t}\n\t\treturn [container, container] as any;\n\t},\n\tunmount(container, node, removed) {\n\t\tif (container === node && removed) { return; }\n\t\t(container as any as Element).remove();\n\t},\n\tdrawContainer(container, node, {target, class: className, style, tag}, parent) {\n\t\trender.updateProps(container as NativeElement, { class: className, style });\n\t\tif (isValue(target)){\n\t\t\tconsole.log(target);\n\t\t\ttarget = target.value;\n\t\t}\n\t\tconst oldTarget = parent === render && container === node\n\t\t\t? undefined : render.getParent(node);\n\t\tif (target === null) {\n\t\t\tif (oldTarget === null) {\n\t\t\t\treturn [container, node];\n\t\t\t}\n\t\t\tif (container !== node) {\n\t\t\t\t(container as any).remove();\n\t\t\t}\n\t\t\tif (!parent) {\n\t\t\t\treturn [container, container];\n\t\t\t}\n\t\t\treturn [container, parent.createPlaceholder()];\n\t\t}\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (parent !== render && !(target instanceof Element)) {\n\t\t\ttarget = document.body;\n\t\t}\n\t\tif (oldTarget === target) {\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\ttarget.appendChild(container);\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (!oldTarget) {\n\t\t\tconst newNode = parent.createPlaceholder();\n\t\t\tconst pNode = parent.getParent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insertNode(pNode, newNode as any, node);\n\t\t\t\trender.removeNode(node);\n\t\t\t}\n\t\t\ttarget.appendChild(container);\n\t\t\treturn [container, newNode];\n\t\t}\n\t\tif (!target) {\n\t\t\tconst pNode = parent.getParent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insertNode(pNode, container, node);\n\t\t\t\trender.removeNode(node);\n\t\t\t}\n\t\t\treturn [container, container];\n\n\t\t}\n\t\ttarget.appendChild(container);\n\t\treturn [container, node];\n\t},\n\tdrawNode() {},\n\n\tcreateElement(tag) {\n\t\treturn createElement(tag) as any;\n\t},\n\tcreateText(text: string): NativeText {\n\t\treturn document.createTextNode(text) as any;\n\t},\n\tcreatePlaceholder(): NativePlaceholder {\n\t\treturn document.createComment('') as any;\n\t},\n\tcreateComponent(): [NativeComponent, NativeShadow] {\n\t\tconst node = createElement('neep-component');\n\t\treturn [node, node.attachShadow({ mode: 'open' })] as any;\n\t},\n\n\tgetParent(node: NativeNode): NativeContainer | null {\n\t\treturn (node as any).parentNode as NativeContainer | null;\n\t},\n\tnextNode(node: NativeNode): NativeNode | null {\n\t\treturn (node as any).nextSibling as NativeContainer | null;\n\t},\n\tupdateProps(node, props): void {\n\t\tupdate(node as any, props);\n\t},\n\tinsertNode(\n\t\tparent: NativeContainer,\n\t\tnode: NativeNode,\n\t\tnext: NativeNode | null = null,\n\t): void {\n\t\t(parent as any).insertBefore(node, next);\n\t},\n\tremoveNode(node: NativeNode): void {\n\t\tconst p = render.getParent(node);\n\t\tif (!p) { return; }\n\t\t(p as any).removeChild(node);\n\t},\n\tgetRect(node: NativeNode) {\n\t\tif (node instanceof Element) {\n\t\t\tconst {\n\t\t\t\ttop, right, bottom, left, width, height,\n\t\t\t} = node.getBoundingClientRect();\n\t\t\treturn { top, right, bottom, left, width, height };\n\t\t}\n\t\tif (node instanceof ShadowRoot) {\n\t\t\tconst {\n\t\t\t\ttop, right, bottom, left, width, height,\n\t\t\t} = node.host.getBoundingClientRect();\n\t\t\treturn { top, right, bottom, left, width, height };\n\t\t}\n\t\treturn null;\n\t},\n};\n\nexport default render;\n","import render from '../render';\nimport installNeep from './neep';\n\ninstallNeep()({ render });\n\nexport default function install(\n\tNeep: typeof import('@neep/core'),\n): void {\n}\n","import { create, mark, mName, Template, createElement, value, computed } from '@neep/core';\n\nconst Compute = create((\n\tprops: {  a?: any, onset?: () => void },\n) => {\n\tconst a = value(1);\n\tconst b = value(2);\n\t// eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n\tconst c1 = computed(() => a + b);\n\tconst c2 = computed(() => a.value + b.value);\n\tconst c3 = computed(() => Number(a) + Number(b));\n\tconst c4 = computed(() => Number(a.value) + Number(b.value));\n\treturn () => <Template>\n\t\t计算\n\t\t<div><input value={a} />+<input value={b} />={c1}</div>\n\t\t<div><input value={a} />+<input value={b} />={c2}</div>\n\t\t<div><input value={a} />+<input value={b} />={c3}</div>\n\t\t<div><input value={a} />+<input value={b} />={c4}</div>\n\t</Template>;\n});\nexport default mark(Compute, mName('Compute') );\n","/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport { create, mark, mName, Template, createElement, useValue, computed } from '@neep/core';\n\nconst Compute2 = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ slots, delivered, emit },\n) => {\n\tconst a = useValue();\n\tconst b = useValue();\n\tconst c1 = useValue(() => computed(() => a + b));\n\tconst c2 = useValue(() => computed(() => a.value + b.value));\n\tconst c3 = useValue(() => computed(() => Number(a) + Number(b)));\n\tconst c4 = useValue(() => computed(() => Number(a.value) + Number(b.value)));\n\treturn <Template>\n\t\t计算\n\t\t<div><input value={a} />+<input value={b} />={c1}</div>\n\t\t<div><input value={a} />+<input value={b} />={c2}</div>\n\t\t<div><input value={a} />+<input value={b} />={c3}</div>\n\t\t<div><input value={a} />+<input value={b} />={c4}</div>\n\t</Template>;\n});\nexport default mark(Compute2, mName('Compute2') );\n","import { create, mark, mName, Template, createElement, value } from '@neep/core';\n\nconst Sync = create((\n\tprops: {  a?: any, onset?: () => void },\n) => {\n\tconst inputValue = value('');\n\tconst checked = value(false);\n\tconst ref = (x: any): void => console.log('Ref', 'B', x);\n\treturn () => <Template>\n\t\t同步的输入框及显示\n\t\t<div><input ref={ref} type=\"checkbox\" checked={checked} /><input value={inputValue} style=\"width: 100%\" /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div ref={ref}>[{checked}]{inputValue}</div>\n\t</Template>;\n});\nexport default mark(Sync, mName('Sync') );\n","import { create, mark, mName, Template, createElement, useValue } from '@neep/core';\n\nconst Sync2 = create(() => {\n\tconst inputValue = useValue();\n\tconst checked = useValue();\n\n\treturn <Template>\n\t\t同步的输入框及显示\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style=\"width: 100%\" /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div><input type=\"checkbox\" checked={checked} /><input value={inputValue} style={{width: '100%'}} /></div>\n\t\t<div>[{checked}]{inputValue}</div>\n\t</Template>;\n});\nexport default mark(Sync2, mName('Sync2') );\n","import { createDeliver, value } from '@neep/core';\n\nexport const DeliverValue = createDeliver(value(0));\nexport const DeliverNumber = createDeliver(0);\n","import { create, mark, mName, Template, Slot, createElement, hook } from '@neep/core';\nimport Compute from './Compute';\nimport Compute2 from './Compute2';\nimport Sync from './Sync';\nimport Sync2 from './Sync2';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nconst B = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ slots, delivered, emit },\n) => {\n\thook('beforeCreate', () => console.log('Hook', 'B', 'beforeCreate'), true);\n\thook('created', () => console.log('Hook', 'B', 'created'), true);\n\thook('beforeMount', () => console.log('Hook', 'B', 'beforeMount'), true);\n\thook('mounted', () => console.log('Hook', 'B', 'mounted'), true);\n\thook('beforeUpdate', () => console.log('Hook', 'B', 'beforeUpdate'), true);\n\thook('updated', () => console.log('Hook', 'B', 'updated'), true);\n\tconst a = delivered(DeliverValue);\n\treturn <Template>\n\t\t<div>B: {a}|{delivered(DeliverNumber)}</div>\n\t\t{slots.name?.()}\n\t\t<br />\n\t\t{slots.default?.()}\n\t\t<button onclick={props.onset}>[onclick]+1</button>\n\t\t<button on-click={props.onset}>[on-click]+1</button>\n\t\t<button {...{'@click': props.onset}}>[@click]+1</button>\n\t\t<button {...{'on:click': props.onset}}>[on:click]+1</button>\n\t\t<button {...{'@click': () => emit('set')}}>[@click=emit]+1</button>\n\t\t<br />\n\t\t<Slot />\n\t\t<Slot />\n\t\t<br />\n\t\t<Slot name=\"666\">666</Slot>\n\t\t<br />\n\t\t<Slot name=\"name\">name</Slot>\n\t\t<hr />\n\t\t<Sync />\n\t\t<hr />\n\t\t<Sync2 />\n\t\t<hr />\n\t\t<Compute />\n\t\t<hr />\n\t\t<Compute2 />\n\t\t<hr />\n\t</Template>;\n});\nexport default mark(B, mName('B'));\n","import * as Neep from '@neep/core';\nimport B from './components/B';\n\nNeep.register('tb', B);\n","import { create, mark, mName, mSimple, createElement, label, computed  } from '@neep/core';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nconst E = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes, delivered },\n) => {\n\tlabel('{E}', '#F00');\n\tconst a = delivered(DeliverValue);\n\tconst newA = computed(() => a.value + 1);\n\treturn <DeliverValue value={newA}>\n\t\t<DeliverNumber value={delivered(DeliverNumber) + 1}>\n\t\t\t<div>E: {a}|{delivered(DeliverNumber)}</div>\n\t\t\t<tb {...props} {...{'@set': props.onset}}>\n\t\t\t\t{ childNodes }\n\t\t\t</tb>\n\t\t</DeliverNumber>\n\t</DeliverValue>;\n});\nexport default mark(E, mName('E'), mSimple);\n","import { create, mark, mName, mSimple, createElement, label } from '@neep/core';\n\nimport E from './E';\n\nconst D = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes },\n) => {\n\tlabel('{D}', '#F00');\n\treturn <E {...props}>\n\t\t{ childNodes }\n\t</E>;\n});\nexport default mark(D, mName('D'), mSimple);\n","import { create, mark, mName, mSimple, createElement, label, mComponent, computed } from '@neep/core';\n\nimport D from './D';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nconst C = create((\n\tprops: {  a?: any, onset?: () => void },\n\t{ childNodes, delivered },\n) => {\n\tlabel('{C}', '#F00');\n\tconst a = delivered(DeliverValue);\n\tconst newA = computed(() => a.value + 1);\n\treturn <DeliverValue value={newA}>\n\t\t<DeliverNumber value={delivered(DeliverNumber) + 1}>\n\t\t\t<div>C: {a}|{delivered(DeliverNumber)}</div>\n\t\t\t<td {...props}>\n\t\t\t\t{ childNodes }\n\t\t\t</td>\n\t\t</DeliverNumber>\n\t</DeliverValue>;\n});\nexport default mark(C, mName('C'), mSimple, mComponent('td', D));\n","import { create, mark, mName, mComponent, value, createElement, label, hook, Container, computed } from '@neep/core';\n\nimport C from './C';\nimport { DeliverValue, DeliverNumber } from './delivers';\n\nfunction createItem(bg: string): HTMLDivElement {\n\tconst div = document.createElement('div');\n\tdiv.style.minHeight = '40px';\n\tdiv.style.background = bg;\n\tdocument.body.appendChild(div);\n\treturn div;\n}\nconst divs = [\n\tcreateItem('#F00'),\n\tcreateItem('#FF0'),\n\tcreateItem('#F0F'),\n\tcreateItem('#0F0'),\n\tcreateItem('#0FF'),\n\tcreateItem('#00F'),\n];\n\nconst A = create((\n\tprops: { name?: string },\n) => {\n\tconst divIndex = value(6);\n\tconst div = computed(() => divs[divIndex.value]);\n\n\tfunction moveDiv(): void {\n\t\tdivIndex.value = (divIndex.value + 1) % (divs.length + 1);\n\t}\n\n\tlabel('{自定义标签文本}', '#F00');\n\thook('beforeCreate', () => console.log('Hook', 'A', 'beforeCreate'));\n\thook('created', () => console.log('Hook', 'A', 'created'));\n\thook('beforeMount', () => console.log('Hook', 'A', 'beforeMount'));\n\thook('mounted', () => console.log('Hook', 'A', 'mounted'));\n\thook('beforeUpdate', () => console.log('Hook', 'A', 'beforeUpdate'));\n\thook('updated', () => console.log('Hook', 'A', 'updated'));\n\tconst v = value(1);\n\tconst ref = (x: any): void => console.log('Ref', 'B', x);\n\treturn () => <DeliverValue value={v}>\n\t\t<DeliverNumber value={v.value}>\n\t\t\t<Container target={div}>\n\t\t\t\t<button on-click={moveDiv}>移动</button>\n\t\t\t</Container>\n\t\t\t<tc a=\"1\" onset={() => v.value++ } ref={ref}>\n\t\t\t\t<b ref={ref}>你好</b>\n\t\t\t\t<i ref={ref}>{v}</i>\n\t\t\t\t<u ref={ref} slot=\"name\">{props.name}</u>\n\t\t\t</tc>\n\t\t</DeliverNumber>\n\t</DeliverValue>;\n});\n\nexport default mark(A, mName('A'), mComponent('tc', C));\n","import { create, mName, mark, createElement } from '@neep/core';\nimport A from './components/A';\n\nconst App = create(() => <A name=\"啊\" />);\n\nexport default mark(App, mName('App'));\n","import '@neep/html-renderer';\nimport * as Neep from '@neep/core';\nimport './register';\nimport App from './App';\nNeep.render(App).$mount();\n"],"names":["devtools","renderHook","installDevtools","tools","NeepError","Error","constructor","message","tag","assert","v","nextFrameApi","nextFrame","fn","renders","Object","create","getRender","type","default","installRender","render","console","printError","String","map","value","def","installMonitorable","api","install","apis","monitorable","current","setCurrent","entity","oldEntity","$_valueIndex","$_serviceIndex","ret","$_values","length","$_services","checkCurrent","name","initOnly","created","constructors","initContext","context","initEntity","delayedRefresh","objectSet","Set","wait","obj","add","run","list","clear","forEach","o","refresh","asyncRefresh","f","async","getEventName","k","substr","test","addEventFromCollection","addEvent","events","names","Array","isArray","n","p","keys","EventEmitter","update","emitter","newHandles","push","on","updateInProps","props","custom","entName","listener","_names","createEmit","omitNames","emit","event","res","omit","Reflect","defineProperty","get","markRead","filter","t","includes","configurable","e","size","markChange","removed","delete","updateHandles","eventCancelHandles","_cancelHandles","oldHandles","handles","ScopeSlot","SlotRender","Slot","Value","Container","Template","Fragment","hooks","setHook","id","hook","$_hooks","safeify","set","callHook","exposed","useValue","index","values","undefined","typeSymbol","Symbol","for","nameSymbol","renderSymbol","componentsSymbol","configSymbol","objectTypeSymbol","objectTypeSymbolElement","objectTypeSymbolDeliver","deliverKeySymbol","deliverDefaultSymbol","isElement","createElement","attrs","children","node","key","slot","ref","equalProps","a","b","is","aKeys","ownKeys","bKeys","has","equal","i","execed","inserted","label","setLabel","l","getLabel","text","color","createDeliver","symbol","Provider","_","childNodes","isDeliver","d","getDelivered","delivered","Deliver","ids","Nodes","IdMap","Map","createMountedNode","recoveryMountedNode","recursive2iterable","it","refList","setRefList","setRef","isRemove","getNodes","tree","component","unmount","iRender","removeNode","createValue","source","isNode","RegExp","createText","Date","toISOString","createPlaceholder","createAll","item","createList","createItem","ltag","toLowerCase","mount","isValue","insertNode","updateProps","getLastNode","getFirstNode","replace","newTree","oldTree","next","parent","getParent","updateList","newList","mountedMap","src","findIndex","old","updateItem","splice","last","nextNode","updateAll","Math","min","max","all","draw","getSlots","slots","native","nativeList","el","renderSlots","createSlots","isProduction","setSlots","oldChildren","components","register","findComponent","globalComponents","getChildren","args","replaceNode","isRoot","argv","slotName","getComponents","Boolean","execSimple","nObject","slotMap","deliver","result","nodes","init","renderNode","getSlotRenderFn","renderFn","slotRenderFnList","newFn","call","exec","newDelivered","enumerable","child","slotRenderFn","getItem","postpone","normalize","createExposed","cfg","$parent","$component","$isContainer","$created","$destroyed","destroyed","$mounted","mounted","$unmounted","unmounted","completeList","setCompleteList","complete","createEntity","isContainer","writable","h","bind","config","EntityObject","container","WeakMap","parentDelivered","canRefresh","_delayedRefresh","needRefresh","_needRefresh","requestDraw","_refreshing","_render","_nodes","convert","_update","_destroy","destroy","__executed_destroy","_mount","__executed_mount","c","_cancelDrawMonitor","stop","_unmount","__executed_mounted","_draw","disabledKey","propsObj","newKeys","lastSlots","nativeNodes","createContext","initRender","changed","resultOnly","monitor","stopRender","ComponentEntity","encase","assign","_shadow","createComponent","_stopRender","markDraw","shadowTree","nativeTree","toElement","ContainerEntity","awaitDraw","requested","drawAll","rootContainer","_drawChildren","setChildren","setProps","_drawContainer","content","_node","_container","drawChildren","drawContainer","_cancelDrawContainerMonitor","_cancelDrawChildrenMonitor","_drawSelf","_needDraw","drawSelf","remove","_awaitDraw","markDrawContainer","needDraw","drawNode","_containers","containers","refs","r","params","target","Mark","MarkValue","mName","mSimple","mComponent","mark","marks","m","installNeep","NeepInstall","getId","updateId","removeAttribute","getClass","split","classes","oClasses","getAttribute","classList","setAttribute","join","updateClass","class","unit","getStyle","style","css","str","oStyle","cssText","removeProperty","setProperty","updateStyle","hasStyle","setAttrs","HTMLInputElement","checked","HTMLSelectElement","HTMLTextAreaElement","HTMLDetailsElement","open","HTMLMediaElement","muted","paused","pause","play","currentTime","num","Number","playbackRate","volume","stringify","data","isOn","toString","JSON","getAttrs","updateAttrs","createEventEmitter","__eventBind","getElementModel","currentTarget","indeterminate","updateEvent","prop","eventBind","addEventListener","removeEventListener","PropsMap","CSSStyleDeclaration","window","requestAnimationFrame","fs","xmlnsMap","svg","html","mathml","SVGTags","MathMLTags","tagname","namespace","ns","document","createElementNS","tagRegex","isTagName","Node","className","querySelector","Element","appendChild","body","log","oldTarget","newNode","pNode","createTextNode","createComment","attachShadow","mode","parentNode","nextSibling","insertBefore","removeChild","getRect","top","right","bottom","left","width","height","getBoundingClientRect","ShadowRoot","host","Compute","c1","computed","c2","c3","c4","Compute2","Sync","inputValue","x","Sync2","DeliverValue","DeliverNumber","B","onset","Neep","E","newA","D","C","bg","div","minHeight","background","divs","A","divIndex","moveDiv","App","$mount"],"mappings":"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"}